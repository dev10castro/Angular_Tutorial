var GP=Object.defineProperty,qP=Object.defineProperties;var KP=Object.getOwnPropertyDescriptors;var xl=Object.getOwnPropertySymbols,YP=Object.getPrototypeOf,gw=Object.prototype.hasOwnProperty,_w=Object.prototype.propertyIsEnumerable,QP=Reflect.get;var mw=(n,e,t)=>e in n?GP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,w=(n,e)=>{for(var t in e||={})gw.call(e,t)&&mw(n,t,e[t]);if(xl)for(var t of xl(e))_w.call(e,t)&&mw(n,t,e[t]);return n},W=(n,e)=>qP(n,KP(e));var vw=(n,e)=>{var t={};for(var r in n)gw.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&xl)for(var r of xl(n))e.indexOf(r)<0&&_w.call(n,r)&&(t[r]=n[r]);return t};var mr=(n,e,t)=>QP(YP(n),t,e);var p=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function yw(n,e){return Object.is(n,e)}var Fe=null,Ll=!1,Fl=1,gr=Symbol("SIGNAL");function te(n){let e=Fe;return Fe=n,e}function Iw(){return Fe}var pa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function pp(n){if(Ll)throw new Error("");if(Fe===null)return;Fe.consumerOnSignalRead(n);let e=Fe.nextProducerIndex++;if(Bl(Fe),e<Fe.producerNode.length&&Fe.producerNode[e]!==n&&fa(Fe)){let t=Fe.producerNode[e];jl(t,Fe.producerIndexOfThis[e])}Fe.producerNode[e]!==n&&(Fe.producerNode[e]=n,Fe.producerIndexOfThis[e]=fa(Fe)?bw(n,Fe,e):0),Fe.producerLastReadVersion[e]=n.version}function JP(){Fl++}function Ew(n){if(!(fa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Fl)){if(!n.producerMustRecompute(n)&&!gp(n)){n.dirty=!1,n.lastCleanEpoch=Fl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Fl}}function ww(n){if(n.liveConsumerNode===void 0)return;let e=Ll;Ll=!0;try{for(let t of n.liveConsumerNode)t.dirty||ZP(t)}finally{Ll=e}}function Cw(){return Fe?.consumerAllowSignalWrites!==!1}function ZP(n){n.dirty=!0,ww(n),n.consumerMarkedDirty?.(n)}function Ul(n){return n&&(n.nextProducerIndex=0),te(n)}function mp(n,e){if(te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(fa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)jl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function gp(n){Bl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ew(t),r!==t.version))return!0}return!1}function _p(n){if(Bl(n),fa(n))for(let e=0;e<n.producerNode.length;e++)jl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function bw(n,e,t){if(Tw(n),n.liveConsumerNode.length===0&&Dw(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=bw(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function jl(n,e){if(Tw(n),n.liveConsumerNode.length===1&&Dw(n))for(let r=0;r<n.producerNode.length;r++)jl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Bl(i),i.producerIndexOfThis[r]=e}}function fa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Tw(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Dw(n){return n.producerNode!==void 0}function Sw(n){let e=Object.create(XP);e.computation=n;let t=()=>{if(Ew(e),pp(e),e.value===Vl)throw e.error;return e.value};return t[gr]=e,t}var hp=Symbol("UNSET"),fp=Symbol("COMPUTING"),Vl=Symbol("ERRORED"),XP=W(w({},pa),{value:hp,dirty:!0,error:null,equal:yw,producerMustRecompute(n){return n.value===hp||n.value===fp},producerRecomputeValue(n){if(n.value===fp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=fp;let t=Ul(n),r;try{r=n.computation()}catch(i){r=Vl,n.error=i}finally{mp(n,t)}if(e!==hp&&e!==Vl&&r!==Vl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function eO(){throw new Error}var Aw=eO;function Nw(){Aw()}function Rw(n){Aw=n}var tO=null;function Mw(n){let e=Object.create(Pw);e.value=n;let t=()=>(pp(e),e.value);return t[gr]=e,t}function vp(n,e){Cw()||Nw(),n.equal(n.value,e)||(n.value=e,nO(n))}function kw(n,e){Cw()||Nw(),vp(n,e(n.value))}var Pw=W(w({},pa),{equal:yw,value:void 0});function nO(n){n.version++,JP(),ww(n),tO?.()}function F(n){return typeof n=="function"}function gs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var $l=gs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function li(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var De=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(F(r))try{r()}catch(s){e=s instanceof $l?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Ow(s)}catch(o){e=e??[],o instanceof $l?e=[...e,...o.errors]:e.push(o)}}if(e)throw new $l(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ow(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&li(t,e)}remove(e){let{_finalizers:t}=this;t&&li(t,e),e instanceof n&&e._removeParent(this)}};De.EMPTY=(()=>{let n=new De;return n.closed=!0,n})();var yp=De.EMPTY;function Hl(n){return n instanceof De||n&&"closed"in n&&F(n.remove)&&F(n.add)&&F(n.unsubscribe)}function Ow(n){F(n)?n():n.unsubscribe()}var Qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var _s={setTimeout(n,e,...t){let{delegate:r}=_s;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=_s;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Wl(n){_s.setTimeout(()=>{let{onUnhandledError:e}=Qt;if(e)e(n);else throw n})}function ui(){}var xw=Ip("C",void 0,void 0);function Lw(n){return Ip("E",void 0,n)}function Fw(n){return Ip("N",n,void 0)}function Ip(n,e,t){return{kind:n,value:e,error:t}}var di=null;function vs(n){if(Qt.useDeprecatedSynchronousErrorHandling){let e=!di;if(e&&(di={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=di;if(di=null,t)throw r}}else n()}function Vw(n){Qt.useDeprecatedSynchronousErrorHandling&&di&&(di.errorThrown=!0,di.error=n)}var hi=class extends De{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hl(e)&&e.add(this)):this.destination=sO}static create(e,t,r){return new ys(e,t,r)}next(e){this.isStopped?wp(Fw(e),this):this._next(e)}error(e){this.isStopped?wp(Lw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wp(xw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rO=Function.prototype.bind;function Ep(n,e){return rO.call(n,e)}var Cp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){zl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){zl(r)}else zl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zl(t)}}},ys=class extends hi{constructor(e,t,r){super();let i;if(F(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Qt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ep(e.next,s),error:e.error&&Ep(e.error,s),complete:e.complete&&Ep(e.complete,s)}):i=e}this.destination=new Cp(i)}};function zl(n){Qt.useDeprecatedSynchronousErrorHandling?Vw(n):Wl(n)}function iO(n){throw n}function wp(n,e){let{onStoppedNotification:t}=Qt;t&&_s.setTimeout(()=>t(n,e))}var sO={closed:!0,next:ui,error:iO,complete:ui};var Is=typeof Symbol=="function"&&Symbol.observable||"@@observable";function et(n){return n}function ma(...n){return bp(n)}function bp(n){return n.length===0?et:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var U=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=aO(t)?t:new ys(t,r,i);return vs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Uw(r),new r((i,s)=>{let o=new ys({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Is](){return this}pipe(...t){return bp(t)(this)}toPromise(t){return t=Uw(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Uw(n){var e;return(e=n??Qt.Promise)!==null&&e!==void 0?e:Promise}function oO(n){return n&&F(n.next)&&F(n.error)&&F(n.complete)}function aO(n){return n&&n instanceof hi||oO(n)&&Hl(n)}function Tp(n){return F(n?.lift)}function q(n){return e=>{if(Tp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function B(n,e,t,r,i){return new Dp(n,e,t,r,i)}var Dp=class extends hi{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Es(){return q((n,e)=>{let t=null;n._refCount++;let r=B(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ws=class extends U{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Tp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new De;let t=this.getSubject();e.add(this.source.subscribe(B(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=De.EMPTY)}return e}refCount(){return Es()(this)}};var jw=gs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=(()=>{class n extends U{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Gl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new jw}next(t){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?yp:(this.currentObservers=null,s.push(t),new De(()=>{this.currentObservers=null,li(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new U;return t.source=this,t}}return n.create=(e,t)=>new Gl(e,t),n})(),Gl=class extends je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:yp}};var $e=class extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Sp={now(){return(Sp.delegate||Date).now()},delegate:void 0};var ql=class extends De{constructor(e,t){super()}schedule(e,t=0){return this}};var ga={setInterval(n,e,...t){let{delegate:r}=ga;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ga;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Cs=class extends ql{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return ga.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ga.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,li(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var bs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};bs.now=Sp.now;var Ts=class extends bs{constructor(e,t=bs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ds=new Ts(Cs),Ap=Ds;var Kl=class extends Cs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Yl=class extends Ts{};var Np=new Yl(Kl);var tt=new U(n=>n.complete());function Ql(n){return n&&F(n.schedule)}function Rp(n){return n[n.length-1]}function Jl(n){return F(Rp(n))?n.pop():void 0}function In(n){return Ql(Rp(n))?n.pop():void 0}function Bw(n,e){return typeof Rp(n)=="number"?n.pop():e}function pi(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Hw(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function $w(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fi(n){return this instanceof fi?(this.v=n,this):new fi(n)}function Ww(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(m){return Promise.resolve(m).then(f,d)}}function a(f,m){r[f]&&(i[f]=function(y){return new Promise(function(D,M){s.push([f,y,D,M])>1||c(f,y)})},m&&(i[f]=m(i[f])))}function c(f,m){try{l(r[f](m))}catch(y){h(s[0][3],y)}}function l(f){f.value instanceof fi?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,m){f(m),s.shift(),s.length&&c(s[0][0],s[0][1])}}function zw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof $w=="function"?$w(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Zl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Xl(n){return F(n?.then)}function eu(n){return F(n[Is])}function tu(n){return Symbol.asyncIterator&&F(n?.[Symbol.asyncIterator])}function nu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ru=cO();function iu(n){return F(n?.[ru])}function su(n){return Ww(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield fi(t.read());if(i)return yield fi(void 0);yield yield fi(r)}}finally{t.releaseLock()}})}function ou(n){return F(n?.getReader)}function be(n){if(n instanceof U)return n;if(n!=null){if(eu(n))return lO(n);if(Zl(n))return uO(n);if(Xl(n))return dO(n);if(tu(n))return Gw(n);if(iu(n))return hO(n);if(ou(n))return fO(n)}throw nu(n)}function lO(n){return new U(e=>{let t=n[Is]();if(F(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function uO(n){return new U(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function dO(n){return new U(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Wl)})}function hO(n){return new U(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Gw(n){return new U(e=>{pO(n,e).catch(t=>e.error(t))})}function fO(n){return Gw(su(n))}function pO(n,e){var t,r,i,s;return Hw(this,void 0,void 0,function*(){try{for(t=zw(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function dt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function _r(n,e=0){return q((t,r)=>{t.subscribe(B(r,i=>dt(r,n,()=>r.next(i),e),()=>dt(r,n,()=>r.complete(),e),i=>dt(r,n,()=>r.error(i),e)))})}function vr(n,e=0){return q((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function qw(n,e){return be(n).pipe(vr(e),_r(e))}function Kw(n,e){return be(n).pipe(vr(e),_r(e))}function Yw(n,e){return new U(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Qw(n,e){return new U(t=>{let r;return dt(t,e,()=>{r=n[ru](),dt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>F(r?.return)&&r.return()})}function au(n,e){if(!n)throw new Error("Iterable cannot be null");return new U(t=>{dt(t,e,()=>{let r=n[Symbol.asyncIterator]();dt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Jw(n,e){return au(su(n),e)}function Zw(n,e){if(n!=null){if(eu(n))return qw(n,e);if(Zl(n))return Yw(n,e);if(Xl(n))return Kw(n,e);if(tu(n))return au(n,e);if(iu(n))return Qw(n,e);if(ou(n))return Jw(n,e)}throw nu(n)}function ve(n,e){return e?Zw(n,e):be(n)}function k(...n){let e=In(n);return ve(n,e)}function Ss(n,e){let t=F(n)?n:()=>n,r=i=>i.error(t());return new U(e?i=>e.schedule(r,0,i):r)}function Mp(n){return!!n&&(n instanceof U||F(n.lift)&&F(n.subscribe))}var Hn=gs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Xw(n){return n instanceof Date&&!isNaN(n)}function O(n,e){return q((t,r)=>{let i=0;t.subscribe(B(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:mO}=Array;function gO(n,e){return mO(e)?n(...e):n(e)}function cu(n){return O(e=>gO(n,e))}var{isArray:_O}=Array,{getPrototypeOf:vO,prototype:yO,keys:IO}=Object;function lu(n){if(n.length===1){let e=n[0];if(_O(e))return{args:e,keys:null};if(EO(e)){let t=IO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function EO(n){return n&&typeof n=="object"&&vO(n)===yO}function uu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function du(...n){let e=In(n),t=Jl(n),{args:r,keys:i}=lu(n);if(r.length===0)return ve([],e);let s=new U(wO(r,e,i?o=>uu(i,o):et));return t?s.pipe(cu(t)):s}function wO(n,e,t=et){return r=>{eC(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)eC(e,()=>{let l=ve(n[c],e),u=!1;l.subscribe(B(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function eC(n,e,t){n?dt(t,n,e):e()}function tC(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=y=>l<r?m(y):c.push(y),m=y=>{s&&e.next(y),l++;let D=!1;be(t(y,u++)).subscribe(B(e,M=>{i?.(M),s?f(M):e.next(M)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;c.length&&l<r;){let M=c.shift();o?dt(e,o,()=>m(M)):m(M)}h()}catch(M){e.error(M)}}))};return n.subscribe(B(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Pe(n,e,t=1/0){return F(e)?Pe((r,i)=>O((s,o)=>e(r,s,i,o))(be(n(r,i))),t):(typeof e=="number"&&(t=e),q((r,i)=>tC(r,i,n,t)))}function _a(n=1/0){return Pe(et,n)}function nC(){return _a(1)}function yr(...n){return nC()(ve(n,In(n)))}function hu(n){return new U(e=>{be(n()).subscribe(e)})}function kp(...n){let e=Jl(n),{args:t,keys:r}=lu(n),i=new U(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;be(t[u]).subscribe(B(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?uu(r,a):a),s.complete())}))}});return e?i.pipe(cu(e)):i}function rC(n=0,e,t=Ap){let r=-1;return e!=null&&(Ql(e)?t=e:r=e),new U(i=>{let s=Xw(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Pp(...n){let e=In(n),t=Bw(n,1/0),r=n;return r.length?r.length===1?be(r[0]):_a(t)(ve(r,e)):tt}function Pt(n,e){return q((t,r)=>{let i=0;t.subscribe(B(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Ir(n){return q((e,t)=>{let r=null,i=!1,s;r=e.subscribe(B(t,void 0,void 0,o=>{s=be(n(o,Ir(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function iC(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(B(o,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function mi(n,e){return F(e)?Pe(n,e,1):Pe(n,1)}function Er(n){return q((e,t)=>{let r=!1;e.subscribe(B(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ht(n){return n<=0?()=>tt:q((e,t)=>{let r=0;e.subscribe(B(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function sC(){return q((n,e)=>{n.subscribe(B(e,ui))})}function va(n){return O(()=>n)}function Op(n,e){return e?t=>yr(e.pipe(ht(1),sC()),t.pipe(Op(n))):Pe((t,r)=>be(n(t,r)).pipe(ht(1),va(t)))}function xp(n,e=Ds){let t=rC(n,e);return Op(()=>t)}function Lp(n,e=et){return n=n??CO,q((t,r)=>{let i,s=!0;t.subscribe(B(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function CO(n,e){return n===e}function fu(n=bO){return q((e,t)=>{let r=!1;e.subscribe(B(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function bO(){return new Hn}function As(n){return q((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Jt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Pt((i,s)=>n(i,s,r)):et,ht(1),t?Er(e):fu(()=>new Hn))}function Ns(n){return n<=0?()=>tt:q((e,t)=>{let r=[];e.subscribe(B(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Fp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Pt((i,s)=>n(i,s,r)):et,Ns(1),t?Er(e):fu(()=>new Hn))}function ya(n,e){return q(iC(n,e,arguments.length>=2,!0))}function Vp(...n){let e=In(n);return q((t,r)=>{(e?yr(n,t,e):yr(n,t)).subscribe(r)})}function nt(n,e){return q((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(B(r,c=>{i?.unsubscribe();let l=0,u=s++;be(n(c,u)).subscribe(i=B(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Up(n){return q((e,t)=>{be(n).subscribe(B(t,()=>t.complete(),ui)),!t.closed&&e.subscribe(t)})}function Oe(n,e,t){let r=F(n)||e||t?{next:n,error:e,complete:t}:n;return r?q((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(B(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):et}var qC="https://g.co/ng/security#xss",A=class extends Error{constructor(e,t){super(ed(e,t)),this.code=e}};function ed(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ma(n){return{toString:n}.toString()}var pu="__parameters__";function TO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function KC(n,e,t){return Ma(()=>{let r=TO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(pu)?c[pu]:Object.defineProperty(c,pu,{value:[]})[pu];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var tm=globalThis;function ye(n){for(let e in n)if(n[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function DO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function it(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(it).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function oC(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var SO=ye({__forward_ref__:ye});function Kn(n){return n.__forward_ref__=Kn,n.toString=function(){return it(this())},n}function rt(n){return YC(n)?n():n}function YC(n){return typeof n=="function"&&n.hasOwnProperty(SO)&&n.__forward_ref__===Kn}function R(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Yn(n){return{providers:n.providers||[],imports:n.imports||[]}}function td(n){return aC(n,JC)||aC(n,ZC)}function QC(n){return td(n)!==null}function aC(n,e){return n.hasOwnProperty(e)?n[e]:null}function AO(n){let e=n&&(n[JC]||n[ZC]);return e||null}function cC(n){return n&&(n.hasOwnProperty(lC)||n.hasOwnProperty(NO))?n[lC]:null}var JC=ye({\u0275prov:ye}),lC=ye({\u0275inj:ye}),ZC=ye({ngInjectableDef:ye}),NO=ye({ngInjectorDef:ye}),S=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=R({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function XC(n){return n&&!!n.\u0275providers}var RO=ye({\u0275cmp:ye}),MO=ye({\u0275dir:ye}),kO=ye({\u0275pipe:ye}),PO=ye({\u0275mod:ye}),Su=ye({\u0275fac:ye}),wa=ye({__NG_ELEMENT_ID__:ye}),uC=ye({__NG_ENV_ID__:ye});function xs(n){return typeof n=="string"?n:n==null?"":String(n)}function OO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():xs(n)}function xO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new A(-200,n)}function Wm(n,e){throw new A(-201,!1)}var z=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(z||{}),nm;function eb(){return nm}function Ot(n){let e=nm;return nm=n,e}function tb(n,e,t){let r=td(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&z.Optional)return null;if(e!==void 0)return e;Wm(n,"Injector")}var LO={},Ca=LO,rm="__NG_DI_FLAG__",Au="ngTempTokenPath",FO="ngTokenPath",VO=/\n/gm,UO="\u0275",dC="__source",Ps;function jO(){return Ps}function wr(n){let e=Ps;return Ps=n,e}function BO(n,e=z.Default){if(Ps===void 0)throw new A(-203,!1);return Ps===null?tb(n,void 0,e):Ps.get(n,e&z.Optional?null:void 0,e)}function L(n,e=z.Default){return(eb()||BO)(rt(n),e)}function I(n,e=z.Default){return L(n,nd(e))}function nd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function im(n){let e=[];for(let t=0;t<n.length;t++){let r=rt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new A(900,!1);let i,s=z.Default;for(let o=0;o<r.length;o++){let a=r[o],c=$O(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(L(i,s))}else e.push(L(r))}return e}function nb(n,e){return n[rm]=e,n.prototype[rm]=e,n}function $O(n){return n[rm]}function HO(n,e,t,r){let i=n[Au];throw e[dC]&&i.unshift(e[dC]),n.message=WO(`
`+n.message,i,t,r),n[FO]=i,n[Au]=null,n}function WO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==UO?n.slice(2):n;let i=it(e);if(Array.isArray(e))i=e.map(it).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):it(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(VO,`
  `)}`}var ot=nb(KC("Optional"),8);var rb=nb(KC("SkipSelf"),4);function Ls(n,e){let t=n.hasOwnProperty(Su);return t?n[Su]:null}function zm(n,e){n.forEach(t=>Array.isArray(t)?zm(t,e):e(t))}function ib(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Nu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function zO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function GO(n,e,t){let r=ka(n,e);return r>=0?n[r|1]=t:(r=~r,zO(n,r,e,t)),r}function jp(n,e){let t=ka(n,e);if(t>=0)return n[t|1]}function ka(n,e){return qO(n,e,1)}function qO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Fs={},yt=[],_i=new S(""),sb=new S("",-1),ob=new S(""),Ru=class{get(e,t=Ca){if(t===Ca){let r=new Error(`NullInjectorError: No provider for ${it(e)}!`);throw r.name="NullInjectorError",r}return t}},ab=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ab||{}),Cn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Cn||{}),br=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(br||{});function KO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function sm(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];YO(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function cb(n){return n===3||n===4||n===6}function YO(n){return n.charCodeAt(0)===64}function ba(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?hC(n,t,i,null,e[++r]):hC(n,t,i,null,null))}}return n}function hC(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var lb="ng-template";function QO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&KO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Gm(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Gm(n){return n.type===4&&n.value!==lb}function JO(n,e,t){let r=n.type===4&&!t?lb:n.value;return e===r}function ZO(n,e,t){let r=4,i=n.attrs,s=i!==null?tx(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Zt(r)&&!Zt(c))return!1;if(o&&Zt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!JO(n,c,t)||c===""&&e.length===1){if(Zt(r))return!1;o=!0}}else if(r&8){if(i===null||!QO(n,i,c,t)){if(Zt(r))return!1;o=!0}}else{let l=e[++a],u=XO(c,i,Gm(n),t);if(u===-1){if(Zt(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Zt(r))return!1;o=!0}}}}return Zt(r)||o}function Zt(n){return(n&1)===0}function XO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return nx(e,n)}function ex(n,e,t=!1){for(let r=0;r<e.length;r++)if(ZO(n,e[r],t))return!0;return!1}function tx(n){for(let e=0;e<n.length;e++){let t=n[e];if(cb(t))return e}return n.length}function nx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function fC(n,e){return n?":not("+e.trim()+")":e}function rx(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Zt(o)&&(e+=fC(s,i),i=""),r=o,s=s||!Zt(r);t++}return i!==""&&(e+=fC(s,i)),e}function ix(n){return n.map(rx).join(",")}function sx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Zt(i))break;i=s}r++}return{attrs:e,classes:t}}function oe(n){return Ma(()=>{let e=pb(n),t=W(w({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ab.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Cn.Emulated,styles:n.styles||yt,_:null,schemas:n.schemas||null,tView:null,id:""});mb(t);let r=n.dependencies;return t.directiveDefs=mC(r,!1),t.pipeDefs=mC(r,!0),t.id=cx(t),t})}function ox(n){return vi(n)||ub(n)}function ax(n){return n!==null}function Qn(n){return Ma(()=>({type:n.type,bootstrap:n.bootstrap||yt,declarations:n.declarations||yt,imports:n.imports||yt,exports:n.exports||yt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function pC(n,e){if(n==null)return Fs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=br.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==br.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Ne(n){return Ma(()=>{let e=pb(n);return mb(e),e})}function vi(n){return n[RO]||null}function ub(n){return n[MO]||null}function db(n){return n[kO]||null}function hb(n){let e=vi(n)||ub(n)||db(n);return e!==null?e.standalone:!1}function fb(n,e){let t=n[PO]||null;if(!t&&e===!0)throw new Error(`Type ${it(n)} does not have '\u0275mod' property.`);return t}function pb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Fs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||yt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pC(n.inputs,e),outputs:pC(n.outputs),debugInfo:null}}function mb(n){n.features?.forEach(e=>e(n))}function mC(n,e){if(!n)return null;let t=e?db:ox;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(ax)}function cx(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function wt(n){return{\u0275providers:n}}function lx(...n){return{\u0275providers:gb(!0,n),\u0275fromNgModule:!0}}function gb(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return zm(e,o=>{let a=o;om(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&_b(i,s),t}function _b(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];qm(i,s=>{e(s,r)})}}function om(n,e,t,r){if(n=rt(n),!n)return!1;let i=null,s=cC(n),o=!s&&vi(n);if(!s&&!o){let c=n.ngModule;if(s=cC(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)om(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{zm(s.imports,u=>{om(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&_b(l,e)}if(!a){let l=Ls(i)||(()=>new i);e({provide:i,useFactory:l,deps:yt},i),e({provide:ob,useValue:i,multi:!0},i),e({provide:_i,useValue:()=>L(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;qm(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function qm(n,e){for(let t of n)XC(t)&&(t=t.\u0275providers),Array.isArray(t)?qm(t,e):e(t)}var ux=ye({provide:String,useValue:ye});function vb(n){return n!==null&&typeof n=="object"&&ux in n}function dx(n){return!!(n&&n.useExisting)}function hx(n){return!!(n&&n.useFactory)}function Vs(n){return typeof n=="function"}function fx(n){return!!n.useClass}var rd=new S(""),wu={},px={},Bp;function Km(){return Bp===void 0&&(Bp=new Ru),Bp}var Lt=class{},Ta=class extends Lt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cm(e,o=>this.processProvider(o)),this.records.set(sb,Rs(void 0,this)),i.has("environment")&&this.records.set(Lt,Rs(void 0,this));let s=this.records.get(rd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ob,yt,z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=wr(this),r=Ot(void 0),i;try{return e()}finally{wr(t),Ot(r)}}get(e,t=Ca,r=z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(uC))return e[uC](this);r=nd(r);let i,s=wr(this),o=Ot(void 0);try{if(!(r&z.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=yx(e)&&td(e);l&&this.injectableDefInScope(l)?c=Rs(am(e),wu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&z.Self?Km():this.parent;return t=r&z.Optional&&t===Ca?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Au]=a[Au]||[]).unshift(it(e)),s)throw a;return HO(a,e,"R3InjectorError",this.source)}else throw a}finally{Ot(o),wr(s)}}resolveInjectorInitializers(){let e=te(null),t=wr(this),r=Ot(void 0),i;try{let s=this.get(_i,yt,z.Self);for(let o of s)o()}finally{wr(t),Ot(r),te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(it(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new A(205,!1)}processProvider(e){e=rt(e);let t=Vs(e)?e:rt(e&&e.provide),r=gx(e);if(!Vs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Rs(void 0,wu,!0),i.factory=()=>im(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=te(null);try{return t.value===wu&&(t.value=px,t.value=t.factory()),typeof t.value=="object"&&t.value&&vx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=rt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function am(n){let e=td(n),t=e!==null?e.factory:Ls(n);if(t!==null)return t;if(n instanceof S)throw new A(204,!1);if(n instanceof Function)return mx(n);throw new A(204,!1)}function mx(n){if(n.length>0)throw new A(204,!1);let t=AO(n);return t!==null?()=>t.factory(n):()=>new n}function gx(n){if(vb(n))return Rs(void 0,n.useValue);{let e=yb(n);return Rs(e,wu)}}function yb(n,e,t){let r;if(Vs(n)){let i=rt(n);return Ls(i)||am(i)}else if(vb(n))r=()=>rt(n.useValue);else if(hx(n))r=()=>n.useFactory(...im(n.deps||[]));else if(dx(n))r=()=>L(rt(n.useExisting));else{let i=rt(n&&(n.useClass||n.provide));if(_x(n))r=()=>new i(...im(n.deps));else return Ls(i)||am(i)}return r}function Rs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _x(n){return!!n.deps}function vx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function yx(n){return typeof n=="function"||typeof n=="object"&&n instanceof S}function cm(n,e){for(let t of n)Array.isArray(t)?cm(t,e):t&&XC(t)?cm(t.\u0275providers,e):e(t)}function Dn(n,e){n instanceof Ta&&n.assertNotDestroyed();let t,r=wr(n),i=Ot(void 0);try{return e()}finally{wr(r),Ot(i)}}function Ix(){return eb()!==void 0||jO()!=null}function Ex(n){return typeof n=="function"}var Et=0,K=1,x=2,qe=3,Xt=4,rn=5,bn=6,Mu=7,tn=8,Us=9,Tn=10,Ae=11,Da=12,gC=13,Ks=14,Ft=15,js=16,Ms=17,Bs=18,id=19,Ib=20,Cr=21,$p=22,xt=23,st=25,Eb=1,Sa=6,Wn=7,ku=8,Pu=9,It=10,Ou=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ou||{});function en(n){return Array.isArray(n)&&typeof n[Eb]=="object"}function Sn(n){return Array.isArray(n)&&n[Eb]===!0}function Ym(n){return(n.flags&4)!==0}function Pa(n){return n.componentOffset>-1}function sd(n){return(n.flags&1)===1}function Tr(n){return!!n.template}function xu(n){return(n[x]&512)!==0}var lm=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function wb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function sn(){return Cb}function Cb(n){return n.type.prototype.ngOnChanges&&(n.setInput=Cx),wx}sn.ngInherit=!0;function wx(){let n=Tb(this),e=n?.current;if(e){let t=n.previous;if(t===Fs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Cx(n,e,t,r,i){let s=this.declaredInputs[r],o=Tb(n)||bx(n,{previous:Fs,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new lm(l&&l.currentValue,t,c===Fs),wb(n,e,i,t)}var bb="__ngSimpleChanges__";function Tb(n){return n[bb]||null}function bx(n,e){return n[bb]=e}var _C=null;var En=function(n,e,t){_C?.(n,e,t)},Tx="svg",Dx="math";function nn(n){for(;Array.isArray(n);)n=n[Et];return n}function Db(n,e){return nn(e[n])}function Ct(n,e){return nn(e[n.index])}function Sb(n,e){return n.data[e]}function Nr(n,e){let t=e[n];return en(t)?t:t[Et]}function Qm(n){return(n[x]&128)===128}function Sx(n){return Sn(n[qe])}function $s(n,e){return e==null?null:n[e]}function Ab(n){n[Ms]=0}function Nb(n){n[x]&1024||(n[x]|=1024,Qm(n)&&ad(n))}function Ax(n,e){for(;n>0;)e=e[Ks],n--;return e}function od(n){return!!(n[x]&9216||n[xt]?.dirty)}function um(n){n[Tn].changeDetectionScheduler?.notify(8),n[x]&64&&(n[x]|=1024),od(n)&&ad(n)}function ad(n){n[Tn].changeDetectionScheduler?.notify(0);let e=yi(n);for(;e!==null&&!(e[x]&8192||(e[x]|=8192,!Qm(e)));)e=yi(e)}function Rb(n,e){if((n[x]&256)===256)throw new A(911,!1);n[Cr]===null&&(n[Cr]=[]),n[Cr].push(e)}function Nx(n,e){if(n[Cr]===null)return;let t=n[Cr].indexOf(e);t!==-1&&n[Cr].splice(t,1)}function yi(n){let e=n[qe];return Sn(e)?e[qe]:e}var G={lFrame:jb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Mb=!1;function Rx(){return G.lFrame.elementDepthCount}function Mx(){G.lFrame.elementDepthCount++}function kx(){G.lFrame.elementDepthCount--}function kb(){return G.bindingsEnabled}function Oa(){return G.skipHydrationRootTNode!==null}function Px(n){return G.skipHydrationRootTNode===n}function Ox(n){G.skipHydrationRootTNode=n}function xx(){G.skipHydrationRootTNode=null}function ge(){return G.lFrame.lView}function bt(){return G.lFrame.tView}function Vt(n){return G.lFrame.contextLView=n,n[tn]}function Ut(n){return G.lFrame.contextLView=null,n}function at(){let n=Pb();for(;n!==null&&n.type===64;)n=n.parent;return n}function Pb(){return G.lFrame.currentTNode}function Lx(){let n=G.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function bi(n,e){let t=G.lFrame;t.currentTNode=n,t.isParent=e}function Jm(){return G.lFrame.isParent}function Ob(){G.lFrame.isParent=!1}function xb(){return Mb}function vC(n){Mb=n}function Zm(){let n=G.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Fx(){return G.lFrame.bindingIndex}function Vx(n){return G.lFrame.bindingIndex=n}function Xm(){return G.lFrame.bindingIndex++}function Lb(n){let e=G.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ux(){return G.lFrame.inI18n}function jx(n,e){let t=G.lFrame;t.bindingIndex=t.bindingRootIndex=n,dm(e)}function Bx(){return G.lFrame.currentDirectiveIndex}function dm(n){G.lFrame.currentDirectiveIndex=n}function $x(n){let e=G.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Fb(n){G.lFrame.currentQueryIndex=n}function Hx(n){let e=n[K];return e.type===2?e.declTNode:e.type===1?n[rn]:null}function Vb(n,e,t){if(t&z.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&z.Host);)if(i=Hx(s),i===null||(s=s[Ks],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=G.lFrame=Ub();return r.currentTNode=e,r.lView=n,!0}function eg(n){let e=Ub(),t=n[K];G.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ub(){let n=G.lFrame,e=n===null?null:n.child;return e===null?jb(n):e}function jb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Bb(){let n=G.lFrame;return G.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var $b=Bb;function tg(){let n=Bb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Wx(n){return(G.lFrame.contextLView=Ax(n,G.lFrame.contextLView))[tn]}function Ti(){return G.lFrame.selectedIndex}function Ii(n){G.lFrame.selectedIndex=n}function Hb(){let n=G.lFrame;return Sb(n.tView,n.selectedIndex)}function Wb(){return G.lFrame.currentNamespace}var zb=!0;function cd(){return zb}function Rr(n){zb=n}function zx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Cb(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function ld(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Cu(n,e,t){Gb(n,e,3,t)}function bu(n,e,t,r){(n[x]&3)===t&&Gb(n,e,t,r)}function Hp(n,e){let t=n[x];(t&3)===e&&(t&=16383,t+=1,n[x]=t)}function Gb(n,e,t,r){let i=r!==void 0?n[Ms]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ms]+=65536),(a<s||s==-1)&&(Gx(n,t,e,c),n[Ms]=(n[Ms]&4294901760)+c+2),c++}function yC(n,e){En(4,n,e);let t=te(null);try{e.call(n)}finally{te(t),En(5,n,e)}}function Gx(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[x]>>14<n[Ms]>>16&&(n[x]&3)===e&&(n[x]+=16384,yC(a,s)):yC(a,s)}var Os=-1,Ei=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function qx(n){return n instanceof Ei}function Kx(n){return(n.flags&8)!==0}function Yx(n){return(n.flags&16)!==0}var Wp={},hm=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=nd(r);let i=this.injector.get(e,Wp,r);return i!==Wp||t===Wp?i:this.parentInjector.get(e,t,r)}};function qb(n){return n!==Os}function Lu(n){return n&32767}function Qx(n){return n>>16}function Fu(n,e){let t=Qx(n),r=e;for(;t>0;)r=r[Ks],t--;return r}var fm=!0;function IC(n){let e=fm;return fm=n,e}var Jx=256,Kb=Jx-1,Yb=5,Zx=0,wn={};function Xx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(wa)&&(r=t[wa]),r==null&&(r=t[wa]=Zx++);let i=r&Kb,s=1<<i;e.data[n+(i>>Yb)]|=s}function Vu(n,e){let t=Qb(n,e);if(t!==-1)return t;let r=e[K];r.firstCreatePass&&(n.injectorIndex=e.length,zp(r.data,n),zp(e,null),zp(r.blueprint,null));let i=ng(n,e),s=n.injectorIndex;if(qb(i)){let o=Lu(i),a=Fu(i,e),c=a[K].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function zp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Qb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ng(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=tT(i),r===null)return Os;if(t++,i=i[Ks],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Os}function pm(n,e,t){Xx(n,e,t)}function eL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(cb(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function Jb(n,e,t){if(t&z.Optional||n!==void 0)return n;Wm(e,"NodeInjector")}function Zb(n,e,t,r){if(t&z.Optional&&r===void 0&&(r=null),!(t&(z.Self|z.Host))){let i=n[Us],s=Ot(void 0);try{return i?i.get(e,r,t&z.Optional):tb(e,r,t&z.Optional)}finally{Ot(s)}}return Jb(r,e,t)}function Xb(n,e,t,r=z.Default,i){if(n!==null){if(e[x]&2048&&!(r&z.Self)){let o=sL(n,e,t,r,wn);if(o!==wn)return o}let s=eT(n,e,t,r,wn);if(s!==wn)return s}return Zb(e,t,r,i)}function eT(n,e,t,r,i){let s=rL(t);if(typeof s=="function"){if(!Vb(e,n,r))return r&z.Host?Jb(i,t,r):Zb(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&z.Optional))Wm(t);else return o}finally{$b()}}else if(typeof s=="number"){let o=null,a=Qb(n,e),c=Os,l=r&z.Host?e[Ft][rn]:null;for((a===-1||r&z.SkipSelf)&&(c=a===-1?ng(n,e):e[a+8],c===Os||!wC(r,!1)?a=-1:(o=e[K],a=Lu(c),e=Fu(c,e)));a!==-1;){let u=e[K];if(EC(s,a,u.data)){let d=tL(a,e,t,o,r,l);if(d!==wn)return d}c=e[a+8],c!==Os&&wC(r,e[K].data[a+8]===l)&&EC(s,a,e)?(o=u,a=Lu(c),e=Fu(c,e)):a=-1}}return i}function tL(n,e,t,r,i,s){let o=e[K],a=o.data[n+8],c=r==null?Pa(a)&&fm:r!=o&&(a.type&3)!==0,l=i&z.Host&&s===a,u=nL(a,o,t,c,l);return u!==null?Hs(e,o,u,a):wn}function nL(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let m=o[f];if(f<c&&t===m||f>=c&&m.type===t)return f}if(i){let f=o[c];if(f&&Tr(f)&&f.type===t)return c}return null}function Hs(n,e,t,r){let i=n[t],s=e.data;if(qx(i)){let o=i;o.resolving&&xO(OO(s[t]));let a=IC(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Ot(o.injectImpl):null,u=Vb(n,r,z.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&zx(t,s[t],e)}finally{l!==null&&Ot(l),IC(a),o.resolving=!1,$b()}}return i}function rL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(wa)?n[wa]:void 0;return typeof e=="number"?e>=0?e&Kb:iL:e}function EC(n,e,t){let r=1<<n;return!!(t[e+(n>>Yb)]&r)}function wC(n,e){return!(n&z.Self)&&!(n&z.Host&&e)}var gi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Xb(this._tNode,this._lView,e,nd(r),t)}};function iL(){return new gi(at(),ge())}function Mr(n){return Ma(()=>{let e=n.prototype.constructor,t=e[Su]||mm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Su]||mm(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function mm(n){return YC(n)?()=>{let e=mm(rt(n));return e&&e()}:Ls(n)}function sL(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[x]&2048&&!(o[x]&512);){let a=eT(s,o,t,r|z.Self,wn);if(a!==wn)return a;let c=s.parent;if(!c){let l=o[Ib];if(l){let u=l.get(t,wn,r);if(u!==wn)return u}c=tT(o),o=o[Ks]}s=c}return i}function tT(n){let e=n[K],t=e.type;return t===2?e.declTNode:t===1?n[rn]:null}function rg(n){return eL(at(),n)}function CC(n,e=null,t=null,r){let i=nT(n,e,t,r);return i.resolveInjectorInitializers(),i}function nT(n,e=null,t=null,r,i=new Set){let s=[t||yt,lx(n)];return r=r||(typeof n=="object"?void 0:it(n)),new Ta(s,e||Km(),r||null,i)}var Ke=class n{static{this.THROW_IF_NOT_FOUND=Ca}static{this.NULL=new Ru}static create(e,t){if(Array.isArray(e))return CC({name:""},t,e,"");{let r=e.name??"";return CC({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=R({token:n,providedIn:"any",factory:()=>L(sb)})}static{this.__NG_ELEMENT_ID__=-1}};var oL=new S("");oL.__NG_ELEMENT_ID__=n=>{let e=at();if(e===null)throw new A(204,!1);if(e.type&2)return e.value;if(n&z.Optional)return null;throw new A(204,!1)};var aL="ngOriginalError";function Gp(n){return n[aL]}var rT=!0,iT=(()=>{class n{static{this.__NG_ELEMENT_ID__=cL}static{this.__NG_ENV_ID__=t=>t}}return n})(),gm=class extends iT{constructor(e){super(),this._lView=e}onDestroy(e){return Rb(this._lView,e),()=>Nx(this._lView,e)}};function cL(){return new gm(ge())}var Di=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $e(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}}return n})();var _m=class extends je{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Ix()&&(this.destroyRef=I(iT,{optional:!0})??void 0,this.pendingTasks=I(Di,{optional:!0})??void 0)}emit(e){let t=te(null);try{super.next(e)}finally{te(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof De&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Se=_m;function Uu(...n){}function sT(n){let e,t;function r(){n=Uu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function bC(n){return queueMicrotask(()=>n()),()=>{n=Uu}}var ig="isAngularZone",ju=ig+"_ID",lL=0,le=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Se(!1),this.onMicrotaskEmpty=new Se(!1),this.onStable=new Se(!1),this.onError=new Se(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=rT}=e;if(typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,hL(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ig)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new A(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,uL,Uu,Uu);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},uL={};function sg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function dL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){sT(()=>{n.callbackScheduled=!1,vm(n),n.isCheckStableRunning=!0,sg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),vm(n)}function hL(n){let e=()=>{dL(n)},t=lL++;n._inner=n._inner.fork({name:"angular",properties:{[ig]:!0,[ju]:t,[ju+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(fL(c))return r.invokeTask(s,o,a,c);try{return TC(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),DC(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return TC(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!pL(c)&&e(),DC(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,vm(n),sg(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function vm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function TC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function DC(n){n._nesting--,sg(n)}var ym=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Se,this.onMicrotaskEmpty=new Se,this.onStable=new Se,this.onError=new Se}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function fL(n){return oT(n,"__ignore_ng_zone__")}function pL(n){return oT(n,"__scheduler_tick__")}function oT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var zn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Gp(e);for(;t&&Gp(t);)t=Gp(t);return t||null}},mL=new S("",{providedIn:"root",factory:()=>{let n=I(le),e=I(zn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function gL(){return ud(at(),ge())}function ud(n,e){return new on(Ct(n,e))}var on=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=gL}}return n})();var _L="ngSkipHydration",vL="ngskiphydration";function aT(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===vL)return!0}return!1}function cT(n){return n.hasAttribute(_L)}function Bu(n){return(n.flags&128)===128}function yL(n){if(Bu(n))return!0;let e=n.parent;for(;e;){if(Bu(n)||aT(e))return!0;e=e.parent}return!1}var lT=new Map,IL=0;function EL(){return IL++}function wL(n){lT.set(n[id],n)}function Im(n){lT.delete(n[id])}var SC="__ngContext__";function Dr(n,e){en(e)?(n[SC]=e[id],wL(e)):n[SC]=e}function uT(n){return hT(n[Da])}function dT(n){return hT(n[Xt])}function hT(n){for(;n!==null&&!Sn(n);)n=n[Xt];return n}var Em;function fT(n){Em=n}function dd(){if(Em!==void 0)return Em;if(typeof document<"u")return document;throw new A(210,!1)}var hd=new S("",{providedIn:"root",factory:()=>CL}),CL="ng",og=new S(""),jt=new S("",{providedIn:"platform",factory:()=>"unknown"});var ag=new S("",{providedIn:"root",factory:()=>dd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function bL(){let n=new Ys;return I(jt)==="browser"&&(n.store=TL(dd(),I(hd))),n}var Ys=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=R({token:n,providedIn:"root",factory:bL})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function TL(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var pT="h",mT="b",wm=function(n){return n.FirstChild="f",n.NextSibling="n",n}(wm||{}),DL="e",SL="t",cg="c",gT="x",$u="r",AL="i",NL="n",_T="d";var RL="__nghData__",vT=RL,qp="ngh",ML="nghm",yT=()=>null;function kL(n,e,t=!1){let r=n.getAttribute(qp);if(r==null)return null;let[i,s]=r.split("|");if(r=t?s:i,!r)return null;let o=s?`|${s}`:"",a=t?i:o,c={};if(r!==""){let u=e.get(Ys,null,{optional:!0});u!==null&&(c=u.get(vT,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,fd(l,0,n.nextSibling)),a?n.setAttribute(qp,a):n.removeAttribute(qp),l}function PL(){yT=kL}function lg(n,e,t=!1){return yT(n,e,t)}function OL(n){let e=n._lView;return e[K].type===2?null:(xu(e)&&(e=e[st]),e)}function xL(n){return n.textContent?.replace(/\s/gm,"")}function LL(n){let e=dd(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=xL(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function fd(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Cm(n,e){return n.segmentHeads?.[e]??null}function FL(n,e){let t=n.data,r=t[DL]?.[e]??null;return r===null&&t[cg]?.[e]&&(r=ug(n,e)),r}function IT(n,e){return n.data[cg]?.[e]??null}function ug(n,e){let t=IT(n,e)??[],r=0;for(let i of t)r+=i[$u]*(i[gT]??1);return r}function VL(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[_T];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function xa(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[_T];n.disconnectedNodes=t?new Set(t):null}return!!VL(n)?.has(e)}var mu=new S(""),ET=!1,wT=new S("",{providedIn:"root",factory:()=>ET});var gu;function UL(){if(gu===void 0&&(gu=null,tm.trustedTypes))try{gu=tm.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gu}function AC(n){return UL()?.createScriptURL(n)||n}var Hu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qC})`}};function La(n){return n instanceof Hu?n.changingThisBreaksApplicationSecurity:n}function dg(n,e){let t=jL(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${qC})`)}return t===e}function jL(n){return n instanceof Hu&&n.getTypeName()||null}var BL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function CT(n){return n=String(n),n.match(BL)?n:"unsafe:"+n}var pd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(pd||{});function $L(n){let e=TT();return e?e.sanitize(pd.URL,n)||"":dg(n,"URL")?La(n):CT(xs(n))}function HL(n){let e=TT();if(e)return AC(e.sanitize(pd.RESOURCE_URL,n)||"");if(dg(n,"ResourceURL"))return AC(La(n));throw new A(904,!1)}function WL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?HL:$L}function bT(n,e,t){return WL(e,t)(n)}function TT(){let n=ge();return n&&n[Tn].sanitizer}var zL=/^>|^->|<!--|-->|--!>|<!-$/g,GL=/(<|>)/g,qL="\u200B$1\u200B";function KL(n){return n.replace(zL,e=>e.replace(GL,qL))}function YL(n){return n.ownerDocument.body}function DT(n){return n instanceof Function?n():n}function _u(n){return(n??I(Ke)).get(jt)==="browser"}var Gn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Gn||{}),QL;function hg(n,e){return QL(n,e)}function ks(n,e,t,r,i){if(r!=null){let s,o=!1;Sn(r)?s=r:en(r)&&(o=!0,r=r[Et]);let a=nn(r);n===0&&t!==null?i==null?kT(e,t,a):Wu(e,t,a,i||null,!0):n===1&&t!==null?Wu(e,t,a,i||null,!0):n===2?mg(e,a,o):n===3&&e.destroyNode(a),s!=null&&dF(e,n,s,t,i)}}function ST(n,e){return n.createText(e)}function JL(n,e,t){n.setValue(e,t)}function AT(n,e){return n.createComment(KL(e))}function fg(n,e,t){return n.createElement(e,t)}function ZL(n,e){NT(n,e),e[Et]=null,e[rn]=null}function XL(n,e,t,r,i,s){r[Et]=i,r[rn]=e,gd(n,r,t,1,i,s)}function NT(n,e){e[Tn].changeDetectionScheduler?.notify(9),gd(n,e,e[Ae],2,null,null)}function eF(n){let e=n[Da];if(!e)return Kp(n[K],n);for(;e;){let t=null;if(en(e))t=e[Da];else{let r=e[It];r&&(t=r)}if(!t){for(;e&&!e[Xt]&&e!==n;)en(e)&&Kp(e[K],e),e=e[qe];e===null&&(e=n),en(e)&&Kp(e[K],e),t=e&&e[Xt]}e=t}}function tF(n,e,t,r){let i=It+r,s=t.length;r>0&&(t[i-1][Xt]=e),r<s-It?(e[Xt]=t[i],ib(t,It+r,e)):(t.push(e),e[Xt]=null),e[qe]=t;let o=e[js];o!==null&&t!==o&&RT(o,e);let a=e[Bs];a!==null&&a.insertView(n),um(e),e[x]|=128}function RT(n,e){let t=n[Pu],r=e[qe];if(en(r))n[x]|=Ou.HasTransplantedViews;else{let i=r[qe][Ft];e[Ft]!==i&&(n[x]|=Ou.HasTransplantedViews)}t===null?n[Pu]=[e]:t.push(e)}function pg(n,e){let t=n[Pu],r=t.indexOf(e);t.splice(r,1)}function bm(n,e){if(n.length<=It)return;let t=It+e,r=n[t];if(r){let i=r[js];i!==null&&i!==n&&pg(i,r),e>0&&(n[t-1][Xt]=r[Xt]);let s=Nu(n,It+e);ZL(r[K],r);let o=s[Bs];o!==null&&o.detachView(s[K]),r[qe]=null,r[Xt]=null,r[x]&=-129}return r}function MT(n,e){if(!(e[x]&256)){let t=e[Ae];t.destroyNode&&gd(n,e,t,3,null,null),eF(e)}}function Kp(n,e){if(e[x]&256)return;let t=te(null);try{e[x]&=-129,e[x]|=256,e[xt]&&_p(e[xt]),rF(n,e),nF(n,e),e[K].type===1&&e[Ae].destroy();let r=e[js];if(r!==null&&Sn(e[qe])){r!==e[qe]&&pg(r,e);let i=e[Bs];i!==null&&i.detachView(n)}Im(e)}finally{te(t)}}function nF(n,e){let t=n.cleanup,r=e[Mu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Mu]=null);let i=e[Cr];if(i!==null){e[Cr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function rF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ei)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];En(4,a,c);try{c.call(a)}finally{En(5,a,c)}}else{En(4,i,s);try{s.call(i)}finally{En(5,i,s)}}}}}function iF(n,e,t){return sF(n,e.parent,t)}function sF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Et];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Cn.None||s===Cn.Emulated)return null}return Ct(r,t)}}function Wu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function kT(n,e,t){n.appendChild(e,t)}function NC(n,e,t,r,i){r!==null?Wu(n,e,t,r,i):kT(n,e,t)}function PT(n,e){return n.parentNode(e)}function oF(n,e){return n.nextSibling(e)}function aF(n,e,t){return lF(n,e,t)}function cF(n,e,t){return n.type&40?Ct(n,t):null}var lF=cF,RC;function md(n,e,t,r){let i=iF(n,r,e),s=e[Ae],o=r.parent||e[rn],a=aF(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)NC(s,i,t[c],a,!1);else NC(s,i,t,a,!1);RC!==void 0&&RC(s,r,e,t,i)}function Ia(n,e){if(e!==null){let t=e.type;if(t&3)return Ct(e,n);if(t&4)return Tm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ia(n,r);{let i=n[e.index];return Sn(i)?Tm(-1,i):nn(i)}}else{if(t&128)return Ia(n,e.next);if(t&32)return hg(e,n)()||nn(n[e.index]);{let r=OT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=yi(n[Ft]);return Ia(i,r)}else return Ia(n,e.next)}}}return null}function OT(n,e){if(e!==null){let r=n[Ft][rn],i=e.projection;return r.projection[i]}return null}function Tm(n,e){let t=It+n+1;if(t<e.length){let r=e[t],i=r[K].firstChild;if(i!==null)return Ia(r,i)}return e[Wn]}function mg(n,e,t){n.removeChild(null,e,t)}function xT(n){n.textContent=""}function gg(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Dr(nn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)gg(n,e,t.child,r,i,s,!1),ks(e,n,i,a,s);else if(c&32){let l=hg(t,r),u;for(;u=l();)ks(e,n,i,u,s);ks(e,n,i,a,s)}else c&16?uF(n,e,r,t,i,s):ks(e,n,i,a,s);t=o?t.projectionNext:t.next}}function gd(n,e,t,r,i,s){gg(t,r,n.firstChild,e,i,s,!1)}function uF(n,e,t,r,i,s){let o=t[Ft],c=o[rn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ks(e,n,i,u,s)}else{let l=c,u=o[qe];Bu(r)&&(l.flags|=128),gg(n,e,l,u,i,s,!0)}}function dF(n,e,t,r,i){let s=t[Wn],o=nn(t);s!==o&&ks(e,n,r,s,i);for(let a=It;a<t.length;a++){let c=t[a];gd(c[K],c,n,e,r,s)}}function hF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Gn.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Gn.Important),n.setStyle(t,r,i,s))}}function fF(n,e,t){n.setAttribute(e,"style",t)}function LT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function FT(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&sm(n,e,r),i!==null&&LT(n,e,i),s!==null&&fF(n,e,s)}var Jn={};function C(n=1){VT(bt(),ge(),Ti()+n,!1)}function VT(n,e,t,r){if(!r)if((e[x]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Cu(e,s,t)}else{let s=n.preOrderHooks;s!==null&&bu(e,s,0,t)}Ii(t)}function N(n,e=z.Default){let t=ge();if(t===null)return L(n,e);let r=at();return Xb(r,t,rt(n),e)}function UT(n,e,t,r,i,s){let o=te(null);try{let a=null;i&br.SignalBased&&(a=e[r][gr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&br.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):wb(e,a,r,s)}finally{te(o)}}function pF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ii(~i);else{let s=i,o=t[++r],a=t[++r];jx(o,s);let c=e[s];a(2,c)}}}finally{Ii(-1)}}function _d(n,e,t,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Et]=i,d[x]=r|4|128|8|64,(l!==null||n&&n[x]&2048)&&(d[x]|=2048),Ab(d),d[qe]=d[Ks]=n,d[tn]=t,d[Tn]=o||n&&n[Tn],d[Ae]=a||n&&n[Ae],d[Us]=c||n&&n[Us]||null,d[rn]=s,d[id]=EL(),d[bn]=u,d[Ib]=l,d[Ft]=e.type==2?n[Ft]:d,d}function Fa(n,e,t,r,i){let s=n.data[e];if(s===null)s=mF(n,e,t,r,i),Ux()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=Lx();s.injectorIndex=o===null?-1:o.injectorIndex}return bi(s,!0),s}function mF(n,e,t,r,i){let s=Pb(),o=Jm(),a=o?s:s&&s.parent,c=n.data[e]=EF(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function jT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function BT(n,e,t,r,i){let s=Ti(),o=r&2;try{Ii(-1),o&&e.length>st&&VT(n,e,st,!1),En(o?2:0,i),t(r,i)}finally{Ii(s),En(o?3:1,i)}}function _g(n,e,t){if(Ym(e)){let r=te(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{te(r)}}}function vg(n,e,t){kb()&&(AF(n,e,t,Ct(t,e)),(t.flags&64)===64&&zT(n,e,t))}function yg(n,e,t=Ct){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function $T(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ig(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ig(n,e,t,r,i,s,o,a,c,l,u){let d=st+r,h=d+i,f=gF(d,h),m=typeof l=="function"?l():l;return f[K]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function gF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Jn);return t}function _F(n,e,t,r){let s=r.get(wT,ET)||t===Cn.ShadowDom,o=n.selectRootElement(e,s);return vF(o),o}function vF(n){HT(n)}var HT=()=>null;function yF(n){cT(n)?xT(n):LL(n)}function IF(){HT=yF}function EF(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Oa()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function MC(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=br.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?kC(r,t,l,a,c):kC(r,t,l,a)}return r}function kC(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function wF(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],h=t?t.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=MC(0,d.inputs,u,c,f),l=MC(1,d.outputs,u,l,m);let y=c!==null&&o!==null&&!Gm(e)?UF(c,u,o):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function CF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function bF(n,e,t,r,i,s,o,a){let c=Ct(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(wg(n,t,u,r,i),Pa(e)&&TF(t,e.index)):e.type&3?(r=CF(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function TF(n,e){let t=Nr(e,n);t[x]&16||(t[x]|=64)}function Eg(n,e,t,r){if(kb()){let i=r===null?null:{"":-1},s=RF(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&WT(n,e,t,o,i,a),i&&MF(t,r,i)}t.mergedAttrs=ba(t.mergedAttrs,t.attrs)}function WT(n,e,t,r,i,s){for(let l=0;l<r.length;l++)pm(Vu(t,e),n,r[l].type);PF(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=jT(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=ba(t.mergedAttrs,u.hostAttrs),OF(n,t,e,c,u),kF(c,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}wF(n,t,s)}function DF(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;SF(o)!=a&&o.push(a),o.push(t,r,s)}}function SF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function AF(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Pa(t)&&xF(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Vu(t,e),Dr(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Hs(e,n,a,t);if(Dr(l,e),o!==null&&VF(e,a-i,l,c,t,o),Tr(c)){let u=Nr(t.index,e);u[tn]=Hs(e,n,a,t)}}}function zT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=Bx();try{Ii(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];dm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&NF(c,l)}}finally{Ii(-1),dm(o)}}function NF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function RF(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(ex(e,o.selectors,!1))if(r||(r=[]),Tr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Dm(n,e,c)}else r.unshift(o),Dm(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Dm(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function MF(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new A(-301,!1);r.push(e[i],s)}}}function kF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Tr(e)&&(t[""]=n)}}function PF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function OF(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ls(i.type,!0)),o=new Ei(s,Tr(i),N);n.blueprint[r]=o,t[r]=o,DF(n,e,r,jT(n,t,i.hostVars,Jn),i)}function xF(n,e,t){let r=Ct(e,n),i=$T(t),s=n[Tn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=vd(n,_d(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function LF(n,e,t,r,i,s){let o=Ct(n,e);FF(e[Ae],o,s,n.value,t,r,i)}function FF(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?xs(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function VF(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];UT(r,t,c,l,u,d)}}function UF(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function GT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function qT(n,e){let t=n.contentQueries;if(t!==null){let r=te(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Fb(s),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function vd(n,e){return n[Da]?n[gC][Xt]=e:n[Da]=e,n[gC]=e,e}function Sm(n,e,t){Fb(0);let r=te(null);try{e(n,t)}finally{te(r)}}function jF(n){return n[Mu]??=[]}function BF(n){return n.cleanup??=[]}function KT(n,e){let t=n[Us],r=t?t.get(zn,null):null;r&&r.handleError(e)}function wg(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],u=n.data[o];UT(u,l,r,a,c,i)}}function YT(n,e,t){let r=Db(e,n);JL(n[Ae],r,t)}function $F(n,e){let t=Nr(e,n),r=t[K];HF(r,t);let i=t[Et];i!==null&&t[bn]===null&&(t[bn]=lg(i,t[Us])),Cg(r,t,t[tn])}function HF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Cg(n,e,t){eg(e);try{let r=n.viewQuery;r!==null&&Sm(1,r,t);let i=n.template;i!==null&&BT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Bs]?.finishViewCreation(n),n.staticContentQueries&&qT(n,e),n.staticViewQueries&&Sm(2,n.viewQuery,t);let s=n.components;s!==null&&WF(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[x]&=-5,tg()}}function WF(n,e){for(let t=0;t<e.length;t++)$F(n,e[t])}function zF(n,e,t,r){let i=te(null);try{let s=e.tView,a=n[x]&4096?4096:16,c=_d(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[js]=l;let u=n[Bs];return u!==null&&(c[Bs]=u.createEmbeddedView(s)),Cg(s,c,t),c}finally{te(i)}}function PC(n,e){return!e||e.firstChild===null||Bu(n)}function GF(n,e,t,r=!0){let i=e[K];if(tF(i,e,n,t),r){let o=Tm(t,n),a=e[Ae],c=PT(a,n[Wn]);c!==null&&XL(i,n[rn],a,e,c,o)}let s=e[bn];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function zu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(nn(s)),Sn(s)&&qF(s,r);let o=t.type;if(o&8)zu(n,e,t.child,r);else if(o&32){let a=hg(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=OT(e,t);if(Array.isArray(a))r.push(...a);else{let c=yi(e[Ft]);zu(c[K],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function qF(n,e){for(let t=It;t<n.length;t++){let r=n[t],i=r[K].firstChild;i!==null&&zu(r[K],r,i,e)}n[Wn]!==n[Et]&&e.push(n[Wn])}var QT=[];function KF(n){return n[xt]??YF(n)}function YF(n){let e=QT.pop()??Object.create(JF);return e.lView=n,e}function QF(n){n.lView[xt]!==n&&(n.lView=null,QT.push(n))}var JF=W(w({},pa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ad(n.lView)},consumerOnSignalRead(){this.lView[xt]=this}});function ZF(n){let e=n[xt]??Object.create(XF);return e.lView=n,e}var XF=W(w({},pa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=yi(n.lView);for(;e&&!JT(e[K]);)e=yi(e);e&&Nb(e)},consumerOnSignalRead(){this.lView[xt]=this}});function JT(n){return n.type!==2}var e1=100;function ZT(n,e=!0,t=0){let r=n[Tn],i=r.rendererFactory,s=!1;s||i.begin?.();try{t1(n,t)}catch(o){throw e&&KT(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function t1(n,e){let t=xb();try{vC(!0),Am(n,e);let r=0;for(;od(n);){if(r===e1)throw new A(103,!1);r++,Am(n,1)}}finally{vC(t)}}function n1(n,e,t,r){let i=e[x];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Tn].inlineEffectRunner?.flush(),eg(e);let a=!0,c=null,l=null;s||(JT(n)?(l=KF(e),c=Ul(l)):Iw()===null?(a=!1,l=ZF(e),c=Ul(l)):e[xt]&&(_p(e[xt]),e[xt]=null));try{Ab(e),Vx(n.bindingStartIndex),t!==null&&BT(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let f=n.preOrderCheckHooks;f!==null&&Cu(e,f,null)}else{let f=n.preOrderHooks;f!==null&&bu(e,f,0,null),Hp(e,0)}if(o||r1(e),XT(e,0),n.contentQueries!==null&&qT(n,e),!s)if(u){let f=n.contentCheckHooks;f!==null&&Cu(e,f)}else{let f=n.contentHooks;f!==null&&bu(e,f,1),Hp(e,1)}pF(n,e);let d=n.components;d!==null&&tD(e,d,0);let h=n.viewQuery;if(h!==null&&Sm(2,h,r),!s)if(u){let f=n.viewCheckHooks;f!==null&&Cu(e,f)}else{let f=n.viewHooks;f!==null&&bu(e,f,2),Hp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[$p]){for(let f of e[$p])f();e[$p]=null}s||(e[x]&=-73)}catch(u){throw s||ad(e),u}finally{l!==null&&(mp(l,c),a&&QF(l)),tg()}}function XT(n,e){for(let t=uT(n);t!==null;t=dT(t))for(let r=It;r<t.length;r++){let i=t[r];eD(i,e)}}function r1(n){for(let e=uT(n);e!==null;e=dT(e)){if(!(e[x]&Ou.HasTransplantedViews))continue;let t=e[Pu];for(let r=0;r<t.length;r++){let i=t[r];Nb(i)}}}function i1(n,e,t){let r=Nr(e,n);eD(r,t)}function eD(n,e){Qm(n)&&Am(n,e)}function Am(n,e){let r=n[K],i=n[x],s=n[xt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&gp(s)),o||=!1,s&&(s.dirty=!1),n[x]&=-9217,o)n1(r,n,r.template,n[tn]);else if(i&8192){XT(n,1);let a=r.components;a!==null&&tD(n,a,1)}}function tD(n,e,t){for(let r=0;r<e.length;r++)i1(n,e[r],t)}function bg(n,e){let t=xb()?64:1088;for(n[Tn].changeDetectionScheduler?.notify(e);n;){n[x]|=t;let r=yi(n);if(xu(n)&&!r)return n;n=r}return null}var wi=class{get rootNodes(){let e=this._lView,t=e[K];return zu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[tn]}set context(e){this._lView[tn]=e}get destroyed(){return(this._lView[x]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[qe];if(Sn(e)){let t=e[ku],r=t?t.indexOf(this):-1;r>-1&&(bm(e,r),Nu(t,r))}this._attachedToViewContainer=!1}MT(this._lView[K],this._lView)}onDestroy(e){Rb(this._lView,e)}markForCheck(){bg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[x]&=-129}reattach(){um(this._lView),this._lView[x]|=128}detectChanges(){this._lView[x]|=1024,ZT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=xu(this._lView),t=this._lView[js];t!==null&&!e&&pg(t,this._lView),NT(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=e;let t=xu(this._lView),r=this._lView[js];r!==null&&!t&&RT(r,this._lView),um(this._lView)}},yd=(()=>{class n{static{this.__NG_ELEMENT_ID__=a1}}return n})(),s1=yd,o1=class extends s1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=zF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new wi(i)}};function a1(){return c1(at(),ge())}function c1(n,e){return n.type&4?new o1(e,n,ud(n,e)):null}var l1=new RegExp(`^(\\d+)*(${mT}|${pT})*(.*)`);function u1(n){let e=n.match(l1),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,l,u]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[o,...a]}function d1(n){return!n.prev&&n.parent?.type===8}function Yp(n){return n.index-st}function h1(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Id(n,e,t,r){let i=Yp(r),s=h1(n,i);if(s===void 0){let o=n.data[NL];if(o?.[i])s=p1(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(d1(r)){let l=Yp(r.parent);s=Cm(n,l)}else{let l=Ct(c,t);if(a)s=l.firstChild;else{let u=Yp(c),d=Cm(n,u);if(c.type===2&&d){let f=ug(n,u)+1;s=Ed(f,d)}else s=l.nextSibling}}}}return s}function Ed(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function f1(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case wm.FirstChild:t=t.firstChild;break;case wm.NextSibling:t=t.nextSibling;break}}return t}function p1(n,e){let[t,...r]=u1(n),i;if(t===pT)i=e[Ft][Et];else if(t===mT)i=YL(e[Ft][Et]);else{let s=Number(t);i=nn(e[s+st])}return f1(i,r)}var m1=!1;function g1(n){m1=n}function _1(n){let e=n[bn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[Ae];for(let s of r.values())v1(i,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function v1(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-st);i&&mg(n,i,!1)}}function nD(n){let e=n[Sa]??[],r=n[qe][Ae];for(let i of e)y1(i,r);n[Sa]=yt}function y1(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[$u];for(;t<i;){let s=r.nextSibling;mg(e,r,!1),r=s,t++}}}function rD(n){nD(n);let e=n[Et];en(e)&&Gu(e);for(let t=It;t<n.length;t++)Gu(n[t])}function Gu(n){_1(n);let e=n[K];for(let t=st;t<e.bindingStartIndex;t++)if(Sn(n[t])){let r=n[t];rD(r)}else en(n[t])&&Gu(n[t])}function I1(n){let e=n._views;for(let t of e){let r=OL(t);r!==null&&r[Et]!==null&&(en(r)?Gu(r):rD(r))}}function E1(n,e){let t=[];for(let r of e)for(let i=0;i<(r[gT]??1);i++){let s={data:r,firstChild:null};r[$u]>0&&(s.firstChild=n,n=Ed(r[$u],n)),t.push(s)}return[n,t]}var iD=()=>null;function w1(n,e){let t=n[Sa];return!e||t===null||t.length===0?null:t[0].data[AL]===e?t.shift():(nD(n),null)}function C1(){iD=w1}function OC(n,e){return iD(n,e)}var Ws=class{},wd=new S("",{providedIn:"root",factory:()=>!1});var sD=new S(""),oD=new S(""),Nm=class{},qu=class{};function b1(n){let e=Error(`No component factory found for ${it(n)}.`);return e[T1]=n,e}var T1="ngComponent";var Rm=class{resolveComponentFactory(e){throw b1(e)}},zs=class{static{this.NULL=new Rm}},Gs=class{},An=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>D1()}}return n})();function D1(){let n=ge(),e=at(),t=Nr(e.index,n);return(en(t)?t:n)[Ae]}var S1=(()=>{class n{static{this.\u0275prov=R({token:n,providedIn:"root",factory:()=>null})}}return n})();function Ku(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=oC(i,a);else if(s==2){let c=a,l=e[++o];r=oC(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Yu=class extends zs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=vi(e);return new Aa(t,this.ngModule)}};function xC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:br.None;e?t.push({propName:o,templateName:r,isSignal:(a&br.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function A1(n){let e=n.toLowerCase();return e==="svg"?Tx:e==="math"?Dx:null}var Aa=class extends qu{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=xC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return xC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=ix(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=te(null);try{i=i||this.ngModule;let o=i instanceof Lt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new hm(e,o):e,c=a.get(Gs,null);if(c===null)throw new A(407,!1);let l=a.get(S1,null),u=a.get(Ws,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},h=c.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",m=r?_F(h,r,this.componentDef.encapsulation,a):fg(h,f,A1(f)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let D=null;m!==null&&(D=lg(m,a,!0));let M=Ig(0,null,null,1,0,null,null,null,null,null,null),ne=_d(null,M,null,y,null,null,d,h,a,null,D);eg(ne);let re,we,ut=null;try{let ke=this.componentDef,kt,ci=null;ke.findHostDirectiveDefs?(kt=[],ci=new Map,ke.findHostDirectiveDefs(ke,kt,ci),kt.push(ke)):kt=[ke];let $n=N1(ne,m);ut=R1($n,m,ke,kt,ne,d,h),we=Sb(M,st),m&&P1(h,ke,m,r),t!==void 0&&O1(we,this.ngContentSelectors,t),re=k1(ut,ke,kt,ci,ne,[x1]),Cg(M,ne,null)}catch(ke){throw ut!==null&&Im(ut),Im(ne),ke}finally{tg()}return new Mm(this.componentType,re,ud(we,ne),ne,we)}finally{te(s)}}},Mm=class extends Nm{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new wi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;wg(s[K],s,i,e,t),this.previousInputValues.set(e,t);let o=Nr(this._tNode.index,s);bg(o,1)}}get injector(){return new gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function N1(n,e){let t=n[K],r=st;return n[r]=e,Fa(t,r,2,"#host",null)}function R1(n,e,t,r,i,s,o){let a=i[K];M1(r,n,e,o);let c=null;e!==null&&(c=lg(e,i[Us]));let l=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=_d(i,$T(t),null,u,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Dm(a,n,r.length-1),vd(i,d),i[n.index]=d}function M1(n,e,t,r){for(let i of n)e.mergedAttrs=ba(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ku(e,e.mergedAttrs,!0),t!==null&&FT(r,t,e))}function k1(n,e,t,r,i,s){let o=at(),a=i[K],c=Ct(o,i);WT(a,i,o,t,null,r);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,h=Hs(i,a,d,o);Dr(h,i)}zT(a,i,o),c&&Dr(c,i);let l=Hs(i,a,o.directiveStart+o.componentOffset,o);if(n[tn]=i[tn]=l,s!==null)for(let u of s)u(l,e);return _g(a,o,i),l}function P1(n,e,t,r){if(r)sm(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:s}=sx(e.selectors[0]);i&&sm(n,t,i),s&&s.length>0&&LT(n,t,s.join(" "))}}function O1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function x1(){let n=at();ld(ge()[K],n)}var Qs=(()=>{class n{static{this.__NG_ELEMENT_ID__=L1}}return n})();function L1(){let n=at();return V1(n,ge())}var F1=Qs,aD=class extends F1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ud(this._hostTNode,this._hostLView)}get injector(){return new gi(this._hostTNode,this._hostLView)}get parentInjector(){let e=ng(this._hostTNode,this._hostLView);if(qb(e)){let t=Fu(e,this._hostLView),r=Lu(e),i=t[K].data[r+8];return new gi(i,t)}else return new gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=LC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-It}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=OC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,PC(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!Ex(e),a;if(o)a=t;else{let m=t||{};a=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}let c=o?e:new Aa(vi(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let y=(o?l:this.parentInjector).get(Lt,null);y&&(s=y)}let u=vi(c.componentType??{}),d=OC(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,PC(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Sx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[qe],l=new aD(c,c[rn],c[qe]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return GF(o,i,s,r),e.attachToViewContainerRef(),ib(Qp(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=LC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=bm(this._lContainer,t);r&&(Nu(Qp(this._lContainer),t),MT(r[K],r))}detach(e){let t=this._adjustIndex(e,-1),r=bm(this._lContainer,t);return r&&Nu(Qp(this._lContainer),t)!=null?new wi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function LC(n){return n[ku]}function Qp(n){return n[ku]||(n[ku]=[])}function V1(n,e){let t,r=e[n.index];return Sn(r)?t=r:(t=GT(r,e,null,n),e[n.index]=t,vd(e,t)),cD(t,e,n,r),new aD(t,n,e)}function U1(n,e){let t=n[Ae],r=t.createComment(""),i=Ct(e,n),s=PT(t,i);return Wu(t,s,r,oF(t,i),!1),r}var cD=lD,Tg=()=>!1;function j1(n,e,t){return Tg(n,e,t)}function lD(n,e,t,r){if(n[Wn])return;let i;t.type&8?i=nn(r):i=U1(e,t),n[Wn]=i}function B1(n,e,t){if(n[Wn]&&n[Sa])return!0;let r=t[bn],i=e.index-st;if(!r||yL(e)||xa(r,i))return!1;let o=Cm(r,i),a=r.data[cg]?.[i],[c,l]=E1(o,a);return n[Wn]=c,n[Sa]=l,!0}function $1(n,e,t,r){Tg(n,t,e)||lD(n,e,t,r)}function H1(){cD=$1,Tg=B1}var FC=new Set;function kr(n){FC.has(n)||(FC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Va(n,e){kr("NgSignals");let t=Mw(n),r=t[gr];return e?.equal&&(r.equal=e.equal),t.set=i=>vp(r,i),t.update=i=>kw(r,i),t.asReadonly=W1.bind(t),t}function W1(){let n=this[gr];if(n.readonlyFn===void 0){let e=()=>this();e[gr]=n,n.readonlyFn=e}return n.readonlyFn}function z1(n){return Object.getPrototypeOf(n.prototype).constructor}function an(n){let e=z1(n.type),t=!0,r=[n];for(;e;){let i;if(Tr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new A(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=vu(n.inputs),o.inputTransforms=vu(n.inputTransforms),o.declaredInputs=vu(n.declaredInputs),o.outputs=vu(n.outputs);let a=i.hostBindings;a&&Q1(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&K1(n,c),l&&Y1(n,l),G1(n,i),DO(n.outputs,i.outputs),Tr(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===an&&(t=!1)}}e=Object.getPrototypeOf(e)}q1(r)}function G1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function q1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ba(i.hostAttrs,t=ba(t,i.hostAttrs))}}function vu(n){return n===Fs?{}:n===yt?[]:n}function K1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Y1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function Q1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Dg(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Sr=class{},Na=class{};var km=class extends Sr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Yu(this);let s=fb(e);this._bootstrapComponents=DT(s.bootstrap),this._r3Injector=nT(e,t,[{provide:Sr,useValue:this},{provide:zs,useValue:this.componentFactoryResolver},...r],it(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pm=class extends Na{constructor(e){super(),this.moduleType=e}create(e){return new km(this.moduleType,e,[])}};var Qu=class extends Sr{constructor(e){super(),this.componentFactoryResolver=new Yu(this),this.instance=null;let t=new Ta([...e.providers,{provide:Sr,useValue:this},{provide:zs,useValue:this.componentFactoryResolver}],e.parent||Km(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Sg(n,e,t=null){return new Qu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function uD(n){return Z1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function J1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Z1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ag(n,e,t){return n[e]=t}function Ar(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Ng(n,e,t,r){let i=Ar(n,e,t);return Ar(n,e+1,r)||i}function X1(n,e,t,r,i){let s=Ng(n,e,t,r);return Ar(n,e+2,i)||s}function Ua(n){return(n.flags&32)===32}function eV(n,e,t,r,i,s,o,a,c){let l=e.consts,u=Fa(e,n,4,o||null,a||null);Eg(e,t,u,$s(l,c)),ld(e,u);let d=u.tView=Ig(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function tV(n,e,t,r,i,s,o,a,c,l){let u=t+st,d=e.firstCreatePass?eV(u,e,n,r,i,s,o,a,c):e.data[u];bi(d,!1);let h=dD(e,n,d,t);cd()&&md(e,n,h,d),Dr(h,n);let f=GT(h,n,h,d);return n[u]=f,vd(n,f),j1(f,d,n),sd(d)&&vg(e,n,d),c!=null&&yg(n,d,l),d}function $(n,e,t,r,i,s,o,a){let c=ge(),l=bt(),u=$s(l.consts,s);return tV(c,l,n,e,t,r,i,u,o,a),$}var dD=hD;function hD(n,e,t,r){return Rr(!0),e[Ae].createComment("")}function nV(n,e,t,r){let i=e[bn],s=!i||Oa()||Ua(t)||xa(i,r);if(Rr(s),s)return hD(n,e,t,r);let o=i.data[SL]?.[r]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=Id(i,n,e,t);fd(i,r,a);let c=ug(i,r);return Ed(c,a)}function rV(){dD=nV}var Ea=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ea||{}),iV=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}}return n})(),VC=class n{constructor(){this.ngZone=I(le),this.scheduler=I(Ws),this.errorHandler=I(zn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ea.EarlyRead,Ea.Write,Ea.MixedReadWrite,Ea.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}};function Pr(n,e,t,r){let i=ge(),s=Xm();if(Ar(i,s,e)){let o=bt(),a=Hb();LF(a,i,n,e,t,r)}return Pr}function sV(n,e,t,r){return Ar(n,Xm(),t)?e+xs(t)+r:Jn}function oV(n,e,t,r,i,s){let o=Fx(),a=Ng(n,o,t,i);return Lb(2),a?e+xs(t)+r+xs(i)+s:Jn}function yu(n,e){return n<<17|e<<2}function Ci(n){return n>>17&32767}function aV(n){return(n&2)==2}function cV(n,e){return n&131071|e<<17}function Om(n){return n|2}function qs(n){return(n&131068)>>2}function Jp(n,e){return n&-131069|e<<2}function lV(n){return(n&1)===1}function xm(n){return n|1}function uV(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ci(o),c=qs(o);n[r]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||ka(d,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let h=Ci(n[a+1]);n[r+1]=yu(h,a),h!==0&&(n[h+1]=Jp(n[h+1],r)),n[a+1]=cV(n[a+1],r)}else n[r+1]=yu(a,0),a!==0&&(n[a+1]=Jp(n[a+1],r)),a=r;else n[r+1]=yu(c,0),a===0?a=r:n[c+1]=Jp(n[c+1],r),c=r;l&&(n[r+1]=Om(n[r+1])),UC(n,u,r,!0),UC(n,u,r,!1),dV(e,u,n,r,s),o=yu(a,c),s?e.classBindings=o:e.styleBindings=o}function dV(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&ka(s,e)>=0&&(t[r+1]=xm(t[r+1]))}function UC(n,e,t,r){let i=n[t+1],s=e===null,o=r?Ci(i):qs(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];hV(c,e)&&(a=!0,n[o+1]=r?xm(l):Om(l)),o=r?Ci(l):qs(l)}a&&(n[t+1]=r?Om(i):xm(i))}function hV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ka(n,e)>=0:!1}function b(n,e,t){let r=ge(),i=Xm();if(Ar(r,i,e)){let s=bt(),o=Hb();bF(s,o,r,n,e,r[Ae],t,!1)}return b}function jC(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";wg(n,t,s[o],o,r)}function Cd(n,e){return fV(n,e,null,!0),Cd}function fV(n,e,t,r){let i=ge(),s=bt(),o=Lb(2);if(s.firstUpdatePass&&mV(s,n,o,r),e!==Jn&&Ar(i,o,e)){let a=s.data[Ti()];IV(s,a,i,i[Ae],n,i[o+1]=EV(e,t),r,o)}}function pV(n,e){return e>=n.expandoStartIndex}function mV(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ti()],o=pV(n,t);wV(s,r)&&e===null&&!o&&(e=!1),e=gV(i,s,e,r),uV(i,s,e,t,o,r)}}function gV(n,e,t,r){let i=$x(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Zp(null,n,e,t,r),t=Ra(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Zp(i,n,e,t,r),s===null){let c=_V(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Zp(null,n,e,c[1],r),c=Ra(c,e.attrs,r),vV(n,e,r,c))}else s=yV(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function _V(n,e,t){let r=t?e.classBindings:e.styleBindings;if(qs(r)!==0)return n[Ci(r)]}function vV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ci(i)]=r}function yV(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ra(r,o,t)}return Ra(r,e.attrs,t)}function Zp(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ra(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ra(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),GO(n,o,t?!0:e[++s]))}return n===void 0?null:n}function IV(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=lV(l)?BC(c,e,t,i,qs(l),o):void 0;if(!Ju(u)){Ju(s)||aV(l)&&(s=BC(c,null,t,i,a,o));let d=Db(Ti(),t);hF(r,o,d,i,s)}}function BC(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[i+1];h===Jn&&(h=d?yt:void 0);let f=d?jp(h,r):u===r?h:void 0;if(l&&!Ju(f)&&(f=jp(c,r)),Ju(f)&&(a=f,o))return a;let m=n[i+1];i=o?Ci(m):qs(m)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=jp(c,r))}return a}function Ju(n){return n!==void 0}function EV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=it(La(n)))),n}function wV(n,e){return(n.flags&(e?8:16))!==0}function CV(n,e,t,r,i,s){let o=e.consts,a=$s(o,i),c=Fa(e,n,2,r,a);return Eg(e,t,c,$s(o,s)),c.attrs!==null&&Ku(c,c.attrs,!1),c.mergedAttrs!==null&&Ku(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function _(n,e,t,r){let i=ge(),s=bt(),o=st+n,a=i[Ae],c=s.firstCreatePass?CV(o,s,i,e,t,r):s.data[o],l=fD(s,i,c,a,e,n);i[o]=l;let u=sd(c);return bi(c,!0),FT(a,l,c),!Ua(c)&&cd()&&md(s,i,l,c),Rx()===0&&Dr(l,i),Mx(),u&&(vg(s,i,c),_g(s,c,i)),r!==null&&yg(i,c),_}function g(){let n=at();Jm()?Ob():(n=n.parent,bi(n,!1));let e=n;Px(e)&&xx(),kx();let t=bt();return t.firstCreatePass&&(ld(t,n),Ym(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Kx(e)&&jC(t,e,ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Yx(e)&&jC(t,e,ge(),e.stylesWithoutHost,!1),g}function H(n,e,t,r){return _(n,e,t,r),g(),H}var fD=(n,e,t,r,i,s)=>(Rr(!0),fg(r,i,Wb()));function bV(n,e,t,r,i,s){let o=e[bn],a=!o||Oa()||Ua(t)||xa(o,s);if(Rr(a),a)return fg(r,i,Wb());let c=Id(o,n,e,t);return IT(o,s)&&fd(o,s,c.nextSibling),o&&(aT(t)||cT(c))&&Pa(t)&&(Ox(t),xT(c)),c}function TV(){fD=bV}function DV(n,e,t,r,i){let s=e.consts,o=$s(s,r),a=Fa(e,n,8,"ng-container",o);o!==null&&Ku(a,o,!0);let c=$s(s,i);return Eg(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Rg(n,e,t){let r=ge(),i=bt(),s=n+st,o=i.firstCreatePass?DV(s,i,r,e,t):i.data[s];bi(o,!0);let a=pD(i,r,o,n);return r[s]=a,cd()&&md(i,r,a,o),Dr(a,r),sd(o)&&(vg(i,r,o),_g(i,o,r)),t!=null&&yg(r,o),Rg}function Mg(){let n=at(),e=bt();return Jm()?Ob():(n=n.parent,bi(n,!1)),e.firstCreatePass&&(ld(e,n),Ym(n)&&e.queries.elementEnd(n)),Mg}var pD=(n,e,t,r)=>(Rr(!0),AT(e[Ae],""));function SV(n,e,t,r){let i,s=e[bn],o=!s||Oa()||xa(s,r)||Ua(t);if(Rr(o),o)return AT(e[Ae],"");let a=Id(s,n,e,t),c=FL(s,r);return fd(s,r,a),i=Ed(c,a),i}function AV(){pD=SV}function Or(){return ge()}var Zu="en-US";var NV=Zu;function RV(n){typeof n=="string"&&(NV=n.toLowerCase().replace(/_/g,"-"))}var MV=(n,e,t)=>{};function ue(n,e,t,r){let i=ge(),s=bt(),o=at();return PV(s,i,i[Ae],o,n,e,r),ue}function kV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Mu],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function PV(n,e,t,r,i,s,o){let a=sd(r),l=n.firstCreatePass&&BF(n),u=e[tn],d=jF(e),h=!0;if(r.type&3||o){let y=Ct(r,e),D=o?o(y):y,M=d.length,ne=o?we=>o(nn(we[r.index])):r.index,re=null;if(!o&&a&&(re=kV(n,e,i,r.index)),re!==null){let we=re.__ngLastListenerFn__||re;we.__ngNextListenerFn__=s,re.__ngLastListenerFn__=s,h=!1}else{s=HC(r,e,u,s),MV(y,i,s);let we=t.listen(D,i,s);d.push(s,we),l&&l.push(i,ne,M,M+1)}}else s=HC(r,e,u,s);let f=r.outputs,m;if(h&&f!==null&&(m=f[i])){let y=m.length;if(y)for(let D=0;D<y;D+=2){let M=m[D],ne=m[D+1],ut=e[M][ne].subscribe(s),ke=d.length;d.push(s,ut),l&&l.push(i,r.index,ke,-(ke+1))}}}function $C(n,e,t,r){let i=te(null);try{return En(6,e,t),t(r)!==!1}catch(s){return KT(n,s),!1}finally{En(7,e,t),te(i)}}function HC(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Nr(n.index,e):e;bg(o,5);let a=$C(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=$C(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function de(n=1){return Wx(n)}function v(n,e=""){let t=ge(),r=bt(),i=n+st,s=r.firstCreatePass?Fa(r,i,1,e,null):r.data[i],o=mD(r,t,s,e,n);t[i]=o,cd()&&md(r,t,o,s),bi(s,!1)}var mD=(n,e,t,r,i)=>(Rr(!0),ST(e[Ae],r));function OV(n,e,t,r,i){let s=e[bn],o=!s||Oa()||Ua(t)||xa(s,i);return Rr(o),o?ST(e[Ae],r):Id(s,n,e,t)}function xV(){mD=OV}function Js(n,e,t){let r=ge(),i=sV(r,n,e,t);return i!==Jn&&YT(r,Ti(),i),Js}function kg(n,e,t,r,i){let s=ge(),o=oV(s,n,e,t,r,i);return o!==Jn&&YT(s,Ti(),o),kg}function LV(n,e,t){let r=bt();if(r.firstCreatePass){let i=Tr(n);Lm(t,r.data,r.blueprint,i,!0),Lm(e,r.data,r.blueprint,i,!1)}}function Lm(n,e,t,r,i){if(n=rt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Lm(n[s],e,t,r,i);else{let s=bt(),o=ge(),a=at(),c=Vs(n)?n:rt(n.provide),l=yb(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Vs(n)||!n.multi){let f=new Ei(l,i,N),m=em(c,e,i?u:u+h,d);m===-1?(pm(Vu(a,o),s,c),Xp(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[m]=f,o[m]=f)}else{let f=em(c,e,u+h,d),m=em(c,e,u,u+h),y=f>=0&&t[f],D=m>=0&&t[m];if(i&&!D||!i&&!y){pm(Vu(a,o),s,c);let M=UV(i?VV:FV,t.length,i,r,l);!i&&D&&(t[m].providerFactory=M),Xp(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(M),o.push(M)}else{let M=gD(t[i?m:f],l,!i&&r);Xp(s,n,f>-1?f:m,M)}!i&&r&&D&&t[m].componentProviders++}}}function Xp(n,e,t,r){let i=Vs(e),s=fx(e);if(i||s){let c=(s?rt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function gD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function em(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function FV(n,e,t,r){return Fm(this.multi,[])}function VV(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Hs(t,t[K],this.providerFactory.index,r);s=a.slice(0,o),Fm(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Fm(i,s);return s}function Fm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function UV(n,e,t,r,i){let s=new Ei(n,t,N);return s.multi=[],s.index=e,s.componentProviders=0,gD(s,i,r&&!t),s}function Si(n,e=[]){return t=>{t.providersResolver=(r,i)=>LV(r,i?i(n):n,e)}}var jV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=gb(!1,t.type),i=r.length>0?Sg([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=R({token:n,providedIn:"environment",factory:()=>new n(L(Lt))})}}return n})();function ae(n){kr("NgStandalone"),n.getStandaloneInjector=e=>e.get(jV).getOrCreateStandaloneInjector(n)}function bd(n,e,t,r){return BV(ge(),Zm(),n,e,t,r)}function ct(n,e,t,r,i){return $V(ge(),Zm(),n,e,t,r,i)}function _D(n,e,t,r,i,s){return HV(ge(),Zm(),n,e,t,r,i,s)}function Pg(n,e){let t=n[e];return t===Jn?void 0:t}function BV(n,e,t,r,i,s){let o=e+t;return Ar(n,o,i)?Ag(n,o+1,s?r.call(s,i):r(i)):Pg(n,o+1)}function $V(n,e,t,r,i,s,o){let a=e+t;return Ng(n,a,i,s)?Ag(n,a+2,o?r.call(o,i,s):r(i,s)):Pg(n,a+2)}function HV(n,e,t,r,i,s,o,a){let c=e+t;return X1(n,c,i,s,o)?Ag(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):Pg(n,c+3)}var qn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},vD=new qn("18.2.10");var Td=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var yD=new S("");function Ai(n){return!!n&&typeof n.then=="function"}function ID(n){return!!n&&typeof n.subscribe=="function"}var ED=new S(""),wD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=I(ED,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Ai(s))t.push(s);else if(ID(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zs=new S("");function WV(){Rw(()=>{throw new A(600,!1)})}function zV(n){return n.isBoundToModule}var GV=10;function qV(n,e,t){try{let r=t();return Ai(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Nn=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=I(mL),this.afterRenderManager=I(iV),this.zonelessEnabled=I(wd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new je,this.afterTick=new je,this.componentTypes=[],this.components=[],this.isStable=I(Di).hasPendingTasks.pipe(O(t=>!t)),this._injector=I(Lt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof qu;if(!this._injector.get(wD).done){let h=!i&&hb(t),f=!1;throw new A(405,f)}let o;i?o=t:o=this._injector.get(zs).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=zV(o)?void 0:this._injector.get(Sr),c=r||o.selector,l=o.create(Ke.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(yD,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Tu(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new A(101,!1);let t=te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Gs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<GV;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)KV(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>od(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Tu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Zs,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Tu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new A(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Tu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Iu;function Dd(n){Iu??=new WeakMap;let e=Iu.get(n);if(e)return e;let t=n.isStable.pipe(Jt(r=>r)).toPromise().then(()=>{});return Iu.set(n,t),n.onDestroy(()=>Iu?.delete(n)),t}function KV(n,e,t,r){if(!t&&!od(n))return;ZT(n,e,t&&!r?0:1)}var Vm=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Og=(()=>{class n{compileModuleSync(t){return new Pm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=fb(t),s=DT(i.declarations).reduce((o,a)=>{let c=vi(a);return c&&o.push(new Aa(c)),o},[]);return new Vm(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var YV=(()=>{class n{constructor(){this.zone=I(le),this.changeDetectionScheduler=I(Ws),this.applicationRef=I(Nn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QV=new S("",{factory:()=>!1});function CD({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new le(W(w({},TD()),{scheduleInRootZone:t})),[{provide:le,useFactory:n},{provide:_i,multi:!0,useFactory:()=>{let r=I(YV,{optional:!0});return()=>r.initialize()}},{provide:_i,multi:!0,useFactory:()=>{let r=I(JV);return()=>{r.initialize()}}},e===!0?{provide:sD,useValue:!0}:[],{provide:oD,useValue:t??rT}]}function bD(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=CD({ngZoneFactory:()=>{let i=TD(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&kr("NgZone_CoalesceEvent"),new le(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return wt([{provide:QV,useValue:!0},{provide:wd,useValue:!1},r])}function TD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var JV=(()=>{class n{constructor(){this.subscription=new De,this.initialized=!1,this.zone=I(le),this.pendingTasks=I(Di)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{le.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{le.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ZV=(()=>{class n{constructor(){this.appRef=I(Nn),this.taskService=I(Di),this.ngZone=I(le),this.zonelessEnabled=I(wd),this.disableScheduling=I(sD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new De,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ju):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(I(oD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ym||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?bC:sT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ju+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,bC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function XV(){return typeof $localize<"u"&&$localize.locale||Zu}var xg=new S("",{providedIn:"root",factory:()=>I(xg,z.Optional|z.SkipSelf)||XV()});var Um=new S("");function Eu(n){return!n.moduleRef}function eU(n){let e=Eu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(le);return t.run(()=>{Eu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(zn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Eu(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Um);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Um);o.add(s),n.moduleRef.onDestroy(()=>{Tu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return qV(r,t,()=>{let s=e.get(wD);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(xg,Zu);if(RV(o||Zu),Eu(n)){let a=e.get(Nn);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return tU(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function tU(n,e){let t=n.injector.get(Nn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new A(-403,!1);e.push(n)}var Du=null;function nU(n=[],e){return Ke.create({name:e,providers:[{provide:rd,useValue:"platform"},{provide:Um,useValue:new Set([()=>Du=null])},...n]})}function rU(n=[]){if(Du)return Du;let e=nU(n);return Du=e,WV(),iU(e),e}function iU(n){n.get(og,null)?.forEach(t=>t())}var Xs=(()=>{class n{static{this.__NG_ELEMENT_ID__=sU}}return n})();function sU(n){return oU(at(),ge(),(n&16)===16)}function oU(n,e,t){if(Pa(n)&&!t){let r=Nr(n.index,e);return new wi(r,r)}else if(n.type&175){let r=e[Ft];return new wi(r,e)}return null}var jm=class{constructor(){}supports(e){return uD(e)}create(e){return new Bm(e)}},aU=(n,e)=>e,Bm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||aU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<WC(r,i,s)?t:r,a=WC(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let f=h<s.length?s[h]:s[h]=0,m=f+h;u<=m&&m<l&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!uD(e))throw new A(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,J1(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new $m(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Xu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Xu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},$m=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Hm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Xu=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Hm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function WC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function zC(){return new Lg([new jm])}var Lg=(()=>{class n{static{this.\u0275prov=R({token:n,providedIn:"root",factory:zC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||zC()),deps:[[n,new rb,new ot]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new A(901,!1)}}return n})();function DD(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=rU(r),s=[CD({}),{provide:Ws,useExisting:ZV},...t||[]],o=new Qu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return eU({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var GC=!1;function cU(){GC||(GC=!0,PL(),TV(),xV(),AV(),rV(),H1(),C1(),IF())}function lU(n,e){return Dd(n)}function SD(){return wt([{provide:mu,useFactory:()=>{let n=!0;return _u()&&(n=!!I(Ys,{optional:!0})?.get(vT,null)),n&&kr("NgHydration"),n}},{provide:_i,useValue:()=>{g1(!1),_u()&&I(mu)&&(uU(),cU())},multi:!0},{provide:wT,useFactory:()=>_u()&&I(mu)},{provide:Zs,useFactory:()=>{if(_u()&&I(mu)){let n=I(Nn),e=I(Ke);return()=>{lU(n,e).then(()=>{I1(n)})}}return()=>{}},multi:!0}])}function uU(){let n=dd(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===ML){e=t;break}if(!e)throw new A(-507,!1)}function Ni(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ja(n,e){kr("NgSignals");let t=Sw(n);return e?.equal&&(t[gr].equal=e.equal),t}function Zn(n){let e=te(null);try{return n()}finally{te(e)}}var PD=null;function Xn(){return PD}function OD(n){PD??=n}var Sd=class{};var Tt=new S(""),xD=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:()=>I(dU),providedIn:"platform"})}}return n})();var dU=(()=>{class n extends xD{constructor(){super(),this._doc=I(Tt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xn().getBaseHref(this._doc)}onPopState(t){let r=Xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function LD(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function AD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ri(n){return n&&n[0]!=="?"?"?"+n:n}var eo=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:()=>I(FD),providedIn:"root"})}}return n})(),hU=new S(""),FD=(()=>{class n extends eo{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(Tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return LD(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ri(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ri(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ri(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(xD),L(hU,8))}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ba=(()=>{class n{constructor(t){this._subject=new Se,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=mU(AD(ND(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ri(r))}normalize(t){return n.stripTrailingSlash(pU(this._basePath,ND(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ri(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ri(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ri}static{this.joinWithSlash=LD}static{this.stripTrailingSlash=AD}static{this.\u0275fac=function(r){return new(r||n)(L(eo))}}static{this.\u0275prov=R({token:n,factory:()=>fU(),providedIn:"root"})}}return n})();function fU(){return new Ba(L(eo))}function pU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function ND(n){return n.replace(/\/index.html$/,"")}function mU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function jg(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Fg=/\s+/,RD=[],xr=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=RD,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Fg):RD}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Fg):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Fg).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(N(on),N(An))}}static{this.\u0275dir=Ne({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Vg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},VD=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Vg(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),MD(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);MD(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(N(Qs),N(yd),N(Lg))}}static{this.\u0275dir=Ne({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function MD(n,e){n.context.$implicit=e.item}var Bt=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ug,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){kD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){kD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(N(Qs),N(yd))}}static{this.\u0275dir=Ne({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Ug=class{constructor(){this.$implicit=null,this.ngIf=null}};function kD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${it(e)}'.`)}var He=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qn({type:n})}static{this.\u0275inj=Yn({})}}return n})(),UD="browser",gU="server";function $a(n){return n===gU}var Ad=class{};var Rd=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var qD=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(qD||{}),Bg=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Rd,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Md=class n extends Bg{constructor(e={}){super(e),this.type=qD.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var _U=new S("");var vU=new S(""),jD="b",BD="h",$D="s",HD="st",WD="u",zD="rt",Nd=new S(""),yU=["GET","HEAD"];function IU(n,e){let f=I(Nd),{isCacheActive:t}=f,r=vw(f,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!yU.includes(s)||!r.includeRequestsWithAuthHeaders&&EU(n)||r.filter?.(n)===!1)return e(n);let o=I(Ys),a=I(vU,{optional:!0}),c=$a(I(jt));if(a&&!c)throw new A(2803,!1);let l=c&&a?TU(n.url,a):n.url,u=CU(n,l),d=o.get(u,null),h=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(h=i.includeHeaders),d){let{[jD]:m,[zD]:y,[BD]:D,[$D]:M,[HD]:ne,[WD]:re}=d,we=m;switch(y){case"arraybuffer":we=new TextEncoder().encode(m).buffer;break;case"blob":we=new Blob([m]);break}let ut=new Rd(D);return k(new Md({body:we,headers:ut,status:M,statusText:ne,url:re}))}return e(n).pipe(Oe(m=>{m instanceof Md&&c&&o.set(u,{[jD]:m.body,[BD]:wU(m.headers,h),[$D]:m.status,[HD]:m.statusText,[WD]:l,[zD]:n.responseType})}))}function EU(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function wU(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function GD(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function CU(n,e){let{params:t,method:r,responseType:i}=n,s=GD(t),o=n.serializeBody();o instanceof URLSearchParams?o=GD(o):typeof o!="string"&&(o="");let a=[r,i,e,o,s].join("|"),c=bU(a);return c}function bU(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function KD(n){return[{provide:Nd,useFactory:()=>(kr("NgHttpTransferCache"),w({isCacheActive:!0},n))},{provide:_U,useValue:IU,multi:!0,deps:[Ys,Nd]},{provide:Zs,multi:!0,useFactory:()=>{let e=I(Nn),t=I(Nd);return()=>{Dd(e).then(()=>{t.isCacheActive=!1})}}}]}function TU(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var Wg=class extends Sd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},zg=class n extends Wg{static makeCurrent(){OD(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=DU();return t==null?null:SU(t)}resetBaseElement(){Ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jg(document.cookie,e)}},Ha=null;function DU(){return Ha=Ha||document.querySelector("base"),Ha?Ha.getAttribute("href"):null}function SU(n){return new URL(n,document.baseURI).pathname}var AU=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac})}}return n})(),Gg=new S(""),ZD=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new A(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(Gg),L(le))}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac})}}return n})(),kd=class{constructor(e){this._doc=e}},$g="ng-app-id",XD=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=$a(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${$g}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute($g),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute($g,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(Tt),L(hd),L(ag,8),L(jt))}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac})}}return n})(),Hg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yg=/%COMP%/g,eS="%COMP%",NU=`_nghost-${eS}`,RU=`_ngcontent-${eS}`,MU=!0,kU=new S("",{providedIn:"root",factory:()=>MU});function PU(n){return RU.replace(Yg,n)}function OU(n){return NU.replace(Yg,n)}function tS(n,e){return e.map(t=>t.replace(Yg,n))}var YD=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=$a(a),this.defaultRenderer=new Wa(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Cn.ShadowDom&&(r=W(w({},r),{encapsulation:Cn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Pd?i.applyToHost(t):i instanceof za&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Cn.Emulated:s=new Pd(c,l,r,this.appId,u,o,a,d);break;case Cn.ShadowDom:return new qg(c,l,t,r,o,a,this.nonce,d);default:s=new za(c,l,r,u,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(ZD),L(XD),L(hd),L(kU),L(Tt),L(jt),L(le),L(ag))}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac})}}return n})(),Wa=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Hg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(QD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(QD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new A(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Hg[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Hg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Gn.DashCase|Gn.Important)?e.style.setProperty(t,r,i&Gn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Gn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Xn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function QD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var qg=class extends Wa{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=tS(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},za=class extends Wa{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?tS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Pd=class extends za{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=PU(l),this.hostAttr=OU(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},xU=(()=>{class n extends kd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Tt))}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac})}}return n})(),JD=["alt","control","meta","shift"],LU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},VU=(()=>{class n extends kd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xn().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),JD.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=LU[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),JD.forEach(o=>{if(o!==i){let a=FU[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(Tt))}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac})}}return n})();function nS(n,e){return DD(w({rootComponent:n},UU(e)))}function UU(n){return{appProviders:[...WU,...n?.providers??[]],platformProviders:HU}}function jU(){zg.makeCurrent()}function BU(){return new zn}function $U(){return fT(document),document}var HU=[{provide:jt,useValue:UD},{provide:og,useValue:jU,multi:!0},{provide:Tt,useFactory:$U,deps:[]}];var WU=[{provide:rd,useValue:"root"},{provide:zn,useFactory:BU,deps:[]},{provide:Gg,useClass:xU,multi:!0,deps:[Tt,le,jt]},{provide:Gg,useClass:VU,multi:!0,deps:[Tt]},YD,XD,ZD,{provide:Gs,useExisting:YD},{provide:Ad,useClass:AU,deps:[]},[]];var rS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(Tt))}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Kg=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Kg||{});function iS(...n){let e=[],t=new Set,r=t.has(Kg.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return wt([[],SD(),t.has(Kg.NoHttpTransferCache)||r?[]:KD({}),e])}var j="primary",ac=Symbol("RouteTitle"),e_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ao(n){return new e_(n)}function GU(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function qU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rn(n[t],e[t]))return!1;return!0}function Rn(n,e){let t=n?t_(n):void 0,r=e?t_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!hS(n[i],e[i]))return!1;return!0}function t_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function hS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function fS(n){return n.length>0?n[n.length-1]:null}function Fr(n){return Mp(n)?n:Ai(n)?ve(Promise.resolve(n)):k(n)}var KU={exact:mS,subset:gS},pS={exact:YU,subset:QU,ignored:()=>!0};function sS(n,e,t){return KU[t.paths](n.root,e.root,t.matrixParams)&&pS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function YU(n,e){return Rn(n,e)}function mS(n,e,t){if(!ki(n.segments,e.segments)||!Ld(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!mS(n.children[r],e.children[r],t))return!1;return!0}function QU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hS(n[t],e[t]))}function gS(n,e,t){return _S(n,e,e.segments,t)}function _S(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ki(i,t)||e.hasChildren()||!Ld(i,t,r))}else if(n.segments.length===t.length){if(!ki(n.segments,t)||!Ld(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!gS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ki(n.segments,i)||!Ld(n.segments,i,r)||!n.children[j]?!1:_S(n.children[j],e,s,r)}}function Ld(n,e,t){return e.every((r,i)=>pS[t](n[i].parameters,r.parameters))}var tr=class{constructor(e=new ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ao(this.queryParams),this._queryParamMap}toString(){return XU.serialize(this)}},ce=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fd(this)}},Mi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ao(this.parameters),this._parameterMap}toString(){return yS(this)}};function JU(n,e){return ki(n,e)&&n.every((t,r)=>Rn(t.parameters,e[r].parameters))}function ki(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function ZU(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===j&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==j&&(t=t.concat(e(i,r)))}),t}var S_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:()=>new Za,providedIn:"root"})}}return n})(),Za=class{parse(e){let t=new r_(e);return new tr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ga(e.root,!0)}`,r=nj(e.queryParams),i=typeof e.fragment=="string"?`#${ej(e.fragment)}`:"";return`${t}${r}${i}`}},XU=new Za;function Fd(n){return n.segments.map(e=>yS(e)).join("/")}function Ga(n,e){if(!n.hasChildren())return Fd(n);if(e){let t=n.children[j]?Ga(n.children[j],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==j&&r.push(`${i}:${Ga(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=ZU(n,(r,i)=>i===j?[Ga(n.children[j],!1)]:[`${i}:${Ga(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[j]!=null?`${Fd(n)}/${t[0]}`:`${Fd(n)}/(${t.join("//")})`}}function vS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Od(n){return vS(n).replace(/%3B/gi,";")}function ej(n){return encodeURI(n)}function n_(n){return vS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vd(n){return decodeURIComponent(n)}function oS(n){return Vd(n.replace(/\+/g,"%20"))}function yS(n){return`${n_(n.path)}${tj(n.parameters)}`}function tj(n){return Object.entries(n).map(([e,t])=>`;${n_(e)}=${n_(t)}`).join("")}function nj(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Od(t)}=${Od(i)}`).join("&"):`${Od(t)}=${Od(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var rj=/^[^\/()?;#]+/;function Qg(n){let e=n.match(rj);return e?e[0]:""}var ij=/^[^\/()?;=#]+/;function sj(n){let e=n.match(ij);return e?e[0]:""}var oj=/^[^=?&#]+/;function aj(n){let e=n.match(oj);return e?e[0]:""}var cj=/^[^&#]+/;function lj(n){let e=n.match(cj);return e?e[0]:""}var r_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ce([],{}):new ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[j]=new ce(e,t)),r}parseSegment(){let e=Qg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(e),new Mi(Vd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=sj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Qg(this.remaining);i&&(r=i,this.capture(r))}e[Vd(t)]=Vd(r)}parseQueryParam(e){let t=aj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=lj(this.remaining);o&&(r=o,this.capture(r))}let i=oS(t),s=oS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new A(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=j);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[j]:new ce([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new A(4011,!1)}};function IS(n){return n.segments.length>0?new ce([],{[j]:n}):n}function ES(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=ES(i);if(r===j&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ce(n.segments,e);return uj(t)}function uj(n){if(n.numberOfChildren===1&&n.children[j]){let e=n.children[j];return new ce(n.segments.concat(e.segments),e.children)}return n}function Pi(n){return n instanceof tr}function dj(n,e,t=null,r=null){let i=wS(n);return CS(i,e,t,r)}function wS(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new ce(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=IS(r);return e??i}function CS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Jg(i,i,i,t,r);let s=hj(e);if(s.toRoot())return Jg(i,i,new ce([],{}),t,r);let o=fj(s,i,n),a=o.processChildren?Ya(o.segmentGroup,o.index,s.commands):TS(o.segmentGroup,o.index,s.commands);return Jg(i,o.segmentGroup,a,t,r)}function Ud(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Xa(n){return typeof n=="object"&&n!=null&&n.outlets}function Jg(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=bS(n,e,t);let a=IS(ES(o));return new tr(a,s,i)}function bS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=bS(s,e,t)}),new ce(n.segments,r)}var jd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ud(r[0]))throw new A(4003,!1);let i=r.find(Xa);if(i&&i!==fS(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function hj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new jd(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new jd(t,e,r)}var io=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function fj(n,e,t){if(n.isAbsolute)return new io(e,!0,0);if(!t)return new io(e,!1,NaN);if(t.parent===null)return new io(t,!0,0);let r=Ud(n.commands[0])?0:1,i=t.segments.length-1+r;return pj(t,i,n.numberOfDoubleDots)}function pj(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new A(4005,!1);i=r.segments.length}return new io(r,!1,i-s)}function mj(n){return Xa(n[0])?n[0].outlets:{[j]:n}}function TS(n,e,t){if(n??=new ce([],{}),n.segments.length===0&&n.hasChildren())return Ya(n,e,t);let r=gj(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ce(n.segments.slice(0,r.pathIndex),{});return s.children[j]=new ce(n.segments.slice(r.pathIndex),n.children),Ya(s,0,i)}else return r.match&&i.length===0?new ce(n.segments,{}):r.match&&!n.hasChildren()?i_(n,e,t):r.match?Ya(n,0,i):i_(n,e,t)}function Ya(n,e,t){if(t.length===0)return new ce(n.segments,{});{let r=mj(t),i={};if(Object.keys(r).some(s=>s!==j)&&n.children[j]&&n.numberOfChildren===1&&n.children[j].segments.length===0){let s=Ya(n.children[j],e,t);return new ce(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=TS(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ce(n.segments,i)}}function gj(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Xa(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!cS(c,l,o))return s;r+=2}else{if(!cS(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function i_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Xa(s)){let c=_j(s.outlets);return new ce(r,c)}if(i===0&&Ud(t[0])){let c=n.segments[e];r.push(new Mi(c.path,aS(t[0]))),i++;continue}let o=Xa(s)?s.outlets[j]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Ud(a)?(r.push(new Mi(o,aS(a))),i+=2):(r.push(new Mi(o,{})),i++)}return new ce(r,{})}function _j(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=i_(new ce([],{}),0,r))}),e}function aS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function cS(n,e,t){return n==t.path&&Rn(e,t.parameters)}var Qa="imperative",We=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(We||{}),$t=class{constructor(e,t){this.id=e,this.url=t}},ec=class extends $t{constructor(e,t,r="imperative",i=null){super(e,t),this.type=We.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Lr=class extends $t{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=We.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},St=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(St||{}),s_=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(s_||{}),er=class extends $t{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=We.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Oi=class extends $t{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=We.NavigationSkipped}},tc=class extends $t{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=We.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Bd=class extends $t{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=We.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},o_=class extends $t{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=We.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},a_=class extends $t{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=We.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},c_=class extends $t{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=We.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},l_=class extends $t{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=We.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},u_=class{constructor(e){this.route=e,this.type=We.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},d_=class{constructor(e){this.route=e,this.type=We.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},h_=class{constructor(e){this.snapshot=e,this.type=We.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},f_=class{constructor(e){this.snapshot=e,this.type=We.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},p_=class{constructor(e){this.snapshot=e,this.type=We.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},m_=class{constructor(e){this.snapshot=e,this.type=We.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var nc=class{},co=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function vj(n,e){return n.providers&&!n._injector&&(n._injector=Sg(n.providers,e,`Route: ${n.path}`)),n._injector??e}function cn(n){return n.outlet||j}function yj(n,e){let t=n.filter(r=>cn(r)===e);return t.push(...n.filter(r=>cn(r)!==e)),t}function cc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var g_=class{get injector(){return cc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Kd(this.rootInjector),this.attachRef=null}},Kd=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new g_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(Lt))}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$d=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=__(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=__(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=v_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return v_(e,this._root).map(t=>t.value)}};function __(n,e){if(n===e.value)return e;for(let t of e.children){let r=__(n,t);if(r)return r}return null}function v_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=v_(n,t);if(r.length)return r.unshift(e),r}return[]}var Dt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ro(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Hd=class extends $d{constructor(e,t){super(e),this.snapshot=t,A_(this,e)}toString(){return this.snapshot.toString()}};function DS(n){let e=Ij(n),t=new $e([new Mi("",{})]),r=new $e({}),i=new $e({}),s=new $e({}),o=new $e(""),a=new xi(t,r,s,o,i,j,n,e.root);return a.snapshot=e.root,new Hd(new Dt(a,[]),e)}function Ij(n){let e={},t={},r={},i="",s=new so([],e,r,i,t,j,n,null,{});return new zd("",new Dt(s,[]))}var xi=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(O(l=>l[ac]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(O(e=>ao(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(O(e=>ao(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:w(w({},e.params),n.params),data:w(w({},e.data),n.data),resolve:w(w(w(w({},n.data),e.data),i?.data),n._resolvedData)}:r={params:w({},n.params),data:w({},n.data),resolve:w(w({},n.data),n._resolvedData??{})},i&&AS(i)&&(r.resolve[ac]=i.title),r}var so=class{get title(){return this.data?.[ac]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ao(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ao(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},zd=class extends $d{constructor(e,t){super(t),this.url=e,A_(this,t)}toString(){return SS(this._root)}};function A_(n,e){e.value._routerState=n,e.children.forEach(t=>A_(n,t))}function SS(n){let e=n.children.length>0?` { ${n.children.map(SS).join(", ")} } `:"";return`${n.value}${e}`}function Zg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Rn(e.params,t.params)||n.paramsSubject.next(t.params),qU(e.url,t.url)||n.urlSubject.next(t.url),Rn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function y_(n,e){let t=Rn(n.params,e.params)&&JU(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||y_(n.parent,e.parent))}function AS(n){return typeof n.title=="string"||n.title===null}var N_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=j,this.activateEvents=new Se,this.deactivateEvents=new Se,this.attachEvents=new Se,this.detachEvents=new Se,this.parentContexts=I(Kd),this.location=I(Qs),this.changeDetector=I(Xs),this.inputBinder=I(R_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new I_(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ne({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[sn]})}}return n})(),I_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xi?this.route:e===Kd?this.childContexts:this.parent.get(e,t)}},R_=new S("");function Ej(n,e,t){let r=rc(n,e._root,t?t._root:void 0);return new Hd(r,e)}function rc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=wj(n,e,t);return new Dt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>rc(n,a)),o}}let r=Cj(e.value),i=e.children.map(s=>rc(n,s));return new Dt(r,i)}}function wj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rc(n,r,i);return rc(n,r)})}function Cj(n){return new xi(new $e(n.url),new $e(n.params),new $e(n.queryParams),new $e(n.fragment),new $e(n.data),n.outlet,n.component,n)}var ic=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},NS="ngNavigationCancelingError";function Gd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Pi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=RS(!1,St.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function RS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[NS]=!0,t.cancellationCode=e,t}function bj(n){return MS(n)&&Pi(n.url)}function MS(n){return!!n&&n[NS]}var Tj=(n,e,t,r)=>O(i=>(new E_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),E_=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Zg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ro(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ro(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ro(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ro(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new m_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new f_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Zg(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Zg(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},qd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},oo=class{constructor(e,t){this.component=e,this.route=t}};function Dj(n,e,t){let r=n._root,i=e?e._root:null;return qa(r,i,t,[r.value])}function Sj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function uo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!QC(n)?n:e.get(n):r}function qa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ro(e);return n.children.forEach(o=>{Aj(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ja(a,t.getContext(o),i)),i}function Aj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Nj(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new qd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?qa(n,e,a?a.children:null,r,i):qa(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new oo(a.outlet.component,o))}else o&&Ja(e,a,i),i.canActivateChecks.push(new qd(r)),s.component?qa(n,null,a?a.children:null,r,i):qa(n,null,t,r,i);return i}function Nj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ki(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ki(n.url,e.url)||!Rn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!y_(n,e)||!Rn(n.queryParams,e.queryParams);case"paramsChange":default:return!y_(n,e)}}function Ja(n,e,t){let r=ro(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ja(o,e.children.getContext(s),t):Ja(o,null,t):Ja(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new oo(e.outlet.component,i)):t.canDeactivateChecks.push(new oo(null,i)):t.canDeactivateChecks.push(new oo(null,i))}function lc(n){return typeof n=="function"}function Rj(n){return typeof n=="boolean"}function Mj(n){return n&&lc(n.canLoad)}function kj(n){return n&&lc(n.canActivate)}function Pj(n){return n&&lc(n.canActivateChild)}function Oj(n){return n&&lc(n.canDeactivate)}function xj(n){return n&&lc(n.canMatch)}function kS(n){return n instanceof Hn||n?.name==="EmptyError"}var xd=Symbol("INITIAL_VALUE");function lo(){return nt(n=>du(n.map(e=>e.pipe(ht(1),Vp(xd)))).pipe(O(e=>{for(let t of e)if(t!==!0){if(t===xd)return xd;if(t===!1||Lj(t))return t}return!0}),Pt(e=>e!==xd),ht(1)))}function Lj(n){return Pi(n)||n instanceof ic}function Fj(n,e){return Pe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?k(W(w({},t),{guardsResult:!0})):Vj(o,r,i,n).pipe(Pe(a=>a&&Rj(a)?Uj(r,s,n,e):k(a)),O(a=>W(w({},t),{guardsResult:a})))})}function Vj(n,e,t,r){return ve(n).pipe(Pe(i=>Wj(i.component,i.route,t,e,r)),Jt(i=>i!==!0,!0))}function Uj(n,e,t,r){return ve(e).pipe(mi(i=>yr(Bj(i.route.parent,r),jj(i.route,r),Hj(n,i.path,t),$j(n,i.route,t))),Jt(i=>i!==!0,!0))}function jj(n,e){return n!==null&&e&&e(new p_(n)),k(!0)}function Bj(n,e){return n!==null&&e&&e(new h_(n)),k(!0)}function $j(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return k(!0);let i=r.map(s=>hu(()=>{let o=cc(e)??t,a=uo(s,o),c=kj(a)?a.canActivate(e,n):Dn(o,()=>a(e,n));return Fr(c).pipe(Jt())}));return k(i).pipe(lo())}function Hj(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Sj(o)).filter(o=>o!==null).map(o=>hu(()=>{let a=o.guards.map(c=>{let l=cc(o.node)??t,u=uo(c,l),d=Pj(u)?u.canActivateChild(r,n):Dn(l,()=>u(r,n));return Fr(d).pipe(Jt())});return k(a).pipe(lo())}));return k(s).pipe(lo())}function Wj(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return k(!0);let o=s.map(a=>{let c=cc(e)??i,l=uo(a,c),u=Oj(l)?l.canDeactivate(n,e,t,r):Dn(c,()=>l(n,e,t,r));return Fr(u).pipe(Jt())});return k(o).pipe(lo())}function zj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return k(!0);let s=i.map(o=>{let a=uo(o,n),c=Mj(a)?a.canLoad(e,t):Dn(n,()=>a(e,t));return Fr(c)});return k(s).pipe(lo(),PS(r))}function PS(n){return ma(Oe(e=>{if(typeof e!="boolean")throw Gd(n,e)}),O(e=>e===!0))}function Gj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return k(!0);let s=i.map(o=>{let a=uo(o,n),c=xj(a)?a.canMatch(e,t):Dn(n,()=>a(e,t));return Fr(c)});return k(s).pipe(lo(),PS(r))}var sc=class{constructor(e){this.segmentGroup=e||null}},oc=class extends Error{constructor(e){super(),this.urlTree=e}};function no(n){return Ss(new sc(n))}function qj(n){return Ss(new A(4e3,!1))}function Kj(n){return Ss(RS(!1,St.GuardRejected))}var w_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return k(r);if(i.numberOfChildren>1||!i.children[j])return qj(`${e.redirectTo}`);i=i.children[j]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,params:f,data:m,title:y}=i,D=Dn(s,()=>a({params:f,data:m,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,title:y}));if(D instanceof tr)throw new oc(D);t=D}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new oc(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new tr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ce(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new A(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},C_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yj(n,e,t,r,i){let s=OS(n,e,t);return s.matched?(r=vj(e,r),Gj(r,e,t,i).pipe(O(o=>o===!0?s:w({},C_)))):k(s)}function OS(n,e,t){if(e.path==="**")return Qj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?w({},C_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||GU)(t,n,e);if(!i)return w({},C_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?w(w({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Qj(n){return{matched:!0,parameters:n.length>0?fS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function lS(n,e,t,r){return t.length>0&&Xj(n,t,r)?{segmentGroup:new ce(e,Zj(r,new ce(t,n.children))),slicedSegments:[]}:t.length===0&&eB(n,t,r)?{segmentGroup:new ce(n.segments,Jj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ce(n.segments,n.children),slicedSegments:t}}function Jj(n,e,t,r){let i={};for(let s of t)if(Yd(n,e,s)&&!r[cn(s)]){let o=new ce([],{});i[cn(s)]=o}return w(w({},r),i)}function Zj(n,e){let t={};t[j]=e;for(let r of n)if(r.path===""&&cn(r)!==j){let i=new ce([],{});t[cn(r)]=i}return t}function Xj(n,e,t){return t.some(r=>Yd(n,e,r)&&cn(r)!==j)}function eB(n,e,t){return t.some(r=>Yd(n,e,r))}function Yd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function tB(n,e,t){return e.length===0&&!n.children[t]}var b_=class{};function nB(n,e,t,r,i,s,o="emptyOnly"){return new T_(n,e,t,r,i,o,s).recognize()}var rB=31,T_=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new w_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new A(4002,`'${e.segmentGroup}'`)}recognize(){let e=lS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(O(({children:t,rootSnapshot:r})=>{let i=new Dt(r,t),s=new zd("",i),o=dj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new so([],Object.freeze({}),Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),j,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,j,t).pipe(O(r=>({children:r,rootSnapshot:t})),Ir(r=>{if(r instanceof oc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof sc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(O(o=>o instanceof Dt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return ve(s).pipe(mi(o=>{let a=r.children[o],c=yj(t,o);return this.processSegmentGroup(e,c,a,o,i)}),ya((o,a)=>(o.push(...a),o)),Er(null),Fp(),Pe(o=>{if(o===null)return no(r);let a=xS(o);return iB(a),k(a)}))}processSegment(e,t,r,i,s,o,a){return ve(t).pipe(mi(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Ir(l=>{if(l instanceof sc)return k(null);throw l}))),Jt(c=>!!c),Ir(c=>{if(kS(c))return tB(r,i,s)?k(new b_):no(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return cn(r)!==o&&(o===j||!Yd(i,s,r))?no(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):no(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=OS(t,i,s);if(!c)return no(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>rB&&(this.allowRedirects=!1));let f=new so(s,l,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,uS(i),cn(i),i.component??i._loadedComponent??null,i,dS(i)),m=Wd(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(m.params),f.data=Object.freeze(m.data);let y=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(i,y).pipe(Pe(D=>this.processSegment(e,r,t,D.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=Yj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(nt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(nt(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=c,m=new so(h,d,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,uS(r),cn(r),r.component??r._loadedComponent??null,r,dS(r)),y=Wd(m,o,this.paramsInheritanceStrategy);m.params=Object.freeze(y.params),m.data=Object.freeze(y.data);let{segmentGroup:D,slicedSegments:M}=lS(t,h,f,l);if(M.length===0&&D.hasChildren())return this.processChildren(u,l,D,m).pipe(O(re=>new Dt(m,re)));if(l.length===0&&M.length===0)return k(new Dt(m,[]));let ne=cn(r)===s;return this.processSegment(u,l,D,M,ne?j:s,!0,m).pipe(O(re=>new Dt(m,re instanceof Dt?[re]:[])))}))):no(t)))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?k({routes:t._loadedRoutes,injector:t._loadedInjector}):zj(e,t,r,this.urlSerializer).pipe(Pe(i=>i?this.configLoader.loadChildren(e,t).pipe(Oe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Kj(t))):k({routes:[],injector:e})}};function iB(n){n.sort((e,t)=>e.value.outlet===j?-1:t.value.outlet===j?1:e.value.outlet.localeCompare(t.value.outlet))}function sB(n){let e=n.value.routeConfig;return e&&e.path===""}function xS(n){let e=[],t=new Set;for(let r of n){if(!sB(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=xS(r.children);e.push(new Dt(r.value,i))}return e.filter(r=>!t.has(r))}function uS(n){return n.data||{}}function dS(n){return n.resolve||{}}function oB(n,e,t,r,i,s){return Pe(o=>nB(n,e,t,r,o.extractedUrl,i,s).pipe(O(({state:a,tree:c})=>W(w({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function aB(n,e){return Pe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return k(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of LS(c))o.add(l);let a=0;return ve(o).pipe(mi(c=>s.has(c)?cB(c,r,n,e):(c.data=Wd(c,c.parent,n).resolve,k(void 0))),Oe(()=>a++),Ns(1),Pe(c=>a===o.size?k(t):tt))})}function LS(n){let e=n.children.map(t=>LS(t)).flat();return[n,...e]}function cB(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!AS(i)&&(s[ac]=i.title),lB(s,n,e,r).pipe(O(o=>(n._resolvedData=o,n.data=Wd(n,n.parent,t).resolve,null)))}function lB(n,e,t,r){let i=t_(n);if(i.length===0)return k({});let s={};return ve(i).pipe(Pe(o=>uB(n[o],e,t,r).pipe(Jt(),Oe(a=>{if(a instanceof ic)throw Gd(new Za,a);s[o]=a}))),Ns(1),va(s),Ir(o=>kS(o)?tt:Ss(o)))}function uB(n,e,t,r){let i=cc(e)??r,s=uo(n,i),o=s.resolve?s.resolve(e,t):Dn(i,()=>s(e,t));return Fr(o)}function Xg(n){return nt(e=>{let t=n(e);return t?ve(t).pipe(O(()=>e)):k(e)})}var FS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===j);return r}getResolvedTitleForRoute(t){return t.data[ac]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:()=>I(dB),providedIn:"root"})}}return n})(),dB=(()=>{class n extends FS{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L(rS))}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),M_=new S("",{providedIn:"root",factory:()=>({})}),hB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=oe({type:n,selectors:[["ng-component"]],standalone:!0,features:[ae],decls:1,vars:0,template:function(r,i){r&1&&H(0,"router-outlet")},dependencies:[N_],encapsulation:2})}}return n})();function k_(n){let e=n.children&&n.children.map(k_),t=e?W(w({},n),{children:e}):w({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==j&&(t.component=hB),t}var P_=new S(""),fB=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(Og)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Fr(t.loadComponent()).pipe(O(VS),Oe(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),As(()=>{this.componentLoaders.delete(t)})),i=new ws(r,()=>new je).pipe(Es());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=pB(r,this.compiler,t,this.onLoadEndListener).pipe(As(()=>{this.childrenLoaders.delete(r)})),o=new ws(s,()=>new je).pipe(Es());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pB(n,e,t,r){return Fr(n.loadChildren()).pipe(O(VS),Pe(i=>i instanceof Na||Array.isArray(i)?k(i):ve(e.compileModuleAsync(i))),O(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(P_,[],{optional:!0,self:!0}).flat()),{routes:o.map(k_),injector:s}}))}function mB(n){return n&&typeof n=="object"&&"default"in n}function VS(n){return mB(n)?n.default:n}var O_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:()=>I(gB),providedIn:"root"})}}return n})(),gB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_B=new S("");var vB=new S(""),yB=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new je,this.transitionAbortSubject=new je,this.configLoader=I(fB),this.environmentInjector=I(Lt),this.urlSerializer=I(S_),this.rootContexts=I(Kd),this.location=I(Ba),this.inputBindingEnabled=I(R_,{optional:!0})!==null,this.titleStrategy=I(FS),this.options=I(M_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(O_),this.createViewTransition=I(_B,{optional:!0}),this.navigationErrorHandler=I(vB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null;let t=i=>this.events.next(new u_(i)),r=i=>this.events.next(new d_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(W(w(w({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new $e({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Qa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pt(s=>s.id!==0),O(s=>W(w({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),nt(s=>{let o=!1,a=!1;return k(s).pipe(nt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",St.SupersededByNewNavigation),tt;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?W(w({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Oi(c.id,this.urlSerializer.serialize(c.rawUrl),d,s_.IgnoredSameUrlNavigation)),c.resolve(!1),tt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return k(c).pipe(nt(d=>{let h=this.transitions?.getValue();return this.events.next(new ec(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?tt:Promise.resolve(d)}),oB(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Oe(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=W(w({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new Bd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:h,source:f,restoredState:m,extras:y}=c,D=new ec(d,this.urlSerializer.serialize(h),f,m);this.events.next(D);let M=DS(this.rootComponentType).snapshot;return this.currentTransition=s=W(w({},c),{targetSnapshot:M,urlAfterRedirects:h,extras:W(w({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,k(s)}else{let d="";return this.events.next(new Oi(c.id,this.urlSerializer.serialize(c.extractedUrl),d,s_.IgnoredByUrlHandlingStrategy)),c.resolve(!1),tt}}),Oe(c=>{let l=new o_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),O(c=>(this.currentTransition=s=W(w({},c),{guards:Dj(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),Fj(this.environmentInjector,c=>this.events.next(c)),Oe(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Gd(this.urlSerializer,c.guardsResult);let l=new a_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Pt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",St.GuardRejected),!1)),Xg(c=>{if(c.guards.canActivateChecks.length)return k(c).pipe(Oe(l=>{let u=new c_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),nt(l=>{let u=!1;return k(l).pipe(aB(this.paramsInheritanceStrategy,this.environmentInjector),Oe({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",St.NoDataFromResolver)}}))}),Oe(l=>{let u=new l_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Xg(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Oe(h=>{u.component=h}),O(()=>{})));for(let h of u.children)d.push(...l(h));return d};return du(l(c.targetSnapshot.root)).pipe(Er(null),ht(1))}),Xg(()=>this.afterPreactivation()),nt(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?ve(u).pipe(O(()=>s)):k(s)}),O(c=>{let l=Ej(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=W(w({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Oe(()=>{this.events.next(new nc)}),Tj(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ht(1),Oe({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Up(this.transitionAbortSubject.pipe(Oe(c=>{throw c}))),As(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",St.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ir(c=>{if(a=!0,MS(c))this.events.next(new er(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),bj(c)?this.events.next(new co(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new tc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let u=Dn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof ic){let{message:d,cancellationCode:h}=Gd(this.urlSerializer,u);this.events.next(new er(s.id,this.urlSerializer.serialize(s.extractedUrl),d,h)),this.events.next(new co(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=t.errorHandler(c);s.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return tt}))}))}cancelNavigationTransition(t,r,i){let s=new er(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IB(n){return n!==Qa}var EB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:()=>I(wB),providedIn:"root"})}}return n})(),D_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},wB=(()=>{class n extends D_{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})()}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),US=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:()=>I(CB),providedIn:"root"})}}return n})(),CB=(()=>{class n extends US{constructor(){super(...arguments),this.location=I(Ba),this.urlSerializer=I(S_),this.options=I(M_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(O_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new tr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=DS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ec)this.stateMemento=this.createStateMemento();else if(t instanceof Oi)this.rawUrlTree=r.initialUrl;else if(t instanceof Bd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof nc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof er&&(t.code===St.GuardRejected||t.code===St.NoDataFromResolver)?this.restoreHistory(r):t instanceof tc?this.restoreHistory(r,!0):t instanceof Lr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof tr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=w(w({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=w(w({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})()}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ka=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ka||{});function bB(n,e){n.events.pipe(Pt(t=>t instanceof Lr||t instanceof er||t instanceof tc||t instanceof Oi),O(t=>t instanceof Lr||t instanceof Oi?Ka.COMPLETE:(t instanceof er?t.code===St.Redirect||t.code===St.SupersededByNewNavigation:!1)?Ka.REDIRECTING:Ka.FAILED),Pt(t=>t!==Ka.REDIRECTING),ht(1)).subscribe(()=>{e()})}function TB(n){throw n}var DB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ln=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=I(Td),this.stateManager=I(US),this.options=I(M_,{optional:!0})||{},this.pendingTasks=I(Di),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(yB),this.urlSerializer=I(S_),this.location=I(Ba),this.urlHandlingStrategy=I(O_),this._events=new je,this.errorHandler=this.options.errorHandler||TB,this.navigated=!1,this.routeReuseStrategy=I(EB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(P_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(R_,{optional:!0}),this.eventsSubscription=new De,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof er&&r.code!==St.Redirect&&r.code!==St.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Lr)this.navigated=!0;else if(r instanceof co){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=w({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||IB(i.source)},o);this.scheduleNavigation(a,Qa,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}NB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=w({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(k_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=w(w({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=wS(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return CS(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Pi(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Qa,null,r)}navigate(t,r={skipLocationChange:!1}){return AB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=w({},DB):r===!1?i=w({},SB):i=r,Pi(t))return sS(this.currentUrlTree,t,i);let s=this.parseUrl(t);return sS(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return bB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function AB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new A(4008,!1)}function NB(n){return!(n instanceof nc)&&!(n instanceof co)}var ho=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new je,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Lr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Pi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:bT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Pi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(N(ln),N(xi),rg("tabindex"),N(An),N(on),N(eo))}}static{this.\u0275dir=Ne({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ue("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Pr("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ni],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ni],replaceUrl:[2,"replaceUrl","replaceUrl",Ni],routerLink:"routerLink"},standalone:!0,features:[Dg,sn]})}}return n})();var RB=new S("");function jS(n,...e){return wt([{provide:P_,multi:!0,useValue:n},[],{provide:xi,useFactory:MB,deps:[ln]},{provide:Zs,multi:!0,useFactory:kB},e.map(t=>t.\u0275providers)])}function MB(n){return n.routerState.root}function kB(){let n=I(Ke);return e=>{let t=n.get(Nn);if(e!==t.components[0])return;let r=n.get(ln),i=n.get(PB);n.get(OB)===1&&r.initialNavigation(),n.get(xB,null,z.Optional)?.setUpPreloading(),n.get(RB,null,z.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var PB=new S("",{factory:()=>new je}),OB=new S("",{providedIn:"root",factory:()=>1});var xB=new S("");var L_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var T=function(n,e){if(!n)throw Fi(e)},Fi=function(n){return new Error("Firebase Database ("+L_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var $S=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},LB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Zd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(t[u],t[d],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($S(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new F_;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},F_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},U_=function(n){let e=$S(n);return Zd.encodeByteArray(e,!0)},uc=function(n){return U_(n).replace(/\./g,"")},dc=function(n){try{return Zd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function HS(n){return WS(void 0,n)}function WS(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!FB(t)||(n[t]=WS(n[t],e[t]));return n}function FB(n){return n!=="__proto__"}function VB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var UB=()=>VB().__FIREBASE_DEFAULTS__,jB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&dc(n[1]);return e&&JSON.parse(e)},j_=()=>{try{return UB()||jB()||BB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},B_=n=>{var e,t;return(t=(e=j_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},zS=n=>{let e=B_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$_=()=>{var n;return(n=j_())===null||n===void 0?void 0:n.config},H_=n=>{var e;return(e=j_())===null||e===void 0?void 0:e[`_${n}`]};var Li=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function GS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[uc(JSON.stringify(t)),uc(JSON.stringify(o)),""].join(".")}function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function qS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KS(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Xd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YS(){let n=Ye();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Mn(){return L_.NODE_CLIENT===!0||L_.NODE_ADMIN===!0}function QS(){try{return typeof indexedDB=="object"}catch{return!1}}function JS(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var $B="FirebaseError",un=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$B,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nr.prototype.create)}},nr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HB(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new un(i,a,r)}};function HB(n,e){return n.replace(WB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var WB=/\{\$([^}]+)}/g;function fo(n){return JSON.parse(n)}function Be(n){return JSON.stringify(n)}var ZS=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=fo(dc(s[0])||""),t=fo(dc(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var XS=function(n){let e=ZS(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},e0=function(n){let e=ZS(n).claims;return typeof e=="object"&&e.admin===!0};function kn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Vi(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function fc(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pc(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function po(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(BS(s)&&BS(o)){if(!po(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function BS(n){return n!==null&&typeof n=="object"}function Vr(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mo(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function go(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var Jd=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function t0(n,e){let t=new V_(n,e);return t.subscribe.bind(t)}var V_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=x_),i.error===void 0&&(i.error=x_),i.complete===void 0&&(i.complete=x_);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function x_(){}function W_(n,e){return`${n} failed: ${e} argument `}var n0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,T(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},mc=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var Hee=4*60*60*1e3;function ft(n){return n&&n._delegate?n._delegate:n}var Ht=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ui="[DEFAULT]";var eh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Li;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qB(e))try{this.getOrInitializeService({instanceIdentifier:Ui})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ui){return this.instances.has(e)}getOptions(e=Ui){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ui){return this.component?this.component.multipleInstances?e:Ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function GB(n){return n===Ui?void 0:n}function qB(n){return n.instantiationMode==="EAGER"}var gc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new eh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var KB=[],he=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(he||{}),YB={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},QB=he.INFO,JB={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},ZB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=JB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ur=class{constructor(e){this.name=e,this._logLevel=QB,this._logHandler=ZB,this._userLogHandler=null,KB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}};var XB=(n,e)=>e.some(t=>n instanceof t),r0,i0;function e2(){return r0||(r0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t2(){return i0||(i0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var s0=new WeakMap,G_=new WeakMap,o0=new WeakMap,z_=new WeakMap,K_=new WeakMap;function n2(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Pn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&s0.set(t,n)}).catch(()=>{}),K_.set(e,n),e}function r2(n){if(G_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});G_.set(n,e)}var q_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return G_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||o0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function a0(n){q_=n(q_)}function i2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(th(this),e,...t);return o0.set(r,e.sort?e.sort():[e]),Pn(r)}:t2().includes(n)?function(...e){return n.apply(th(this),e),Pn(s0.get(this))}:function(...e){return Pn(n.apply(th(this),e))}}function s2(n){return typeof n=="function"?i2(n):(n instanceof IDBTransaction&&r2(n),XB(n,e2())?new Proxy(n,q_):n)}function Pn(n){if(n instanceof IDBRequest)return n2(n);if(z_.has(n))return z_.get(n);let e=s2(n);return e!==n&&(z_.set(n,e),K_.set(e,n)),e}var th=n=>K_.get(n);function nh(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Pn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Pn(o.result),c.oldVersion,c.newVersion,Pn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var o2=["get","getKey","getAll","getAllKeys","count"],a2=["put","add","delete","clear"],Y_=new Map;function c0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Y_.get(e))return Y_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=a2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o2.includes(t)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return Y_.set(e,s),s}a0(n=>W(w({},n),{get:(e,t,r)=>c0(e,t)||n.get(e,t,r),has:(e,t)=>!!c0(e,t)||n.has(e,t)}));var J_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c2(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function c2(n){let e=n.getComponent();return e?.type==="VERSION"}var Z_="@firebase/app",l0="0.10.13";var rr=new Ur("@firebase/app"),l2="@firebase/app-compat",u2="@firebase/analytics-compat",d2="@firebase/analytics",h2="@firebase/app-check-compat",f2="@firebase/app-check",p2="@firebase/auth",m2="@firebase/auth-compat",g2="@firebase/database",_2="@firebase/data-connect",v2="@firebase/database-compat",y2="@firebase/functions",I2="@firebase/functions-compat",E2="@firebase/installations",w2="@firebase/installations-compat",C2="@firebase/messaging",b2="@firebase/messaging-compat",T2="@firebase/performance",D2="@firebase/performance-compat",S2="@firebase/remote-config",A2="@firebase/remote-config-compat",N2="@firebase/storage",R2="@firebase/storage-compat",M2="@firebase/firestore",k2="@firebase/vertexai-preview",P2="@firebase/firestore-compat",O2="firebase",x2="10.14.1";var X_="[DEFAULT]",L2={[Z_]:"fire-core",[l2]:"fire-core-compat",[d2]:"fire-analytics",[u2]:"fire-analytics-compat",[f2]:"fire-app-check",[h2]:"fire-app-check-compat",[p2]:"fire-auth",[m2]:"fire-auth-compat",[g2]:"fire-rtdb",[_2]:"fire-data-connect",[v2]:"fire-rtdb-compat",[y2]:"fire-fn",[I2]:"fire-fn-compat",[E2]:"fire-iid",[w2]:"fire-iid-compat",[C2]:"fire-fcm",[b2]:"fire-fcm-compat",[T2]:"fire-perf",[D2]:"fire-perf-compat",[S2]:"fire-rc",[A2]:"fire-rc-compat",[N2]:"fire-gcs",[R2]:"fire-gcs-compat",[M2]:"fire-fst",[P2]:"fire-fst-compat",[k2]:"fire-vertex","fire-js":"fire-js",[O2]:"fire-js-all"};var _c=new Map,F2=new Map,ev=new Map;function u0(n,e){try{n.container.addComponent(e)}catch(t){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Br(n){let e=n.name;if(ev.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;ev.set(e,n);for(let t of _c.values())u0(t,n);for(let t of F2.values())u0(t,n);return!0}function yc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wt(n){return n.settings!==void 0}var V2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new nr("app","Firebase",V2);var tv=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ht("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}};var $r=x2;function iv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:X_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jr.create("bad-app-name",{appName:String(i)});if(t||(t=$_()),!t)throw jr.create("no-options");let s=_c.get(i);if(s){if(po(t,s.options)&&po(r,s.config))return s;throw jr.create("duplicate-app",{appName:i})}let o=new gc(i);for(let c of ev.values())o.addComponent(c);let a=new tv(t,r,o);return _c.set(i,a),a}function _o(n=X_){let e=_c.get(n);if(!e&&n===X_&&$_())return iv();if(!e)throw jr.create("no-app",{appName:n});return e}function rh(){return Array.from(_c.values())}function xe(n,e,t){var r;let i=(r=L2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(a.join(" "));return}Br(new Ht(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var U2="firebase-heartbeat-database",j2=1,vc="firebase-heartbeat-store",Q_=null;function p0(){return Q_||(Q_=nh(U2,j2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vc)}catch(t){console.warn(t)}}}}).catch(n=>{throw jr.create("idb-open",{originalErrorMessage:n.message})})),Q_}function B2(n){return p(this,null,function*(){try{let t=(yield p0()).transaction(vc),r=yield t.objectStore(vc).get(m0(n));return yield t.done,r}catch(e){if(e instanceof un)rr.warn(e.message);else{let t=jr.create("idb-get",{originalErrorMessage:e?.message});rr.warn(t.message)}}})}function d0(n,e){return p(this,null,function*(){try{let r=(yield p0()).transaction(vc,"readwrite");yield r.objectStore(vc).put(e,m0(n)),yield r.done}catch(t){if(t instanceof un)rr.warn(t.message);else{let r=jr.create("idb-set",{originalErrorMessage:t?.message});rr.warn(r.message)}}})}function m0(n){return`${n.name}!${n.options.appId}`}var $2=1024,H2=30*24*60*60*1e3,nv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new rv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=h0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=H2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}})}getHeartbeatsHeader(){return p(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=h0(),{heartbeatsToSend:r,unsentEntries:i}=W2(this._heartbeatsCache.heartbeats),s=uc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return rr.warn(t),""}})}};function h0(){return new Date().toISOString().substring(0,10)}function W2(n,e=$2){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),f0(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),f0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var rv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return QS()?JS().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield B2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function f0(n){return uc(JSON.stringify({version:2,heartbeats:n})).length}function z2(n){Br(new Ht("platform-logger",e=>new J_(e),"PRIVATE")),Br(new Ht("heartbeat",e=>new nv(e),"PRIVATE")),xe(Z_,l0,n),xe(Z_,l0,"esm2017"),xe("fire-js","")}z2("");var G2="firebase",q2="10.14.1";xe(G2,q2,"app");var Bi=new qn("ANGULARFIRE2_VERSION");function sh(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ic=(n,e)=>{let t=e?[e]:rh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},yo=class{constructor(){return Ic(K2)}},K2="app-check";function vo(){}var ih=class{zone;delegate;constructor(e,t=Np){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},sv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vo,{},vo,vo)),t.pipe(Oe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Io=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ih(Zone.current)),this.insideAngular=t.run(()=>new ih(Zone.current,Ds)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(le))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oh(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Y2(n){return oh().ngZone.runOutsideAngular(()=>n())}function ji(n){return oh().ngZone.run(()=>n())}function Q2(n){return J2(oh())(n)}function J2(n){return function(t){return t=t.lift(new sv(n.ngZone)),t.pipe(vr(n.outsideAngular),_r(n.insideAngular))}}var Z2=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ji(()=>n.apply(void 0,r))},At=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=ji(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vo,{},vo,vo))),r[s]=Z2(r[s],t));let i=Y2(()=>n.apply(this,r));if(!e)if(i instanceof U){let s=oh();return i.pipe(vr(s.outsideAngular),_r(s.insideAngular))}else return ji(()=>i);return i instanceof U?i.pipe(Q2):i instanceof Promise?ji(()=>new Promise((s,o)=>i.then(a=>ji(()=>s(a)),a=>ji(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:ji(()=>i)};var ir=class{constructor(e){return e}},$i=class{constructor(){return rh()}};function X2(n){return n&&n.length===1?n[0]:new ir(_o())}var ov=new S("angularfire2._apps"),e$={provide:ir,useFactory:X2,deps:[[new ot,ov]]},t$={provide:$i,deps:[[new ot,ov]]};function n$(n){return(e,t)=>{let r=t.get(jt);xe("angularfire",Bi.full,"core"),xe("angularfire",Bi.full,"app"),xe("angular",vD.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ir(i)}}function g0(n,...e){return wt([e$,t$,{provide:ov,useFactory:n$(n),multi:!0,deps:[le,Ke,Io,...e]}])}var _0=At(iv,!0);var cv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var E=function(n,e){if(!n)throw Hi(e)},Hi=function(n){return new Error("Firebase Database ("+cv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var v0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},r$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ch={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(t[u],t[d],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(v0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):r$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new lv;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},lv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dv=function(n){let e=v0(n);return ch.encodeByteArray(e,!0)},hv=function(n){return dv(n).replace(/\./g,"")},Ec=function(n){try{return ch.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function y0(n){return I0(void 0,n)}function I0(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!i$(t)||(n[t]=I0(n[t],e[t]));return n}function i$(n){return n!=="__proto__"}function s$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var o$=()=>s$().__FIREBASE_DEFAULTS__,a$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},c$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ec(n[1]);return e&&JSON.parse(e)},l$=()=>{try{return o$()||a$()||c$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var E0=n=>{var e;return(e=l$())===null||e===void 0?void 0:e[`_${n}`]};var Eo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function w0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xn(){return cv.NODE_CLIENT===!0||cv.NODE_ADMIN===!0}function b0(){try{return typeof indexedDB=="object"}catch{return!1}}function T0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var u$="FirebaseError",On=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=u$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sr.prototype.create)}},sr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?d$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new On(i,a,r)}};function d$(n,e){return n.replace(h$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var h$=/\{\$([^}]+)}/g;function wo(n){return JSON.parse(n)}function Le(n){return JSON.stringify(n)}var D0=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=wo(Ec(s[0])||""),t=wo(Ec(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var S0=function(n){let e=D0(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},A0=function(n){let e=D0(n).claims;return typeof e=="object"&&e.admin===!0};function Ln(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Wi(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function uh(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Cc(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function bc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var ah=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function N0(n,e){let t=new uv(n,e);return t.subscribe.bind(t)}var uv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");f$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=av),i.error===void 0&&(i.error=av),i.complete===void 0&&(i.complete=av);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function f$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function av(){}function fv(n,e){return`${n} failed: ${e} argument `}var R0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,E(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Tc=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var Mte=4*60*60*1e3;function Fn(n){return n&&n._delegate?n._delegate:n}var hn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var p$=[],fe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(fe||{}),m$={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},g$=fe.INFO,_$={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},v$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=_$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Hr=class{constructor(e){this.name=e,this._logLevel=g$,this._logHandler=v$,this._userLogHandler=null,p$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?m$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var mv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(E$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function E$(n){let e=n.getComponent();return e?.type==="VERSION"}var gv="@firebase/app",M0="0.10.17";var ar=new Hr("@firebase/app"),w$="@firebase/app-compat",C$="@firebase/analytics-compat",b$="@firebase/analytics",T$="@firebase/app-check-compat",D$="@firebase/app-check",S$="@firebase/auth",A$="@firebase/auth-compat",N$="@firebase/database",R$="@firebase/data-connect",M$="@firebase/database-compat",k$="@firebase/functions",P$="@firebase/functions-compat",O$="@firebase/installations",x$="@firebase/installations-compat",L$="@firebase/messaging",F$="@firebase/messaging-compat",V$="@firebase/performance",U$="@firebase/performance-compat",j$="@firebase/remote-config",B$="@firebase/remote-config-compat",$$="@firebase/storage",H$="@firebase/storage-compat",W$="@firebase/firestore",z$="@firebase/vertexai",G$="@firebase/firestore-compat",q$="firebase",K$="11.1.0";var Y$={[gv]:"fire-core",[w$]:"fire-core-compat",[b$]:"fire-analytics",[C$]:"fire-analytics-compat",[D$]:"fire-app-check",[T$]:"fire-app-check-compat",[S$]:"fire-auth",[A$]:"fire-auth-compat",[N$]:"fire-rtdb",[R$]:"fire-data-connect",[M$]:"fire-rtdb-compat",[k$]:"fire-fn",[P$]:"fire-fn-compat",[O$]:"fire-iid",[x$]:"fire-iid-compat",[L$]:"fire-fcm",[F$]:"fire-fcm-compat",[V$]:"fire-perf",[U$]:"fire-perf-compat",[j$]:"fire-rc",[B$]:"fire-rc-compat",[$$]:"fire-gcs",[H$]:"fire-gcs-compat",[W$]:"fire-fst",[G$]:"fire-fst-compat",[z$]:"fire-vertex","fire-js":"fire-js",[q$]:"fire-js-all"};var Q$=new Map,J$=new Map,k0=new Map;function P0(n,e){try{n.container.addComponent(e)}catch(t){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wr(n){let e=n.name;if(k0.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;k0.set(e,n);for(let t of Q$.values())P0(t,n);for(let t of J$.values())P0(t,n);return!0}function Co(n){return n.settings!==void 0}var Z$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yv=new sr("app","Firebase",Z$);var bo=K$;function or(n,e,t){var r;let i=(r=Y$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(a.join(" "));return}Wr(new hn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var X$="firebase-heartbeat-database",eH=1,Dc="firebase-heartbeat-store",pv=null;function F0(){return pv||(pv=nh(X$,eH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Dc)}catch(t){console.warn(t)}}}}).catch(n=>{throw yv.create("idb-open",{originalErrorMessage:n.message})})),pv}function tH(n){return p(this,null,function*(){try{let t=(yield F0()).transaction(Dc),r=yield t.objectStore(Dc).get(V0(n));return yield t.done,r}catch(e){if(e instanceof On)ar.warn(e.message);else{let t=yv.create("idb-get",{originalErrorMessage:e?.message});ar.warn(t.message)}}})}function O0(n,e){return p(this,null,function*(){try{let r=(yield F0()).transaction(Dc,"readwrite");yield r.objectStore(Dc).put(e,V0(n)),yield r.done}catch(t){if(t instanceof On)ar.warn(t.message);else{let r=yv.create("idb-set",{originalErrorMessage:t?.message});ar.warn(r.message)}}})}function V0(n){return`${n.name}!${n.options.appId}`}var nH=1024,rH=30*24*60*60*1e3,_v=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new vv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=x0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=rH}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ar.warn(r)}})}getHeartbeatsHeader(){return p(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=x0(),{heartbeatsToSend:r,unsentEntries:i}=iH(this._heartbeatsCache.heartbeats),s=hv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ar.warn(t),""}})}};function x0(){return new Date().toISOString().substring(0,10)}function iH(n,e=nH){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),L0(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),L0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var vv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return b0()?T0().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield tH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return O0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return O0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function L0(n){return hv(JSON.stringify({version:2,heartbeats:n})).length}function sH(n){Wr(new hn("platform-logger",e=>new mv(e),"PRIVATE")),Wr(new hn("heartbeat",e=>new _v(e),"PRIVATE")),or(gv,M0,n),or(gv,M0,"esm2017"),or("fire-js","")}sH("");function G0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var q0=G0,K0=new sr("auth","Firebase",G0());var ph=new Hr("@firebase/auth");function cH(n,...e){ph.logLevel<=fe.WARN&&ph.warn(`Auth (${bo}): ${n}`,...e)}function hh(n,...e){ph.logLevel<=fe.ERROR&&ph.error(`Auth (${bo}): ${n}`,...e)}function U0(n,...e){throw Mv(n,...e)}function Rv(n,...e){return Mv(n,...e)}function Y0(n,e,t){let r=Object.assign(Object.assign({},q0()),{[e]:t});return new sr("auth","Firebase",r).create(e,{appName:n.name})}function fh(n){return Y0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return K0.create(n,...e)}function se(n,e,...t){if(!n)throw Mv(e,...t)}function Sc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw hh(e),new Error(e)}function mh(n,e){n||Sc(e)}function lH(){return j0()==="http:"||j0()==="https:"}function j0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function uH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lH()||C0()||"connection"in navigator)?navigator.onLine:!0}function dH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Gi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,mh(t>e,"Short delay should be less than long delay!"),this.isMobile=wc()||lh()}get(){return uH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hH(n,e){mh(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var gh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var fH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var pH=new Gi(3e4,6e4);function Q0(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ih(s,o,a,c){return p(this,arguments,function*(n,e,t,r,i={}){return J0(n,i,()=>p(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=bc(Object.assign({key:n.config.apiKey},u)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let f=Object.assign({method:e,headers:h},l);return w0()||(f.referrerPolicy="no-referrer"),gh.fetch()(Z0(n,n.config.apiHost,t,d),f)}))})}function J0(n,e,t){return p(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},fH),e);try{let i=new wv(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw dh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw dh(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw dh(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw dh(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Y0(n,u,l);U0(n,u)}}catch(i){if(i instanceof On)throw i;U0(n,"network-request-failed",{message:String(i)})}})}function Z0(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?hH(n.config,i):`${n.config.apiScheme}://${i}`}var wv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Rv(this.auth,"network-request-failed")),pH.get())})}};function dh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Rv(n,e,r);return i.customData._tokenResponse=t,i}function mH(n,e){return p(this,null,function*(){return Ih(n,"POST","/v1/accounts:delete",e)})}function X0(n,e){return p(this,null,function*(){return Ih(n,"POST","/v1/accounts:lookup",e)})}function Ac(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function eA(n,e=!1){return p(this,null,function*(){let t=Fn(n),r=yield t.getIdToken(e),i=tA(r);se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ac(Iv(i.auth_time)),issuedAtTime:Ac(Iv(i.iat)),expirationTime:Ac(Iv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Iv(n){return Number(n)*1e3}function tA(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ec(t);return i?JSON.parse(i):(hh("Failed to decode base64 JWT payload"),null)}catch(i){return hh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function B0(n){let e=tA(n);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Cv(n,e,t=!1){return p(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof On&&gH(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function gH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var bv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),t)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Rc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function _h(n){return p(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Cv(n,X0(t,{idToken:r}));se(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rA(s.providerUserInfo):[],a=_H(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Rc(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})}function nA(n){return p(this,null,function*(){let e=Fn(n);yield _h(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function _H(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rA(n){return n.map(e=>{var{providerId:t}=e,r=pi(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function vH(n,e){return p(this,null,function*(){let t=yield J0(n,{},()=>p(this,null,function*(){let r=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=Z0(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",gh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function yH(n,e){return p(this,null,function*(){return Ih(n,"POST","/v2/accounts:revokeToken",Q0(n,e))})}var Nc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){se(e.length!==0,"internal-error");let t=B0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return p(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield vH(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Sc("not implemented")}};function zr(n,e){se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Mc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=pi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Rc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let t=yield Cv(this,this.stsTokenManager.getToken(this.auth,e));return se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return eA(this,e)}reload(){return nA(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield _h(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(Co(this.auth.app))return Promise.reject(fh(this.auth));let e=yield this.getIdToken();return yield Cv(this,mH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let d=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,f=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,y=(a=t.tenantId)!==null&&a!==void 0?a:void 0,D=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,M=(l=t.createdAt)!==null&&l!==void 0?l:void 0,ne=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:re,emailVerified:we,isAnonymous:ut,providerData:ke,stsTokenManager:kt}=t;se(re&&kt,e,"internal-error");let ci=Nc.fromJSON(this.name,kt);se(typeof re=="string",e,"internal-error"),zr(d,e.name),zr(h,e.name),se(typeof we=="boolean",e,"internal-error"),se(typeof ut=="boolean",e,"internal-error"),zr(f,e.name),zr(m,e.name),zr(y,e.name),zr(D,e.name),zr(M,e.name),zr(ne,e.name);let $n=new n({uid:re,auth:e,email:h,emailVerified:we,displayName:d,isAnonymous:ut,photoURL:m,phoneNumber:f,tenantId:y,stsTokenManager:ci,createdAt:M,lastLoginAt:ne});return ke&&Array.isArray(ke)&&($n.providerData=ke.map(dp=>Object.assign({},dp))),D&&($n._redirectEventId=D),$n}static _fromIdTokenResponse(e,t,r=!1){return p(this,null,function*(){let i=new Nc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield _h(s),s})}static _fromGetAccountInfoResponse(e,t,r){return p(this,null,function*(){let i=t.users[0];se(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?rA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Nc;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Rc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var $0=new Map;function zi(n){mh(n instanceof Function,"Expected a class definition");let e=$0.get(n);return e?(mh(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$0.set(n,e),e)}var IH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(t,r){return p(this,null,function*(){this.storage[t]=r})}_get(t){return p(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return p(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Tv=IH;function Ev(n,e,t){return`firebase:${n}:${e}:${t}`}var vh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ev(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ev("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Mc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return p(this,null,function*(){if(!t.length)return new n(zi(Tv),e,r);let i=(yield Promise.all(t.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||zi(Tv),o=Ev(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d=Mc._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function H0(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DH(e))return"Blackberry";if(SH(e))return"Webos";if(wH(e))return"Safari";if((e.includes("chrome/")||CH(e))&&!e.includes("edge/"))return"Chrome";if(TH(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function EH(n=dn()){return/firefox\//i.test(n)}function wH(n=dn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CH(n=dn()){return/crios\//i.test(n)}function bH(n=dn()){return/iemobile/i.test(n)}function TH(n=dn()){return/android/i.test(n)}function DH(n=dn()){return/blackberry/i.test(n)}function SH(n=dn()){return/webos/i.test(n)}function iA(n,e=[]){let t;switch(n){case"Browser":t=H0(dn());break;case"Worker":t=`${H0(dn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bo}/${r}`}var Dv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function AH(t){return p(this,arguments,function*(n,e={}){return Ih(n,"GET","/v2/passwordPolicy",Q0(n,e))})}var NH=6,Sv=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:NH,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Av=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yh(this),this.idTokenSubscription=new yh(this),this.beforeStateQueue=new Dv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zi(t)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield vh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let t=yield X0(this,{idToken:e}),r=yield Mc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var t;if(Co(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield _h(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=dH()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(Co(this.app))return Promise.reject(fh(this));let t=e?Fn(e):null;return t&&se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return p(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return Co(this.app)?Promise.reject(fh(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Co(this.app)?Promise.reject(fh(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(zi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield AH(this),t=new Sv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield yH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&zi(e)||this._popupRedirectResolver;se(t,this,"argument-error"),this.redirectPersistenceManager=yield vh.create(this,[zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return p(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&cH(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function RH(n){return Fn(n)}var yh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=N0(t=>this.observer=t)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var MH={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kH(n){MH=n}function PH(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function OH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(zi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function kv(n,e,t,r){return Fn(n).onIdTokenChanged(e,t,r)}var ine=PH("rcb"),sne=new Gi(3e4,6e4);var one=new Gi(2e3,1e4);var ane=10*60*1e3;var cne=new Gi(3e4,6e4);var lne=new Gi(5e3,15e3);var une=encodeURIComponent("fac");var W0="@firebase/auth",z0="1.8.1";var Nv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function xH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LH(n){Wr(new hn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iA(n)},l=new Av(r,i,s,c);return OH(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Wr(new hn("auth-internal",e=>{let t=RH(e.getProvider("auth").getImmediate());return(r=>new Nv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(W0,z0,xH(n)),or(W0,z0,"esm2017")}var FH=5*60,dne=E0("authIdTokenMaxAge")||FH;function VH(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}kH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Rv("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",VH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LH("Browser");function sA(n){return new U(function(e){var t=kv(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function wA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var CA=wA,bA=new nr("auth","Firebase",wA());var Dh=new Ur("@firebase/auth");function BH(n,...e){Dh.logLevel<=he.WARN&&Dh.warn(`Auth (${$r}): ${n}`,...e)}function wh(n,...e){Dh.logLevel<=he.ERROR&&Dh.error(`Auth (${$r}): ${n}`,...e)}function zt(n,...e){throw Xv(n,...e)}function fn(n,...e){return Xv(n,...e)}function Zv(n,e,t){let r=Object.assign(Object.assign({},CA()),{[e]:t});return new nr("auth","Firebase",r).create(e,{appName:n.name})}function ur(n){return Zv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $H(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&zt(n,"argument-error"),Zv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bA.create(n,...e)}function P(n,e,...t){if(!n)throw Xv(e,...t)}function cr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw wh(e),new Error(e)}function dr(n,e){n||cr(e)}function xv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function HH(){return oA()==="http:"||oA()==="https:"}function oA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function WH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HH()||KS()||"connection"in navigator)?navigator.onLine:!0}function zH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var qi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,dr(t>e,"Short delay should be less than long delay!"),this.isMobile=hc()||Xd()}get(){return WH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ey(n,e){dr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Sh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var GH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var qH=new qi(3e4,6e4);function qr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Kr(s,o,a,c){return p(this,arguments,function*(n,e,t,r,i={}){return TA(n,i,()=>p(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Vr(Object.assign({key:n.config.apiKey},u)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let f=Object.assign({method:e,headers:h},l);return qS()||(f.referrerPolicy="no-referrer"),Sh.fetch()(DA(n,n.config.apiHost,t,d),f)}))})}function TA(n,e,t){return p(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},GH),e);try{let i=new Lv(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Eh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Eh(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Eh(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Zv(n,u,l);zt(n,u)}}catch(i){if(i instanceof un)throw i;zt(n,"network-request-failed",{message:String(i)})}})}function Uc(s,o,a,c){return p(this,arguments,function*(n,e,t,r,i={}){let l=yield Kr(n,e,t,r,i);return"mfaPendingCredential"in l&&zt(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function DA(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?ey(n.config,i):`${n.config.apiScheme}://${i}`}function KH(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Lv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(fn(this.auth,"network-request-failed")),qH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Eh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=fn(n,e,r);return i.customData._tokenResponse=t,i}function aA(n){return n!==void 0&&n.enterprise!==void 0}var Fv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return KH(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function YH(n,e){return p(this,null,function*(){return Kr(n,"GET","/v2/recaptchaConfig",qr(n,e))})}function QH(n,e){return p(this,null,function*(){return Kr(n,"POST","/v1/accounts:delete",e)})}function SA(n,e){return p(this,null,function*(){return Kr(n,"POST","/v1/accounts:lookup",e)})}function kc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ty(n,e=!1){return p(this,null,function*(){let t=ft(n),r=yield t.getIdToken(e),i=ny(r);P(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:kc(Pv(i.auth_time)),issuedAtTime:kc(Pv(i.iat)),expirationTime:kc(Pv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Pv(n){return Number(n)*1e3}function ny(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return wh("JWT malformed, contained fewer than 3 sections"),null;try{let i=dc(t);return i?JSON.parse(i):(wh("Failed to decode base64 JWT payload"),null)}catch(i){return wh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cA(n){let e=ny(n);return P(e,"internal-error"),P(typeof e.exp<"u","internal-error"),P(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Oc(n,e,t=!1){return p(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof un&&JH(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function JH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Vv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),t)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ah(n){return p(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Oc(n,SA(t,{idToken:r}));P(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?AA(s.providerUserInfo):[],a=ZH(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xc(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})}function ry(n){return p(this,null,function*(){let e=ft(n);yield Ah(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function ZH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function AA(n){return n.map(e=>{var{providerId:t}=e,r=pi(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function XH(n,e){return p(this,null,function*(){let t=yield TA(n,{},()=>p(this,null,function*(){let r=Vr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=DA(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Sh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function eW(n,e){return p(this,null,function*(){return Kr(n,"POST","/v2/accounts:revokeToken",qr(n,e))})}var Pc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){P(e.idToken,"internal-error"),P(typeof e.idToken<"u","internal-error"),P(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){P(e.length!==0,"internal-error");let t=cA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return p(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(P(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield XH(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(P(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(P(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(P(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return cr("not implemented")}};function Gr(n,e){P(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Do=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=pi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let t=yield Oc(this,this.stsTokenManager.getToken(this.auth,e));return P(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return ty(this,e)}reload(){return ry(this)}_assign(e){this!==e&&(P(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ah(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(Wt(this.auth.app))return Promise.reject(ur(this.auth));let e=yield this.getIdToken();return yield Oc(this,QH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let d=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,f=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,y=(a=t.tenantId)!==null&&a!==void 0?a:void 0,D=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,M=(l=t.createdAt)!==null&&l!==void 0?l:void 0,ne=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:re,emailVerified:we,isAnonymous:ut,providerData:ke,stsTokenManager:kt}=t;P(re&&kt,e,"internal-error");let ci=Pc.fromJSON(this.name,kt);P(typeof re=="string",e,"internal-error"),Gr(d,e.name),Gr(h,e.name),P(typeof we=="boolean",e,"internal-error"),P(typeof ut=="boolean",e,"internal-error"),Gr(f,e.name),Gr(m,e.name),Gr(y,e.name),Gr(D,e.name),Gr(M,e.name),Gr(ne,e.name);let $n=new n({uid:re,auth:e,email:h,emailVerified:we,displayName:d,isAnonymous:ut,photoURL:m,phoneNumber:f,tenantId:y,stsTokenManager:ci,createdAt:M,lastLoginAt:ne});return ke&&Array.isArray(ke)&&($n.providerData=ke.map(dp=>Object.assign({},dp))),D&&($n._redirectEventId=D),$n}static _fromIdTokenResponse(e,t,r=!1){return p(this,null,function*(){let i=new Pc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ah(s),s})}static _fromGetAccountInfoResponse(e,t,r){return p(this,null,function*(){let i=t.users[0];P(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?AA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Pc;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new xc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var lA=new Map;function lr(n){dr(n instanceof Function,"Expected a class definition");let e=lA.get(n);return e?(dr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lA.set(n,e),e)}var tW=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(t,r){return p(this,null,function*(){this.storage[t]=r})}_get(t){return p(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return p(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Uv=tW;function Ch(n,e,t){return`firebase:${n}:${e}:${t}`}var Nh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ch(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ch("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Do._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return p(this,null,function*(){if(!t.length)return new n(lr(Uv),e,r);let i=(yield Promise.all(t.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||lr(Uv),o=Ch(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d=Do._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function uA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OA(e))return"Blackberry";if(xA(e))return"Webos";if(RA(e))return"Safari";if((e.includes("chrome/")||MA(e))&&!e.includes("edge/"))return"Chrome";if(PA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function NA(n=Ye()){return/firefox\//i.test(n)}function RA(n=Ye()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MA(n=Ye()){return/crios\//i.test(n)}function kA(n=Ye()){return/iemobile/i.test(n)}function PA(n=Ye()){return/android/i.test(n)}function OA(n=Ye()){return/blackberry/i.test(n)}function xA(n=Ye()){return/webos/i.test(n)}function iy(n=Ye()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nW(n=Ye()){var e;return iy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rW(){return YS()&&document.documentMode===10}function LA(n=Ye()){return iy(n)||PA(n)||xA(n)||OA(n)||/windows phone/i.test(n)||kA(n)}function FA(n,e=[]){let t;switch(n){case"Browser":t=uA(Ye());break;case"Worker":t=`${uA(Ye())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$r}/${r}`}var jv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function iW(t){return p(this,arguments,function*(n,e={}){return Kr(n,"GET","/v2/passwordPolicy",qr(n,e))})}var sW=6,Bv=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:sW,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var $v=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rh(this),this.idTokenSubscription=new Rh(this),this.beforeStateQueue=new jv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lr(t)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Nh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let t=yield SA(this,{idToken:e}),r=yield Do._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var t;if(Wt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return P(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Ah(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=zH()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(Wt(this.app))return Promise.reject(ur(this));let t=e?ft(e):null;return t&&P(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return p(this,null,function*(){if(!this._deleted)return e&&P(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return Wt(this.app)?Promise.reject(ur(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Wt(this.app)?Promise.reject(ur(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(lr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield iW(this),t=new Bv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield eW(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&lr(e)||this._popupRedirectResolver;P(t,this,"argument-error"),this.redirectPersistenceManager=yield Nh.create(this,[lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(P(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return p(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&BH(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Yr(n){return ft(n)}var Rh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=t0(t=>this.observer=t)}get next(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Uh={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oW(n){Uh=n}function VA(n){return Uh.loadJS(n)}function aW(){return Uh.recaptchaEnterpriseScript}function cW(){return Uh.gapiScript}function UA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var lW="recaptcha-enterprise",uW="NO_RECAPTCHA",Hv=class{constructor(e){this.type=lW,this.auth=Yr(e)}verify(e="verify",t=!1){return p(this,null,function*(){function r(s){return p(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>p(this,null,function*(){YH(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Fv(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;aA(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(uW)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&aA(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=aW();c.length!==0&&(c+=a),VA(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function dA(n,e,t,r=!1){return p(this,null,function*(){let i=new Hv(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Wv(n,e,t,r){return p(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield dA(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>p(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield dA(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function sy(n,e){let t=yc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(po(s,e??{}))return i;zt(i,"already-initialized")}return t.initialize({options:e})}function dW(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function oy(n,e,t){let r=Yr(n);P(r._canInitEmulator,r,"emulator-config-failed"),P(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=jA(e),{host:o,port:a}=hW(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||fW()}function jA(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function hW(n){let e=jA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:hA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:hA(o)}}}function hA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function fW(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var So=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,t){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}};function pW(n,e){return p(this,null,function*(){return Kr(n,"POST","/v1/accounts:signUp",e)})}function mW(n,e){return p(this,null,function*(){return Uc(n,"POST","/v1/accounts:signInWithPassword",qr(n,e))})}function gW(n,e){return p(this,null,function*(){return Uc(n,"POST","/v1/accounts:signInWithEmailLink",qr(n,e))})}function _W(n,e){return p(this,null,function*(){return Uc(n,"POST","/v1/accounts:signInWithEmailLink",qr(n,e))})}var Lc=class n extends So{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return p(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wv(e,t,"signInWithPassword",mW);case"emailLink":return gW(e,{email:this._email,oobCode:this._password});default:zt(e,"internal-error")}})}_linkToIdToken(e,t){return p(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wv(e,r,"signUpPassword",pW);case"emailLink":return _W(e,{idToken:t,email:this._email,oobCode:this._password});default:zt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function To(n,e){return p(this,null,function*(){return Uc(n,"POST","/v1/accounts:signInWithIdp",qr(n,e))})}var vW="http://localhost",Mh=class n extends So{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=pi(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return To(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,To(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,To(e,t)}buildRequest(){let e={requestUri:vW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vr(t)}return e}};function yW(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IW(n){let e=mo(go(n)).link,t=e?mo(go(e)).deep_link_id:null,r=mo(go(n)).deep_link_id;return(r?mo(go(r)).link:null)||r||t||e||n}var kh=class n{constructor(e){var t,r,i,s,o,a;let c=mo(go(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=yW((i=c.mode)!==null&&i!==void 0?i:null);P(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=IW(e);try{return new n(t)}catch{return null}}};var BA=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Lc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=kh.parseLink(r);return P(i,"argument-error"),Lc._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Fc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ph=class extends Fc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ay=(()=>{class n extends Ph{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Mh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function EW(n,e){return p(this,null,function*(){return Uc(n,"POST","/v1/accounts:signUp",qr(n,e))})}var Ao=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return p(this,null,function*(){let s=yield Do._fromIdTokenResponse(e,r,i),o=fA(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=fA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function fA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var zv=class n extends un{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function $A(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zv._fromErrorAndOperation(n,s,e,r):s})}function wW(n,e,t=!1){return p(this,null,function*(){let r=yield Oc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ao._forOperation(n,"link",r)})}function CW(n,e,t=!1){return p(this,null,function*(){let{auth:r}=n;if(Wt(r.app))return Promise.reject(ur(r));let i="reauthenticate";try{let s=yield Oc(n,$A(r,i,e,n),t);P(s.idToken,r,"internal-error");let o=ny(s.idToken);P(o,r,"internal-error");let{sub:a}=o;return P(n.uid===a,r,"user-mismatch"),Ao._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&zt(r,"user-mismatch"),s}})}function HA(n,e,t=!1){return p(this,null,function*(){if(Wt(n.app))return Promise.reject(ur(n));let r="signIn",i=yield $A(n,r,e),s=yield Ao._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function cy(n,e){return p(this,null,function*(){return HA(Yr(n),e)})}function WA(n){return p(this,null,function*(){let e=Yr(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function ly(n,e,t){return p(this,null,function*(){if(Wt(n.app))return Promise.reject(ur(n));let r=Yr(n),o=yield Wv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EW).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&WA(n),c}),a=yield Ao._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function uy(n,e,t){return Wt(n.app)?Promise.reject(ur(n)):cy(ft(n),BA.credential(e,t)).catch(r=>p(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&WA(n),r}))}function dy(n,e,t,r){return ft(n).onIdTokenChanged(e,t,r)}function hy(n,e,t){return ft(n).beforeAuthStateChanged(e,t)}function fy(n){return ft(n).signOut()}var Oh="__sak";var xh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var bW=1e3,TW=10,DW=(()=>{class n extends xh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);rW()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,TW):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},bW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return p(this,null,function*(){yield mr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return p(this,null,function*(){let r=yield mr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return p(this,null,function*(){yield mr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),zA=DW;var SW=(()=>{class n extends xh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),py=SW;function AW(n){return Promise.all(n.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var NW=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return p(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,o)})),l=yield AW(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function my(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Gv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=my("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Vn(){return window}function RW(n){Vn().location.href=n}function GA(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}function MW(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function kW(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function PW(){return GA()?self:null}var qA="firebaseLocalStorageDb",OW=1,Lh="firebaseLocalStorage",KA="fbase_key",Ki=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function jh(n,e){return n.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function xW(){let n=indexedDB.deleteDatabase(qA);return new Ki(n).toPromise()}function qv(){let n=indexedDB.open(qA,OW);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Lh,{keyPath:KA})}catch(i){t(i)}}),n.addEventListener("success",()=>p(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),yield xW(),e(yield qv()))}))})}function pA(n,e,t){return p(this,null,function*(){let r=jh(n,!0).put({[KA]:e,value:t});return new Ki(r).toPromise()})}function LW(n,e){return p(this,null,function*(){let t=jh(n,!1).get(e),r=yield new Ki(t).toPromise();return r===void 0?null:r.value})}function mA(n,e){let t=jh(n,!0).delete(e);return new Ki(t).toPromise()}var FW=800,VW=3,UW=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield qv(),this.db)})}_withRetries(t){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>VW)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return GA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=NW._getInstance(PW()),this.receiver._subscribe("keyChanged",(t,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var t,r;if(this.activeServiceWorker=yield MW(),!this.activeServiceWorker)return;this.sender=new Gv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||kW()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let t=yield qv();return yield pA(t,Oh,"1"),yield mA(t,Oh),!0}catch{}return!1})}_withPendingWrite(t){return p(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>pA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return p(this,null,function*(){let r=yield this._withRetries(i=>LW(i,t));return this.localCache[t]=r,r})}_remove(t){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>mA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return p(this,null,function*(){let t=yield this._withRetries(s=>{let o=jh(s,!1).getAll();return new Ki(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),FW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),YA=UW;var Xre=UA("rcb"),eie=new qi(3e4,6e4);function QA(n,e){return e?lr(e):(P(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Vc=class extends So{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,t){return To(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function jW(n){return HA(n.auth,new Vc(n),n.bypassAuthState)}function BW(n){let{auth:e,user:t}=n;return P(t,e,"internal-error"),CW(t,new Vc(n),n.bypassAuthState)}function $W(n){return p(this,null,function*(){let{auth:e,user:t}=n;return P(t,e,"internal-error"),wW(t,new Vc(n),n.bypassAuthState)})}var Fh=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jW;case"linkViaPopup":case"linkViaRedirect":return $W;case"reauthViaPopup":case"reauthViaRedirect":return BW;default:zt(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var HW=new qi(2e3,1e4);function gy(n,e,t){return p(this,null,function*(){if(Wt(n.app))return Promise.reject(fn(n,"operation-not-supported-in-this-environment"));let r=Yr(n);$H(n,e,Fc);let i=QA(r,t);return new WW(r,"signInViaPopup",e,i).executeNotNull()})}var WW=(()=>{class n extends Fh{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return p(this,null,function*(){let t=yield this.execute();return P(t,this.auth,"internal-error"),t})}onExecution(){return p(this,null,function*(){dr(this.filter.length===1,"Popup operations only handle one event");let t=my();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,HW.get())};t()}}n.currentPopupAction=null;return n})(),zW="pendingRedirect",bh=new Map,Kv=class n extends Fh{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=bh.get(this.auth._key());if(!e){try{let r=(yield GW(this.resolver,this.auth))?yield mr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return mr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,mr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function GW(n,e){return p(this,null,function*(){let t=YW(e),r=KW(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function qW(n,e){bh.set(n._key(),e)}function KW(n){return lr(n._redirectPersistence)}function YW(n){return Ch(zW,n.config.apiKey,n.name)}function QW(n,e,t=!1){return p(this,null,function*(){if(Wt(n.app))return Promise.reject(ur(n));let r=Yr(n),i=QA(r,e),o=yield new Kv(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var JW=10*60*1e3,Yv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZW(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(fn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JW&&this.cachedEventUids.clear(),this.cachedEventUids.has(gA(e))}saveEventToCache(e){this.cachedEventUids.add(gA(e)),this.lastProcessedEventTime=Date.now()}};function gA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ZW(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JA(n);default:return!1}}function XW(t){return p(this,arguments,function*(n,e={}){return Kr(n,"GET","/v1/projects",e)})}var ez=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tz=/^https?/;function nz(n){return p(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield XW(n);for(let t of e)try{if(rz(t))return}catch{}zt(n,"unauthorized-domain")})}function rz(n){let e=xv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!tz.test(t))return!1;if(ez.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var iz=new qi(3e4,6e4);function _A(){let n=Vn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function sz(n){return new Promise((e,t)=>{var r,i,s;function o(){_A(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_A(),t(fn(n,"network-request-failed"))},timeout:iz.get()})}if(!((i=(r=Vn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Vn().gapi)===null||s===void 0)&&s.load)o();else{let a=UA("iframefcb");return Vn()[a]=()=>{gapi.load?o():t(fn(n,"network-request-failed"))},VA(`${cW()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Th=null,e})}var Th=null;function oz(n){return Th=Th||sz(n),Th}var az=new qi(5e3,15e3),cz="__/auth/iframe",lz="emulator/auth/iframe",uz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hz(n){let e=n.config;P(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?ey(e,lz):`https://${n.config.authDomain}/${cz}`,r={apiKey:e.apiKey,appName:n.name,v:$r},i=dz.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Vr(r).slice(1)}`}function fz(n){return p(this,null,function*(){let e=yield oz(n),t=Vn().gapi;return P(t,n,"internal-error"),e.open({where:document.body,url:hz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uz,dontclear:!0},r=>new Promise((i,s)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=fn(n,"network-request-failed"),a=Vn().setTimeout(()=>{s(o)},az.get());function c(){Vn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var pz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mz=500,gz=600,_z="_blank",vz="http://localhost",Vh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function yz(n,e,t,r=mz,i=gz){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},pz),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ye().toLowerCase();t&&(a=MA(l)?_z:t),NA(l)&&(e=e||vz,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(nW(l)&&a!=="_self")return Iz(e||"",a),new Vh(null);let d=window.open(e||"",a,u);P(d,n,"popup-blocked");try{d.focus()}catch{}return new Vh(d)}function Iz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Ez="__/auth/handler",wz="emulator/auth/handler",Cz=encodeURIComponent("fac");function vA(n,e,t,r,i,s){return p(this,null,function*(){P(n.config.authDomain,n,"auth-domain-config-required"),P(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:$r,eventId:i};if(e instanceof Fc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",fc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Ph){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${Cz}=${encodeURIComponent(c)}`:"";return`${bz(n)}?${Vr(a).slice(1)}${l}`})}function bz({config:n}){return n.emulator?ey(n,wz):`https://${n.authDomain}/${Ez}`}var Ov="webStorageSupport",Qv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=py,this._completeRedirectFn=QW,this._overrideRedirectResult=qW}_openPopup(e,t,r,i){return p(this,null,function*(){var s;dr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield vA(e,t,r,xv(),i);return yz(e,o,my())})}_openRedirect(e,t,r,i){return p(this,null,function*(){yield this._originValidation(e);let s=yield vA(e,t,r,xv(),i);return RW(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(dr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return p(this,null,function*(){let t=yield fz(e),r=new Yv(e);return t.register("authEvent",i=>(P(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ov,{type:Ov},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Ov];o!==void 0&&t(!!o),zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return LA()||RA()||iy()}},ZA=Qv;var yA="@firebase/auth",IA="1.7.9";var Jv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Tz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dz(n){Br(new Ht("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;P(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FA(n)},l=new $v(r,i,s,c);return dW(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Br(new Ht("auth-internal",e=>{let t=Yr(e.getProvider("auth").getImmediate());return(r=>new Jv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xe(yA,IA,Tz(n)),xe(yA,IA,"esm2017")}var Sz=5*60,Az=H_("authIdTokenMaxAge")||Sz,EA=null,Nz=n=>e=>p(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Az)return;let i=t?.token;EA!==i&&(EA=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function _y(n=_o()){let e=yc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=sy(n,{popupRedirectResolver:ZA,persistence:[YA,zA,py]}),r=H_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Nz(s.toString());hy(t,o,()=>o(t.currentUser)),dy(t,a=>o(a))}}let i=B_("auth");return i&&oy(t,`http://${i}`),t}function Rz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}oW({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=fn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Rz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dz("Browser");var XA="auth",hr=class{constructor(e){return e}},jc=class{constructor(){return Ic(XA)}};var vy=new S("angularfire2.auth-instances");function yG(n,e){let t=sh(XA,n,e);return t&&new hr(t)}function IG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new hr(r)}}var EG={provide:jc,deps:[[new ot,vy]]},wG={provide:hr,useFactory:yG,deps:[[new ot,vy],ir]};function eN(n,...e){return xe("angularfire",Bi.full,"auth"),wt([wG,EG,{provide:vy,useFactory:IG(n),multi:!0,deps:[le,Ke,Io,$i,[new ot,yo],...e]}])}var tN=At(sA,!0);var nN=At(ly,!0);var rN=At(_y,!0);var iN=At(uy,!0);var sN=At(gy,!0);var oN=At(fy,!0);var Qr=class n{constructor(e){this.auth=e;e.onAuthStateChanged(t=>{this.isAuthenticated=!!t})}isAuthenticated=!1;register({email:e,password:t}){return nN(this.auth,e,t)}login({email:e,password:t}){return iN(this.auth,e,t)}loginWithGoogle(){return sN(this.auth,new ay)}logout(){return oN(this.auth)}static \u0275fac=function(t){return new(t||n)(L(hr))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function CG(n,e){n&1&&(_(0,"li",7)(1,"a",11),v(2,"Login"),g()())}function bG(n,e){n&1&&(_(0,"li",7)(1,"a",12),v(2,"Signin"),g()())}function TG(n,e){n&1&&(_(0,"li",13)(1,"a",14),v(2,"Inicio "),H(3,"span",15),g()())}function DG(n,e){n&1&&(_(0,"li",7)(1,"a",16),v(2,"Nueva Tarea"),g()())}function SG(n,e){n&1&&(_(0,"a",22),v(1," Dashboard "),g())}function AG(n,e){n&1&&(_(0,"a",23),v(1,"Stats"),g())}function NG(n,e){n&1&&(_(0,"a",24),v(1,"Profile"),g())}function RG(n,e){if(n&1&&(_(0,"li",17),$(1,SG,2,0,"a",18),_(2,"ul",19)(3,"li"),$(4,AG,2,0,"a",20),g(),_(5,"li"),$(6,NG,2,0,"a",21),g()()()),n&2){let t=de();C(),b("ngIf",t.isAuthenticated),C(3),b("ngIf",t.isAuthenticated),C(2),b("ngIf",t.isAuthenticated)}}function MG(n,e){if(n&1){let t=Or();_(0,"a",25),ue("click",function(){Vt(t);let i=de();return Ut(i.logout())}),v(1,"SignOut"),g()}}var pt=class n{constructor(e,t){this.router=e;this.servicelog=t}isAuthenticated=!1;ngOnInit(){this.isAuthenticated=this.servicelog.isAuthenticated}logout(){this.servicelog.logout().then(()=>this.router.navigate(["/login"])).catch(e=>console.log(e))}static \u0275fac=function(t){return new(t||n)(N(ln),N(Qr))};static \u0275cmp=oe({type:n,selectors:[["app-navbar"]],standalone:!0,features:[ae],decls:15,vars:6,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["routerLink","/home",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["class","nav-item active",4,"ngIf"],["class","nav-item dropdown",4,"ngIf"],["class","nav-link","role","button","routerLink","/signin",3,"click",4,"ngIf"],["routerLink","/login",1,"nav-link"],["routerLink","/signin",1,"nav-link"],[1,"nav-item","active"],["routerLink","/tasks",1,"nav-link"],[1,"sr-only"],["routerLink","/taskform",1,"nav-link"],[1,"nav-item","dropdown"],["class","nav-link dropdown-toggle","routerLink","/dashboard","role","button","data-bs-toggle","dropdown","aria-expanded","false",4,"ngIf"],[1,"dropdown-menu"],["class","dropdown-item","routerLink","/dashboard/stats",4,"ngIf"],["class","dropdown-item","routerLink","/dashboard/profile",4,"ngIf"],["routerLink","/dashboard","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["routerLink","/dashboard/stats",1,"dropdown-item"],["routerLink","/dashboard/profile",1,"dropdown-item"],["role","button","routerLink","/signin",1,"nav-link",3,"click"]],template:function(t,r){t&1&&(_(0,"nav",0)(1,"a",1),v(2,"TaskManager"),g(),_(3,"button",2),H(4,"span",3),g(),_(5,"div",4)(6,"ul",5),$(7,CG,3,0,"li",6)(8,bG,3,0,"li",6),H(9,"li",7),$(10,TG,4,0,"li",8)(11,DG,3,0,"li",6)(12,RG,7,3,"li",9),_(13,"li",7),$(14,MG,2,0,"a",10),g()()()()),t&2&&(C(7),b("ngIf",!r.isAuthenticated),C(),b("ngIf",!r.isAuthenticated),C(2),b("ngIf",r.isAuthenticated),C(),b("ngIf",r.isAuthenticated),C(),b("ngIf",r.isAuthenticated),C(2),b("ngIf",r.isAuthenticated))},dependencies:[ho,He,Bt]})};var mt=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=oe({type:n,selectors:[["app-footer"]],standalone:!0,features:[ae],decls:19,vars:0,consts:[[1,"py-3","my-4"],[1,"nav","justify-content-center","border-bottom","pb-3","mb-3"],[1,"nav-item"],["href","#",1,"nav-link","px-2","text-body-secondary"],[1,"text-center","text-body-secondary"]],template:function(t,r){t&1&&(_(0,"footer",0)(1,"ul",1)(2,"li",2)(3,"a",3),v(4,"Home"),g()(),_(5,"li",2)(6,"a",3),v(7,"Features"),g()(),_(8,"li",2)(9,"a",3),v(10,"Pricing"),g()(),_(11,"li",2)(12,"a",3),v(13,"FAQs"),g()(),_(14,"li",2)(15,"a",3),v(16,"About"),g()()(),_(17,"p",4),v(18,"\xA9 2024 Company, Inc"),g()())}})};var _N=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(N(An),N(on))}}static{this.\u0275dir=Ne({type:n})}}return n})(),Ty=(()=>{class n extends _N{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})()}static{this.\u0275dir=Ne({type:n,features:[an]})}}return n})(),Jh=new S("");var kG={provide:Jh,useExisting:Kn(()=>Xr),multi:!0};function PG(){let n=Xn()?Xn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var OG=new S(""),Xr=(()=>{class n extends _N{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!PG())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(N(An),N(on),N(OG,8))}}static{this.\u0275dir=Ne({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ue("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Si([kG]),an]})}}return n})();function Jr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function vN(n){return n!=null&&typeof n.length=="number"}var Dy=new S(""),yN=new S(""),xG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,pe=class{static min(e){return LG(e)}static max(e){return FG(e)}static required(e){return IN(e)}static requiredTrue(e){return VG(e)}static email(e){return UG(e)}static minLength(e){return jG(e)}static maxLength(e){return BG(e)}static pattern(e){return $G(e)}static nullValidator(e){return Hh(e)}static compose(e){return DN(e)}static composeAsync(e){return AN(e)}};function LG(n){return e=>{if(Jr(e.value)||Jr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function FG(n){return e=>{if(Jr(e.value)||Jr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function IN(n){return Jr(n.value)?{required:!0}:null}function VG(n){return n.value===!0?null:{required:!0}}function UG(n){return Jr(n.value)||xG.test(n.value)?null:{email:!0}}function jG(n){return e=>Jr(e.value)||!vN(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function BG(n){return e=>vN(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function $G(n){if(!n)return Hh;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Jr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Hh(n){return null}function EN(n){return n!=null}function wN(n){return Ai(n)?ve(n):n}function CN(n){let e={};return n.forEach(t=>{e=t!=null?w(w({},e),t):e}),Object.keys(e).length===0?null:e}function bN(n,e){return e.map(t=>t(n))}function HG(n){return!n.validate}function TN(n){return n.map(e=>HG(e)?e:t=>e.validate(t))}function DN(n){if(!n)return null;let e=n.filter(EN);return e.length==0?null:function(t){return CN(bN(t,e))}}function SN(n){return n!=null?DN(TN(n)):null}function AN(n){if(!n)return null;let e=n.filter(EN);return e.length==0?null:function(t){let r=bN(t,e).map(wN);return kp(r).pipe(O(CN))}}function NN(n){return n!=null?AN(TN(n)):null}function cN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RN(n){return n._rawValidators}function MN(n){return n._rawAsyncValidators}function Iy(n){return n?Array.isArray(n)?n:[n]:[]}function Wh(n,e){return Array.isArray(n)?n.includes(e):n===e}function lN(n,e){let t=Iy(e);return Iy(n).forEach(i=>{Wh(t,i)||t.push(i)}),t}function uN(n,e){return Iy(e).filter(t=>!Wh(n,t))}var zh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=NN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Mo=class extends zh{get formDirective(){return null}get path(){return null}},zc=class extends zh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Gh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},WG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ase=W(w({},WG),{"[class.ng-submitted]":"isSubmitted"}),Po=(()=>{class n extends Gh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(N(zc,2))}}static{this.\u0275dir=Ne({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Cd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[an]})}}return n})(),Oo=(()=>{class n extends Gh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(N(Mo,10))}}static{this.\u0275dir=Ne({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Cd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[an]})}}return n})();var Bc="VALID",Bh="INVALID",No="PENDING",$c="DISABLED",Zr=class{},qh=class extends Zr{constructor(e,t){super(),this.value=e,this.source=t}},Hc=class extends Zr{constructor(e,t){super(),this.pristine=e,this.source=t}},Wc=class extends Zr{constructor(e,t){super(),this.touched=e,this.source=t}},Ro=class extends Zr{constructor(e,t){super(),this.status=e,this.source=t}},Ey=class extends Zr{constructor(e){super(),this.source=e}},wy=class extends Zr{constructor(e){super(),this.source=e}};function Sy(n){return(Zh(n)?n.validators:n)||null}function zG(n){return Array.isArray(n)?SN(n):n||null}function Ay(n,e){return(Zh(e)?e.asyncValidators:n)||null}function GG(n){return Array.isArray(n)?NN(n):n||null}function Zh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function kN(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new A(1e3,"");if(!r[t])throw new A(1001,"")}function PN(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new A(1002,"")})}var ko=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ja(()=>this.statusReactive()),this.statusReactive=Va(void 0),this._pristine=ja(()=>this.pristineReactive()),this.pristineReactive=Va(!0),this._touched=ja(()=>this.touchedReactive()),this.touchedReactive=Va(!1),this._events=new je,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Zn(this.statusReactive)}set status(e){Zn(()=>this.statusReactive.set(e))}get valid(){return this.status===Bc}get invalid(){return this.status===Bh}get pending(){return this.status==No}get disabled(){return this.status===$c}get enabled(){return this.status!==$c}get pristine(){return Zn(this.pristineReactive)}set pristine(e){Zn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Zn(this.touchedReactive)}set touched(e){Zn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uN(e,this._rawAsyncValidators))}hasValidator(e){return Wh(this._rawValidators,e)}hasAsyncValidator(e){return Wh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(W(w({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Wc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Wc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(W(w({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Hc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Hc(!0,r))}markAsPending(e={}){this.status=No;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ro(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(W(w({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$c,this.errors=null,this._forEachChild(i=>{i.disable(W(w({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qh(this.value,r)),this._events.next(new Ro(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(W(w({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bc,this._forEachChild(r=>{r.enable(W(w({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(W(w({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bc||this.status===No)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qh(this.value,t)),this._events.next(new Ro(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(W(w({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$c:Bc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=No,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=wN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ro(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Se,this.statusChanges=new Se}_calculateStatus(){return this._allControlsDisabled()?$c:this.errors?Bh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(No)?No:this._anyControlsHaveStatus(Bh)?Bh:Bc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Hc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Wc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Zh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=zG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=GG(this._rawAsyncValidators)}},Kh=class extends ko{constructor(e,t,r){super(Sy(t),Ay(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){PN(this,!0,e),Object.keys(e).forEach(r=>{kN(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Cy=class extends Kh{};var Ny=new S("CallSetDisabledState",{providedIn:"root",factory:()=>Xh}),Xh="always";function qG(n,e){return[...e.path,n]}function dN(n,e,t=Xh){Ry(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),YG(n,e),JG(n,e),QG(n,e),KG(n,e)}function hN(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Qh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Yh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KG(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Ry(n,e){let t=RN(n);e.validator!==null?n.setValidators(cN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=MN(n);e.asyncValidator!==null?n.setAsyncValidators(cN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Yh(e._rawValidators,i),Yh(e._rawAsyncValidators,i)}function Qh(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=RN(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=MN(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Yh(e._rawValidators,r),Yh(e._rawAsyncValidators,r),t}function YG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ON(n,e)})}function QG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ON(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function ON(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function JG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function ZG(n,e){n==null,Ry(n,e)}function XG(n,e){return Qh(n,e)}function eq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function tq(n){return Object.getPrototypeOf(n.constructor)===Ty}function nq(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function rq(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Xr?t=s:tq(s)?r=s:i=s}),i||r||t||null}function iq(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var $h=class extends ko{constructor(e=null,t,r){super(Sy(t),Ay(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(pN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){pN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var sq=n=>n instanceof $h;var xo=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ne({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var xN=new S("");var oq={provide:Mo,useExisting:Kn(()=>Yi)},Yi=(()=>{class n extends Mo{get submitted(){return Zn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=ja(()=>this._submittedReactive()),this._submittedReactive=Va(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Se,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return dN(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){hN(t.control||null,t,!1),iq(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),nq(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Ey(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new wy(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(hN(r||null,t),sq(i)&&(dN(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);ZG(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&XG(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ry(this.form,this),this._oldForm&&Qh(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(N(Dy,10),N(yN,10),N(Ny,8))}}static{this.\u0275dir=Ne({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ue("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Si([oq]),an,sn]})}}return n})();var aq={provide:zc,useExisting:Kn(()=>Qi)},Qi=(()=>{class n extends zc{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Se,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=rq(this,s)}ngOnChanges(t){this._added||this._setUpControl(),eq(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return qG(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(N(Mo,13),N(Dy,10),N(yN,10),N(Jh,10),N(xN,8))}}static{this.\u0275dir=Ne({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Si([aq]),an,sn]})}}return n})(),cq={provide:Jh,useExisting:Kn(()=>ef),multi:!0};function LN(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function lq(n){return n.split(":")[0]}var ef=(()=>{class n extends Ty{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=LN(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=lq(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})()}static{this.\u0275dir=Ne({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ue("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Si([cq]),an]})}}return n})(),FN=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(LN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(N(on),N(An),N(ef,9))}}static{this.\u0275dir=Ne({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),uq={provide:Jh,useExisting:Kn(()=>VN),multi:!0};function mN(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function dq(n){return n.split(":")[0]}var VN=(()=>{class n extends Ty{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=dq(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})()}static{this.\u0275dir=Ne({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Si([uq]),an]})}}return n})(),UN=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(mN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(mN(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(N(on),N(An),N(VN,9))}}static{this.\u0275dir=Ne({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var hq=(()=>{class n{constructor(){this._validator=Hh}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Hh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ne({type:n,features:[sn]})}}return n})();var fq={provide:Dy,useExisting:Kn(()=>My),multi:!0};var My=(()=>{class n extends hq{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ni,this.createValidator=t=>IN}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})()}static{this.\u0275dir=Ne({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Pr("required",i._enabled?"":null)},inputs:{required:"required"},features:[Si([fq]),an]})}}return n})();var jN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qn({type:n})}static{this.\u0275inj=Yn({})}}return n})(),by=class extends ko{constructor(e,t,r){super(Sy(t),Ay(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){PN(this,!1,e),e.forEach((r,i)=>{kN(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function gN(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Lo=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return gN(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Kh(i,s)}record(t,r=null){let i=this._reduceControls(t);return new Cy(i,r)}control(t,r,i){let s={};return this.useNonNullable?(gN(r)?s=r:(s.validators=r,s.asyncValidators=i),new $h(t,W(w({},s),{nonNullable:!0}))):new $h(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new by(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof $h)return t;if(t instanceof ko)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var tf=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ny,useValue:t.callSetDisabledState??Xh}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qn({type:n})}static{this.\u0275inj=Yn({imports:[jN]})}}return n})(),Fo=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xN,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ny,useValue:t.callSetDisabledState??Xh}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qn({type:n})}static{this.\u0275inj=Yn({imports:[jN]})}}return n})();var BN=(n,e)=>({"is-valid":n,"is-invalid":e});function pq(n,e){n&1&&(_(0,"small"),v(1,"El email es obligatorio."),g())}function mq(n,e){n&1&&(_(0,"small"),v(1,"Email invalido."),g())}function gq(n,e){if(n&1&&(_(0,"div",18),$(1,pq,2,0,"small",19)(2,mq,2,0,"small",19),g()),n&2){let t,r,i=de();C(),b("ngIf",(t=i.formLogin.get("email"))==null?null:t.hasError("required")),C(),b("ngIf",(r=i.formLogin.get("email"))==null?null:r.hasError("email"))}}function _q(n,e){n&1&&(_(0,"small"),v(1,"El password es obligatorio."),g())}function vq(n,e){n&1&&(_(0,"small"),v(1,"El password debe tener al menos 6 caracteres."),g())}function yq(n,e){if(n&1&&(_(0,"div",18),$(1,_q,2,0,"small",19)(2,vq,2,0,"small",19),g()),n&2){let t,r,i=de();C(),b("ngIf",(t=i.formLogin.get("password"))==null?null:t.hasError("required")),C(),b("ngIf",(r=i.formLogin.get("password"))==null?null:r.hasError("minlength"))}}var nf=class n{constructor(e,t,r){this.loginservice=t;this.router=r;this.formLogin=e.group({email:["",[pe.required,pe.email]],password:["",[pe.required,pe.minLength(6)]]})}formLogin;Onsubmit(){this.formLogin.valid&&(console.log("El login es valido"),this.loginservice.login(this.formLogin.value).then(e=>this.router.navigate(["/home"])).catch(e=>console.log(e)),console.log(this.loginservice.isAuthenticated))}loginWithGoogle(){this.loginservice.loginWithGoogle().then(e=>this.router.navigate(["/home"])).catch(e=>console.log(e))}static \u0275fac=function(t){return new(t||n)(N(Lo),N(Qr),N(ln))};static \u0275cmp=oe({type:n,selectors:[["app-login"]],standalone:!0,features:[ae],decls:28,vars:11,consts:[[1,"container","d-flex","align-items-center","justify-content-center",2,"height","100vh","background-color","#f8f9fa"],[1,"card","shadow-lg","p-4",2,"width","30rem"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","exampleInputEmail1"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Enter email","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","exampleInputPassword1"],["type","password","id","exampleInputPassword1","placeholder","Password","formControlName","password",1,"form-control",3,"ngClass"],[1,"form-group","form-check","mb-3"],["type","checkbox","id","exampleCheck1",1,"form-check-input"],["for","exampleCheck1",1,"form-check-label"],[1,"d-flex","justify-content-center","mb-3"],["type","submit",1,"btn","btn-primary","w-100"],[1,"d-flex","justify-content-center"],[1,"btn","btn-danger","w-100",3,"click"],[1,"bi","bi-google","m-1"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,r){if(t&1&&(H(0,"app-navbar"),_(1,"div",0)(2,"div",1)(3,"h1",2),v(4,"BIENVENIDO A TASKMANAGER"),g(),_(5,"form",3),ue("ngSubmit",function(){return r.Onsubmit()}),_(6,"div",4)(7,"label",5),v(8,"Email address"),g(),H(9,"input",6),$(10,gq,3,2,"div",7),g(),_(11,"div",4)(12,"label",8),v(13,"Password"),g(),H(14,"input",9),$(15,yq,3,2,"div",7),g(),_(16,"div",10),H(17,"input",11),_(18,"label",12),v(19,"Check me out"),g()(),_(20,"div",13)(21,"button",14),v(22,"Submit"),g()(),_(23,"div",15)(24,"button",16),ue("click",function(){return r.loginWithGoogle()}),H(25,"i",17),v(26,"Login with Google "),g()()()()(),H(27,"app-footer")),t&2){let i,s,o,a;C(5),b("formGroup",r.formLogin),C(4),b("ngClass",ct(5,BN,((i=r.formLogin.get("email"))==null?null:i.valid)&&((i=r.formLogin.get("email"))==null?null:i.touched),((i=r.formLogin.get("email"))==null?null:i.invalid)&&((i=r.formLogin.get("email"))==null?null:i.touched))),C(),b("ngIf",((s=r.formLogin.get("email"))==null?null:s.invalid)&&((s=r.formLogin.get("email"))==null?null:s.touched)),C(4),b("ngClass",ct(8,BN,((o=r.formLogin.get("password"))==null?null:o.valid)&&((o=r.formLogin.get("password"))==null?null:o.touched),((o=r.formLogin.get("password"))==null?null:o.invalid)&&((o=r.formLogin.get("password"))==null?null:o.touched))),C(),b("ngIf",((a=r.formLogin.get("password"))==null?null:a.invalid)&&((a=r.formLogin.get("password"))==null?null:a.touched))}},dependencies:[pt,mt,Fo,xo,Xr,Po,Oo,Yi,Qi,He,xr,Bt]})};var $N=n=>{let e=n.get("password")?.value,t=n.get("confirmPassword")?.value;return e==t?null:{passwordsMismatch:!0}};var Vo=(n,e)=>({"is-valid":n,"is-invalid":e});function Iq(n,e){n&1&&(_(0,"small"),v(1,"El nombre es obligatorio."),g())}function Eq(n,e){n&1&&(_(0,"small"),v(1,"Nombre demasiado largo."),g())}function wq(n,e){if(n&1&&(_(0,"div",21),$(1,Iq,2,0,"small",22)(2,Eq,2,0,"small",22),g()),n&2){let t,r,i=de();C(),b("ngIf",(t=i.formSignin.get("name"))==null?null:t.hasError("required")),C(),b("ngIf",(r=i.formSignin.get("name"))==null?null:r.hasError("maxlength"))}}function Cq(n,e){n&1&&(_(0,"small"),v(1,"El apellido es obligatorio."),g())}function bq(n,e){n&1&&(_(0,"small"),v(1,"Apellido demasiado largo."),g())}function Tq(n,e){n&1&&(_(0,"small"),v(1,"Apellido demasiado corto."),g())}function Dq(n,e){if(n&1&&(_(0,"div",21),$(1,Cq,2,0,"small",22)(2,bq,2,0,"small",22)(3,Tq,2,0,"small",22),g()),n&2){let t,r,i,s=de();C(),b("ngIf",(t=s.formSignin.get("lastName"))==null?null:t.hasError("required")),C(),b("ngIf",(r=s.formSignin.get("lastName"))==null?null:r.hasError("maxlength")),C(),b("ngIf",(i=s.formSignin.get("lastName"))==null?null:i.hasError("minlength"))}}function Sq(n,e){n&1&&(_(0,"small"),v(1,"El email es obligatorio."),g())}function Aq(n,e){n&1&&(_(0,"small"),v(1,"Email invalido."),g())}function Nq(n,e){if(n&1&&(_(0,"div",21),$(1,Sq,2,0,"small",22)(2,Aq,2,0,"small",22),g()),n&2){let t,r,i=de();C(),b("ngIf",(t=i.formSignin.get("email"))==null?null:t.hasError("required")),C(),b("ngIf",(r=i.formSignin.get("email"))==null?null:r.hasError("email"))}}function Rq(n,e){n&1&&(_(0,"small"),v(1,"El nombre de usuario es obligatorio."),g())}function Mq(n,e){n&1&&(_(0,"small"),v(1,"Nombre de usuario demasiado corto."),g())}function kq(n,e){if(n&1&&(_(0,"div",21),$(1,Rq,2,0,"small",22)(2,Mq,2,0,"small",22),g()),n&2){let t,r,i=de();C(),b("ngIf",(t=i.formSignin.get("username"))==null?null:t.hasError("required")),C(),b("ngIf",(r=i.formSignin.get("username"))==null?null:r.hasError("minlength"))}}function Pq(n,e){n&1&&(_(0,"small"),v(1,"La contrase\xF1a es obligatoria."),g())}function Oq(n,e){n&1&&(_(0,"small"),v(1,"La contrase\xF1a debe tener al menos 6 caracteres."),g())}function xq(n,e){if(n&1&&(_(0,"div",21),$(1,Pq,2,0,"small",22)(2,Oq,2,0,"small",22),g()),n&2){let t,r,i=de();C(),b("ngIf",(t=i.formSignin.get("password"))==null?null:t.hasError("required")),C(),b("ngIf",(r=i.formSignin.get("password"))==null?null:r.hasError("minlength"))}}function Lq(n,e){n&1&&(_(0,"div",23),v(1," Las contrase\xF1as no coinciden. "),g())}var rf=class n{constructor(e,t,r){this.formBuilder=e;this.registerservice=t;this.router=r;this.formSignin=this.formBuilder.group({name:["",[pe.required,pe.maxLength(50)]],lastName:["",[pe.required,pe.maxLength(50),pe.minLength(5)]],email:["",[pe.required,pe.email]],username:["",[pe.required,pe.maxLength(50),pe.minLength(5)]],password:["",[pe.required,pe.minLength(6)]],confirmPassword:["",[pe.required]]},{validators:$N})}formSignin;Onsubmit(){this.formSignin.valid&&(console.log("Formulario Valido"),this.registerservice.register(this.formSignin.value).then(e=>{console.log(e),this.router.navigate(["/login"])}).catch(e=>console.log(e)))}static \u0275fac=function(t){return new(t||n)(N(Lo),N(Qr),N(ln))};static \u0275cmp=oe({type:n,selectors:[["app-signin"]],standalone:!0,features:[ae],decls:41,vars:31,consts:[[1,"container","d-flex","align-items-center","justify-content-center",2,"height","100vh"],[1,"card","shadow-lg","p-4",2,"width","35rem"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese su nombre","required","","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","apellidos",1,"form-label"],["type","text","id","apellidos","placeholder","Ingrese sus apellidos","required","","formControlName","lastName",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Ingrese su email","required","","formControlName","email",1,"form-control",3,"ngClass"],["for","usuario",1,"form-label"],["type","text","id","usuario","placeholder","Ingrese su nombre de usuario","required","","formControlName","username",1,"form-control",3,"ngClass"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Ingrese su contrase\xF1a","formControlName","password",1,"form-control",3,"ngClass"],["for","confirmpassword",1,"form-label"],["type","password","id","confirmpassword","placeholder","Confirme su contrase\xF1a","formControlName","confirmPassword",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","w-100",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],[1,"text-danger"]],template:function(t,r){if(t&1&&(H(0,"app-navbar"),_(1,"div",0)(2,"div",1)(3,"h1",2),v(4,"REG\xCDSTRATE!!"),g(),_(5,"form",3),ue("ngSubmit",function(){return r.Onsubmit()}),_(6,"div",4)(7,"label",5),v(8,"Nombre"),g(),H(9,"input",6),$(10,wq,3,2,"div",7),g(),_(11,"div",4)(12,"label",8),v(13,"Apellidos"),g(),H(14,"input",9),$(15,Dq,4,3,"div",7),g(),_(16,"div",4)(17,"label",10),v(18,"Email"),g(),H(19,"input",11),$(20,Nq,3,2,"div",7),g(),_(21,"div",4)(22,"label",12),v(23,"Usuario"),g(),H(24,"input",13),$(25,kq,3,2,"div",7),g(),_(26,"div",4)(27,"label",14),v(28,"Contrase\xF1a"),g(),H(29,"input",15),$(30,xq,3,2,"div",7),g(),_(31,"div",4)(32,"label",16),v(33,"Confirma Contrase\xF1a"),g(),H(34,"input",17),$(35,Lq,2,0,"div",18),g(),_(36,"div",19)(37,"button",20),ue("click",function(){return r.Onsubmit()}),v(38,"Registrarse"),g()()()()(),H(39,"app-footer")(40,"app-footer")),t&2){let i,s,o,a,c,l,u,d,h,f,m;C(5),b("formGroup",r.formSignin),C(4),b("ngClass",ct(13,Vo,((i=r.formSignin.get("name"))==null?null:i.valid)&&((i=r.formSignin.get("name"))==null?null:i.touched),((i=r.formSignin.get("name"))==null?null:i.invalid)&&((i=r.formSignin.get("name"))==null?null:i.touched))),C(),b("ngIf",((s=r.formSignin.get("name"))==null?null:s.invalid)&&((s=r.formSignin.get("name"))==null?null:s.touched)),C(4),b("ngClass",ct(16,Vo,((o=r.formSignin.get("lastName"))==null?null:o.valid)&&((o=r.formSignin.get("lastName"))==null?null:o.touched),((o=r.formSignin.get("lastName"))==null?null:o.invalid)&&((o=r.formSignin.get("lastName"))==null?null:o.touched))),C(),b("ngIf",((a=r.formSignin.get("lastName"))==null?null:a.invalid)&&((a=r.formSignin.get("lastName"))==null?null:a.touched)),C(4),b("ngClass",ct(19,Vo,((c=r.formSignin.get("email"))==null?null:c.valid)&&((c=r.formSignin.get("email"))==null?null:c.touched),((c=r.formSignin.get("email"))==null?null:c.invalid)&&((c=r.formSignin.get("email"))==null?null:c.touched))),C(),b("ngIf",((l=r.formSignin.get("email"))==null?null:l.invalid)&&((l=r.formSignin.get("email"))==null?null:l.touched)),C(4),b("ngClass",ct(22,Vo,((u=r.formSignin.get("username"))==null?null:u.valid)&&((u=r.formSignin.get("username"))==null?null:u.touched),((u=r.formSignin.get("username"))==null?null:u.invalid)&&((u=r.formSignin.get("username"))==null?null:u.touched))),C(),b("ngIf",((d=r.formSignin.get("username"))==null?null:d.invalid)&&((d=r.formSignin.get("username"))==null?null:d.touched)),C(4),b("ngClass",ct(25,Vo,((h=r.formSignin.get("password"))==null?null:h.valid)&&((h=r.formSignin.get("password"))==null?null:h.touched),((h=r.formSignin.get("password"))==null?null:h.invalid)&&((h=r.formSignin.get("password"))==null?null:h.touched))),C(),b("ngIf",((f=r.formSignin.get("password"))==null?null:f.invalid)&&((f=r.formSignin.get("password"))==null?null:f.touched)),C(4),b("ngClass",ct(28,Vo,((m=r.formSignin.get("confirmPassword"))==null?null:m.valid)&&((m=r.formSignin.get("confirmPassword"))==null?null:m.touched),((m=r.formSignin.get("confirmPassword"))==null?null:m.invalid)&&((m=r.formSignin.get("confirmPassword"))==null?null:m.touched))),C(),b("ngIf",r.formSignin.hasError("passwordsMismatch"))}},dependencies:[pt,mt,Bt,Fo,xo,Xr,Po,Oo,My,Yi,Qi,xr]})};var sf=class{id;name;description;priority;status;creationDate;expirationDate;isDelete;constructor(e,t,r,i,s,o,a,c){this.id=e,this.name=t,this.description=r,this.priority=i,this.status=s,this.creationDate=o,this.expirationDate=a,this.isDelete=c}getStatusText(){switch(this.status){case"C":return"Completed";case"IP":return"In Progress";case"P":return"Pending";default:return"Unknown"}}getPriorityText(){switch(this.priority){case"H":return"Alta";case"M":return"Media";case"L":return"Baja";default:return""}}raisePriority(){this.priority!=="H"&&(this.priority=this.priority==="L"?"M":"H")}lowerPriority(){this.priority!=="L"&&(this.priority=this.priority==="H"?"M":"L")}changeStatus(){switch(this.status){case"C":this.status="IP";break;case"IP":this.status="C";break;case"P":this.status="IP";break}}};var HN="@firebase/database",WN="1.0.10";var xI="";function Fq(n){xI=n}var jy=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Le(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:wo(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var By=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ln(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var wR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jy(e)}}catch{}return new By},Zi=wR("localStorage"),$y=wR("sessionStorage");var $o=new Hr("@firebase/database"),Vq=function(){let n=1;return function(){return n++}}(),CR=function(n){let e=R0(n),t=new ah;t.update(e);let r=t.digest();return ch.encodeByteArray(r)},ul=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ul.apply(null,r):typeof r=="object"?e+=Le(r):e+=r,e+=" "}return e},Xi=null,zN=!0,Uq=function(n,e){E(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?($o.logLevel=fe.VERBOSE,Xi=$o.log.bind($o),e&&$y.set("logging_enabled",!0)):typeof n=="function"?Xi=n:(Xi=null,$y.remove("logging_enabled"))},Qe=function(...n){if(zN===!0&&(zN=!1,Xi===null&&$y.get("logging_enabled")===!0&&Uq(!0)),Xi){let e=ul.apply(null,n);Xi(e)}},dl=function(n){return function(...e){Qe(n,...e)}},Hy=function(...n){let e="FIREBASE INTERNAL ERROR: "+ul(...n);$o.error(e)},es=function(...n){let e=`FIREBASE FATAL ERROR: ${ul(...n)}`;throw $o.error(e),new Error(e)},Rt=function(...n){let e="FIREBASE WARNING: "+ul(...n);$o.warn(e)},jq=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},bR=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Bq=function(n){if(xn()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Wo="[MIN_NAME]",ts="[MAX_NAME]",Jo=function(n,e){if(n===e)return 0;if(n===Wo||e===ts)return-1;if(e===Wo||n===ts)return 1;{let t=GN(n),r=GN(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},$q=function(n,e){return n===e?0:n<e?-1:1},Gc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Le(e))},LI=function(n){if(typeof n!="object"||n===null)return Le(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Le(e[r]),t+=":",t+=LI(n[e[r]]);return t+="}",t},TR=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function gt(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var DR=function(n){E(!bR(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Hq=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Wq=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function zq(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var Gq=new RegExp("^-?(0*)\\d{1,10}$"),qq=-2147483648,Kq=2147483647,GN=function(n){if(Gq.test(n)){let e=Number(n);if(e>=qq&&e<=Kq)return e}return null},hl=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Rt("Exception was thrown by user callback.",t),e},Math.floor(0))}},Yq=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Jc=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var Wy=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var zy=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Qe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rt(e)}},qN=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),af="5",SR="v",AR="s",NR="r",RR="f",MR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kR="ls",PR="p",Gy="ac",OR="websocket",xR="long_polling";var qy=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function Qq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function LR(n,e,t){E(typeof e=="string","typeof type must == string"),E(typeof t=="object","typeof params must == object");let r;if(e===OR)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===xR)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Qq(n)&&(t.ns=n.namespace);let i=[];return gt(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Ky=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Ln(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return y0(this.counters_)}};var Py={},Oy={};function FI(n){let e=n.toString();return Py[e]||(Py[e]=new Ky),Py[e]}function Jq(n,e){let t=n.toString();return Oy[t]||(Oy[t]=e()),Oy[t]}var Yy=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&hl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var KN="start",Zq="close",Xq="pLPCommand",e3="pRTLPCB",FR="id",VR="pw",UR="ser",t3="cb",n3="seg",r3="ts",i3="d",s3="dframe",jR=1870,BR=30,o3=jR-BR,a3=25e3,c3=3e4,Qy=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dl(e),this.stats_=FI(t),this.urlFn=c=>(this.appCheckToken&&(c[Gy]=this.appCheckToken),LR(t,xR,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Yy(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(c3)),Bq(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jy((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===KN)this.id=a,this.password=c;else if(o===Zq)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[KN]="t",r[UR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[t3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[SR]=af,this.transportSessionId&&(r[AR]=this.transportSessionId),this.lastSessionId&&(r[kR]=this.lastSessionId),this.applicationId&&(r[PR]=this.applicationId),this.appCheckToken&&(r[Gy]=this.appCheckToken),typeof location<"u"&&location.hostname&&MR.test(location.hostname)&&(r[NR]=RR);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return xn()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Hq()&&!Wq()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Le(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=dv(t),i=TR(r,o3);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(xn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[s3]="t",r[FR]=e,r[VR]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Le(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Jy=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,xn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Vq(),window[Xq+this.uniqueCallbackIdentifier]=e,window[e3+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Qe("frame writing exception"),a.stack&&Qe(a.stack),Qe(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Qe("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[FR]=this.myID,e[VR]=this.myPW,e[UR]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+BR+r.length<=jR;){let o=this.pendingSegs.shift();r=r+"&"+n3+i+"="+o.seg+"&"+r3+i+"="+o.ts+"&"+i3+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(a3)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){xn()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Qe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var l3=16384,u3=45e3,cf=null;typeof MozWebSocket<"u"?cf=MozWebSocket:typeof WebSocket<"u"&&(cf=WebSocket);var qc=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dl(this.connId),this.stats_=FI(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[SR]=af,!xn()&&typeof location<"u"&&location.hostname&&MR.test(location.hostname)&&(a[NR]=RR),r&&(a[AR]=r),i&&(a[kR]=i),s&&(a[Gy]=s),o&&(a[PR]=o),LR(t,OR,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zi.set("previous_websocket_failure",!0);try{let i;if(xn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${af}/${xI}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new cf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&cf!==null&&!n.forceDisallow_}static previouslyFailed(){return Zi.isInMemoryStorage||Zi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Zi.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=wo(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(E(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Le(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=TR(r,l3);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(u3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),d3=(()=>{class n{static get ALL_TRANSPORTS(){return[Qy,qc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=qc&&qc.isAvailable(),i=r&&!qc.previouslyFailed();if(t.webSocketOnly&&(r||Rt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qc];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),h3=6e4,f3=5e3,p3=10*1024,m3=100*1024,xy="t",YN="d",g3="s",QN="r",_3="e",JN="o",ZN="a",XN="n",eR="p",v3="h",Zy=class{constructor(e,t,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dl("c:"+this.id+":"),this.transportManager_=new d3(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Jc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>m3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>p3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(xy in e){let t=e[xy];t===ZN?this.upgradeIfSecondaryHealthy_():t===QN?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===JN&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Gc("t",e),r=Gc("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:eR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ZN,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:XN,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Gc("t",e),r=Gc("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Gc(xy,e);if(YN in e){let r=e[YN];if(t===v3){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===XN){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===g3?this.onConnectionShutdown_(r):t===QN?this.onReset_(r):t===_3?Hy("Server Error: "+r):t===JN?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hy("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),af!==r&&Rt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Jc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(h3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(f3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:eR,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var lf=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var uf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},E(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){E(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var df=class n extends uf{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!wc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return E(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var tR=32,nR=768,me=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function ie(){return new me("")}function Q(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ni(n){return n.pieces_.length-n.pieceNum_}function Ee(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new me(n.pieces_,e)}function $R(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function y3(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function HR(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function WR(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new me(e,0)}function Ve(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof me)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new me(t,0)}function J(n){return n.pieceNum_>=n.pieces_.length}function lt(n,e){let t=Q(n),r=Q(e);if(t===null)return e;if(t===r)return lt(Ee(n),Ee(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function VI(n,e){if(ni(n)!==ni(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function mn(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ni(n)>ni(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var Xy=class{constructor(e,t){this.errorPrefix_=t,this.parts_=HR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Tc(this.parts_[r]);zR(this)}};function I3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Tc(e),zR(n)}function E3(n){let e=n.parts_.pop();n.byteLength_-=Tc(e),n.parts_.length>0&&(n.byteLength_-=1)}function zR(n){if(n.byteLength_>nR)throw new Error(n.errorPrefix_+"has a key path longer than "+nR+" bytes ("+n.byteLength_+").");if(n.parts_.length>tR)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tR+") or object contains a cycle "+Ji(n))}function Ji(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var eI=class n extends uf{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return E(e==="visible","Unknown event type: "+e),[this.visible_]}};var Kc=1e3,w3=60*5*1e3,rR=30*1e3,C3=1.3,b3=3e4,T3="server_kill",iR=3,UI=(()=>{class n extends lf{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=dl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Kc,this.maxReconnectDelay_=w3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!xn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");eI.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&df.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Le(o)),E(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Eo,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),E(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),E(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Ln(t,"w")){let i=Wi(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Rt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||A0(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=rR)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=S0(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),E(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Le(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Hy("Unrecognized action received from server: "+Le(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){E(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Kc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Kc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>b3&&(this.reconnectDelay_=Kc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*C3)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){E(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Qe("getToken() completed but was canceled"):(Qe("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new Zy(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,m=>{Rt(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(T3)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Rt(h),l())}}})}interrupt(t){Qe("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Qe("Resuming connection for reason: "+t),delete this.interruptReasons_[t],uh(this.interruptReasons_)&&(this.reconnectDelay_=Kc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>LI(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new me(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Qe("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=iR&&(this.reconnectDelay_=rR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Qe("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=iR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";xn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+xI.replace(/\./g,"-")]=1,wc()?t["framework.cordova"]=1:lh()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=df.getInstance().currentlyOnline();return uh(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Y=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var zo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Y(Wo,e),i=new Y(Wo,t);return this.compare(r,i)!==0}minPost(){return Y.MIN}};var of,hf=class extends zo{static get __EMPTY_NODE(){return of}static set __EMPTY_NODE(e){of=e}compare(e,t){return Jo(e.name,t.name)}isDefinedOn(e){throw Hi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Y.MIN}maxPost(){return new Y(ts,of)}makePost(e,t){return E(typeof e=="string","KeyIndex indexValue must always be a string."),new Y(e,of)}toString(){return".key"}},Ho=new hf;var jo=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},pn=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Gt.EMPTY_NODE,this.right=o??Gt.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Gt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),tI=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new pn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Gt=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,pn.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new jo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new jo(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new jo(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new jo(this.root_,null,this.comparator_,!0,e)}};Gt.EMPTY_NODE=new tI;function D3(n,e){return Jo(n.name,e.name)}function jI(n,e){return Jo(n,e)}var nI;function S3(n){nI=n}var GR=function(n){return typeof n=="number"?"number:"+DR(n):"string:"+n},qR=function(n){if(n.isLeafNode()){let e=n.val();E(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ln(e,".sv"),"Priority must be a string or number.")}else E(n===nI||n.isEmpty(),"priority of unexpected type.");E(n===nI||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var sR,Go=(()=>{class n{static set __childrenNodeConstructor(t){sR=t}static get __childrenNodeConstructor(){return sR}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,E(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),qR(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return J(t)?this:Q(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Q(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(E(i!==".priority"||ni(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ee(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+GR(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=DR(this.value_):t+=this.value_,this.lazyHash_=CR(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(E(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return E(s>=0,"Unknown leaf type: "+r),E(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),KR,YR;function A3(n){KR=n}function N3(n){YR=n}var rI=class extends zo{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Jo(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Y.MIN}maxPost(){return new Y(ts,new Go("[PRIORITY-POST]",YR))}makePost(e,t){let r=KR(e);return new Y(t,new Go("[PRIORITY-POST]",r))}toString(){return".priority"}},Me=new rI;var R3=Math.log(2),iI=class{constructor(e){let t=s=>parseInt(Math.log(s)/R3,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ff=function(n,e,t,r){n.sort(e);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=n[c],h=t?t(d):d,new pn(h,d.node,pn.BLACK,null,null);{let f=parseInt(u/2,10)+c,m=i(c,f),y=i(f+1,l);return d=n[f],h=t?t(d):d,new pn(h,d.node,pn.BLACK,m,y)}},s=function(c){let l=null,u=null,d=n.length,h=function(m,y){let D=d-m,M=d;d-=m;let ne=i(D+1,M),re=n[D],we=t?t(re):re;f(new pn(we,re.node,y,null,ne))},f=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let y=c.nextBitIsOne(),D=Math.pow(2,c.count-(m+1));y?h(D,pn.BLACK):(h(D,pn.BLACK),h(D,pn.RED))}return u},o=new iI(n.length),a=s(o);return new Gt(r||e,a)};var Ly,Uo={},qo=class n{static get Default(){return E(Uo&&Me,"ChildrenNode.ts has not been loaded"),Ly=Ly||new n({".priority":Uo},{".priority":Me}),Ly}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Wi(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Gt?t:null}hasIndex(e){return Ln(this.indexSet_,e.toString())}addIndex(e,t){E(e!==Ho,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(Y.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=ff(r,e.getCompare()):a=Uo;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let r=Cc(this.indexes_,(i,s)=>{let o=Wi(this.indexSet_,s);if(E(o,"Missing index implementation for "+s),i===Uo)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(Y.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),ff(a,o.getCompare())}else return Uo;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Y(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Cc(this.indexes_,i=>{if(i===Uo)return i;{let s=t.get(e.name);return s?i.remove(new Y(e.name,s)):i}});return new n(r,this.indexSet_)}};var Yc,V=(()=>{class n{static get EMPTY_NODE(){return Yc||(Yc=new n(new Gt(jI),null,qo.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&qR(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yc}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Yc:r}}getChild(t){let r=Q(t);return r===null?this:this.getImmediateChild(r).getChild(Ee(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(E(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Y(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Yc:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=Q(t);if(i===null)return r;{E(Q(t)!==".priority"||ni(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ee(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Me,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+GR(this.getPriority().val())+":"),this.forEachChild(Me,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":CR(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Y(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Y(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Y(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,Y.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,Y.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===fl?-1:0}withIndex(t){if(t===Ho||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ho||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Me),s=r.getIterator(Me),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Ho?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),sI=class extends V{constructor(){super(new Gt(jI),V.EMPTY_NODE,qo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return V.EMPTY_NODE}isEmpty(){return!1}},fl=new sI;Object.defineProperties(Y,{MIN:{value:new Y(Wo,V.EMPTY_NODE)},MAX:{value:new Y(ts,fl)}});hf.__EMPTY_NODE=V.EMPTY_NODE;Go.__childrenNodeConstructor=V;S3(fl);N3(fl);var M3=!0;function ze(n,e=null){if(n===null)return V.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),E(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Go(t,ze(e))}if(!(n instanceof Array)&&M3){let t=[],r=!1;if(gt(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=ze(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Y(o,c)))}}),t.length===0)return V.EMPTY_NODE;let s=ff(t,D3,o=>o.name,jI);if(r){let o=ff(t,Me.getCompare());return new V(s,ze(e),new qo({".priority":o},{".priority":Me}))}else return new V(s,ze(e),qo.Default)}else{let t=V.EMPTY_NODE;return gt(n,(r,i)=>{if(Ln(n,r)&&r.substring(0,1)!=="."){let s=ze(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(ze(e))}}A3(ze);var oI=class extends zo{constructor(e){super(),this.indexPath_=e,E(!J(e)&&Q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Jo(e.name,t.name):s}makePost(e,t){let r=ze(e),i=V.EMPTY_NODE.updateChild(this.indexPath_,r);return new Y(t,i)}maxPost(){let e=V.EMPTY_NODE.updateChild(this.indexPath_,fl);return new Y(ts,e)}toString(){return HR(this.indexPath_,0).join("/")}};var aI=class extends zo{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Jo(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Y.MIN}maxPost(){return Y.MAX}makePost(e,t){let r=ze(e);return new Y(t,r)}toString(){return".value"}},k3=new aI;function QR(n){return{type:"value",snapshotNode:n}}function Ko(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function tl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function nl(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function P3(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var rl=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){E(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(tl(t,a)):E(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ko(t,r)):o.trackChildChange(nl(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Me,(i,s)=>{t.hasChild(i)||r.trackChildChange(tl(i,s))}),t.isLeafNode()||t.forEachChild(Me,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(nl(i,s,o))}else r.trackChildChange(Ko(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?V.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var pf=class n{constructor(e){this.indexedFilter_=new rl(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new Y(t,r))||(r=V.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=V.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(V.EMPTY_NODE);let s=this;return t.forEachChild(Me,(o,a)=>{s.matches(new Y(o,a))||(i=i.updateImmediateChild(o,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var cI=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new pf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Y(t,r))||(r=V.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=V.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=V.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(V.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;E(a.numChildren()===this.limit_,"");let c=new Y(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){let d=a.getImmediateChild(t),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===t||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return s?.trackChildChange(nl(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(tl(t,d));let y=a.updateImmediateChild(t,V.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(Ko(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(tl(l.name,l.node)),s.trackChildChange(Ko(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,V.EMPTY_NODE)):e}};var lI=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Me}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return E(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return E(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wo}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return E(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ts}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return E(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Me}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function O3(n){return n.loadsAllData()?new rl(n.getIndex()):n.hasLimit()?new cI(n):new pf(n)}function oR(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Me?t="$priority":n.index_===k3?t="$value":n.index_===Ho?t="$key":(E(n.index_ instanceof oI,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Le(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Le(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Le(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Le(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Le(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function aR(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Me&&(e.i=n.index_.toString()),e}var uI=class n extends lf{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(E(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=dl("p:rest:"),this.listens_={}}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=oR(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Wi(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=oR(e._queryParams),r=e._path.toString(),i=new Eo;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bc(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=wo(a.responseText)}catch{Rt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Rt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var dI=class{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function mf(){return{value:null,children:new Map}}function JR(n,e,t){if(J(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Q(e);n.children.has(r)||n.children.set(r,mf());let i=n.children.get(r);e=Ee(e),JR(i,e,t)}}function hI(n,e,t){n.value!==null?t(e,n.value):x3(n,(r,i)=>{let s=new me(e.toString()+"/"+r);hI(i,s,t)})}function x3(n,e){n.children.forEach((t,r)=>{e(r,t)})}var fI=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&gt(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var cR=10*1e3,L3=30*1e3,F3=5*60*1e3,pI=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new fI(e);let r=cR+(L3-cR)*Math.random();Jc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;gt(e,(i,s)=>{s>0&&Ln(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Jc(this.reportStats_.bind(this),Math.floor(Math.random()*2*F3))}};var Un=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Un||{});function ZR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function BI(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $I(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var mI=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Un.ACK_USER_WRITE,this.source=ZR()}operationForChild(e){if(J(this.path)){if(this.affectedTree.value!=null)return E(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new me(e));return new n(ie(),t,this.revert)}}else return E(Q(this.path)===e,"operationForChild called for unrelated child."),new n(Ee(this.path),this.affectedTree,this.revert)}};var gf=class n{constructor(e,t){this.source=e,this.path=t,this.type=Un.LISTEN_COMPLETE}operationForChild(e){return J(this.path)?new n(this.source,ie()):new n(this.source,Ee(this.path))}};var Yo=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Un.OVERWRITE}operationForChild(e){return J(this.path)?new n(this.source,ie(),this.snap.getImmediateChild(e)):new n(this.source,Ee(this.path),this.snap)}};var _f=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Un.MERGE}operationForChild(e){if(J(this.path)){let t=this.children.subtree(new me(e));return t.isEmpty()?null:t.value?new Yo(this.source,ie(),t.value):new n(this.source,ie(),t)}else return E(Q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Ee(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var jn=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(J(e))return this.isFullyInitialized()&&!this.filtered_;let t=Q(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var gI=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function V3(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(P3(o.childName,o.snapshotNode))}),Qc(n,i,"child_removed",e,r,t),Qc(n,i,"child_added",e,r,t),Qc(n,i,"child_moved",s,r,t),Qc(n,i,"child_changed",e,r,t),Qc(n,i,"value",e,r,t),i}function Qc(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>j3(n,a,c)),o.forEach(a=>{let c=U3(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function U3(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function j3(n,e,t){if(e.childName==null||t.childName==null)throw Hi("Should only compare child_ events.");let r=new Y(e.childName,e.snapshotNode),i=new Y(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Rf(n,e){return{eventCache:n,serverCache:e}}function Zc(n,e,t,r){return Rf(new jn(e,t,r),n.serverCache)}function XR(n,e,t,r){return Rf(n.eventCache,new jn(e,t,r))}function vf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ns(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var Fy,B3=()=>(Fy||(Fy=new Gt($q)),Fy),_t=class n{static fromObject(e){let t=new n(null);return gt(e,(r,i)=>{t=t.set(new me(r),i)}),t}constructor(e,t=B3()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ie(),value:this.value};if(J(e))return null;{let r=Q(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ee(e),t);return s!=null?{path:Ve(new me(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(J(e))return this;{let t=Q(e),r=this.children.get(t);return r!==null?r.subtree(Ee(e)):new n(null)}}set(e,t){if(J(e))return new n(t,this.children);{let r=Q(e),s=(this.children.get(r)||new n(null)).set(Ee(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(J(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Q(e),r=this.children.get(t);if(r){let i=r.remove(Ee(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(J(e))return this.value;{let t=Q(e),r=this.children.get(t);return r?r.get(Ee(e)):null}}setTree(e,t){if(J(e))return t;{let r=Q(e),s=(this.children.get(r)||new n(null)).setTree(Ee(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(ie(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ve(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ie(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(J(e))return null;{let s=Q(e),o=this.children.get(s);return o?o.findOnPath_(Ee(e),Ve(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ie(),t)}foreachOnPath_(e,t,r){if(J(e))return this;{this.value&&r(t,this.value);let i=Q(e),s=this.children.get(i);return s?s.foreachOnPath_(Ee(e),Ve(t,i),r):new n(null)}}foreach(e){this.foreach_(ie(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ve(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var gn=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new _t(null))}};function Xc(n,e,t){if(J(e))return new gn(new _t(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=lt(i,e);return s=s.updateChild(o,t),new gn(n.writeTree_.set(i,s))}else{let i=new _t(t),s=n.writeTree_.setTree(e,i);return new gn(s)}}}function lR(n,e,t){let r=n;return gt(t,(i,s)=>{r=Xc(r,Ve(e,i),s)}),r}function uR(n,e){if(J(e))return gn.empty();{let t=n.writeTree_.setTree(e,new _t(null));return new gn(t)}}function _I(n,e){return rs(n,e)!=null}function rs(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(lt(t.path,e)):null}function dR(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Me,(r,i)=>{e.push(new Y(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Y(r,i.value))}),e}function ei(n,e){if(J(e))return n;{let t=rs(n,e);return t!=null?new gn(new _t(t)):new gn(n.writeTree_.subtree(e))}}function vI(n){return n.writeTree_.isEmpty()}function Qo(n,e){return eM(ie(),n.writeTree_,e)}function eM(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(E(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=eM(Ve(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Ve(n,".priority"),r)),t}}function Mf(n,e){return iM(e,n)}function $3(n,e,t,r,i){E(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Xc(n.visibleWrites,e,t)),n.lastWriteId=r}function H3(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function W3(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);E(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&z3(a,r.path)?i=!1:mn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return G3(n),!0;if(r.snap)n.visibleWrites=uR(n.visibleWrites,r.path);else{let a=r.children;gt(a,c=>{n.visibleWrites=uR(n.visibleWrites,Ve(r.path,c))})}return!0}else return!1}function z3(n,e){if(n.snap)return mn(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&mn(Ve(n.path,t),e))return!0;return!1}function G3(n){n.visibleWrites=tM(n.allWrites,q3,ie()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function q3(n){return n.visible}function tM(n,e,t){let r=gn.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)mn(t,o)?(a=lt(t,o),r=Xc(r,a,s.snap)):mn(o,t)&&(a=lt(o,t),r=Xc(r,ie(),s.snap.getChild(a)));else if(s.children){if(mn(t,o))a=lt(t,o),r=lR(r,a,s.children);else if(mn(o,t))if(a=lt(o,t),J(a))r=lR(r,ie(),s.children);else{let c=Wi(s.children,Q(a));if(c){let l=c.getChild(Ee(a));r=Xc(r,ie(),l)}}}else throw Hi("WriteRecord should have .snap or .children")}}return r}function nM(n,e,t,r,i){if(!r&&!i){let s=rs(n.visibleWrites,e);if(s!=null)return s;{let o=ei(n.visibleWrites,e);if(vI(o))return t;if(t==null&&!_I(o,ie()))return null;{let a=t||V.EMPTY_NODE;return Qo(o,a)}}}else{let s=ei(n.visibleWrites,e);if(!i&&vI(s))return t;if(!i&&t==null&&!_I(s,ie()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(mn(l.path,e)||mn(e,l.path))},a=tM(n.allWrites,o,e),c=t||V.EMPTY_NODE;return Qo(a,c)}}}function K3(n,e,t){let r=V.EMPTY_NODE,i=rs(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Me,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=ei(n.visibleWrites,e);return t.forEachChild(Me,(o,a)=>{let c=Qo(ei(s,new me(o)),a);r=r.updateImmediateChild(o,c)}),dR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=ei(n.visibleWrites,e);return dR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Y3(n,e,t,r,i){E(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Ve(e,t);if(_I(n.visibleWrites,s))return null;{let o=ei(n.visibleWrites,s);return vI(o)?i.getChild(t):Qo(o,i.getChild(t))}}function Q3(n,e,t,r){let i=Ve(e,t),s=rs(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=ei(n.visibleWrites,i);return Qo(o,r.getNode().getImmediateChild(t))}else return null}function J3(n,e){return rs(n.visibleWrites,e)}function Z3(n,e,t,r,i,s,o){let a,c=ei(n.visibleWrites,e),l=rs(c,ie());if(l!=null)a=l;else if(t!=null)a=Qo(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function X3(){return{visibleWrites:gn.empty(),allWrites:[],lastWriteId:-1}}function yf(n,e,t,r){return nM(n.writeTree,n.treePath,e,t,r)}function HI(n,e){return K3(n.writeTree,n.treePath,e)}function hR(n,e,t,r){return Y3(n.writeTree,n.treePath,e,t,r)}function If(n,e){return J3(n.writeTree,Ve(n.treePath,e))}function e4(n,e,t,r,i,s){return Z3(n.writeTree,n.treePath,e,t,r,i,s)}function WI(n,e,t){return Q3(n.writeTree,n.treePath,e,t)}function rM(n,e){return iM(Ve(n.treePath,e),n.writeTree)}function iM(n,e){return{treePath:n,writeTree:e}}var yI=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;E(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),E(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,nl(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,tl(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,Ko(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,nl(r,e.snapshotNode,i.oldSnap));else throw Hi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var II=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},sM=new II,il=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new jn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return WI(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ns(this.viewCache_),s=e4(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function t4(n){return{filter:n}}function n4(n,e){E(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),E(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function r4(n,e,t,r,i){let s=new yI,o,a;if(t.type===Un.OVERWRITE){let l=t;l.source.fromUser?o=EI(n,e,l.path,l.snap,r,i,s):(E(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!J(l.path),o=Ef(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===Un.MERGE){let l=t;l.source.fromUser?o=s4(n,e,l.path,l.children,r,i,s):(E(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=wI(n,e,l.path,l.children,r,i,a,s))}else if(t.type===Un.ACK_USER_WRITE){let l=t;l.revert?o=c4(n,e,l.path,r,i,s):o=o4(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===Un.LISTEN_COMPLETE)o=a4(n,e,t.path,r,s);else throw Hi("Unknown operation type: "+t.type);let c=s.getChanges();return i4(e,o,c),{viewCache:o,changes:c}}function i4(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=vf(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(QR(vf(e)))}}function oM(n,e,t,r,i,s){let o=e.eventCache;if(If(r,t)!=null)return e;{let a,c;if(J(t))if(E(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=ns(e),u=l instanceof V?l:V.EMPTY_NODE,d=HI(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=yf(r,ns(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Q(t);if(l===".priority"){E(ni(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=hR(r,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=Ee(t),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=hR(r,t,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=WI(r,l,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Zc(e,a,o.isFullyInitialized()||J(t),n.filter.filtersNodes())}}function Ef(n,e,t,r,i,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(J(t))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(t,r);l=u.updateFullNode(c.getNode(),f,null)}else{let f=Q(t);if(!c.isCompleteForPath(t)&&ni(t)>1)return e;let m=Ee(t),D=c.getNode().getImmediateChild(f).updateChild(m,r);f===".priority"?l=u.updatePriority(c.getNode(),D):l=u.updateChild(c.getNode(),f,D,m,sM,null)}let d=XR(e,l,c.isFullyInitialized()||J(t),u.filtersNodes()),h=new il(i,d,s);return oM(n,d,t,i,h,a)}function EI(n,e,t,r,i,s,o){let a=e.eventCache,c,l,u=new il(i,e,s);if(J(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Zc(e,l,!0,n.filter.filtersNodes());else{let d=Q(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=Zc(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=Ee(t),f=a.getNode().getImmediateChild(d),m;if(J(h))m=r;else{let y=u.getCompleteChild(d);y!=null?$R(h)===".priority"&&y.getChild(WR(h)).isEmpty()?m=y:m=y.updateChild(h,r):m=V.EMPTY_NODE}if(f.equals(m))c=e;else{let y=n.filter.updateChild(a.getNode(),d,m,h,u,o);c=Zc(e,y,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function fR(n,e){return n.eventCache.isCompleteForChild(e)}function s4(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=Ve(t,c);fR(e,Q(u))&&(a=EI(n,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=Ve(t,c);fR(e,Q(u))||(a=EI(n,a,u,l,i,s,o))}),a}function pR(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function wI(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;J(t)?l=r:l=new _t(null).setTree(t,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),m=pR(n,f,h);c=Ef(n,c,new me(d),m,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let m=e.serverCache.getNode().getImmediateChild(d),y=pR(n,m,h);c=Ef(n,c,new me(d),y,i,s,o,a)}}),c}function o4(n,e,t,r,i,s,o){if(If(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(J(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Ef(n,e,t,c.getNode().getChild(t),i,s,a,o);if(J(t)){let l=new _t(null);return c.getNode().forEachChild(Ho,(u,d)=>{l=l.set(new me(u),d)}),wI(n,e,t,l,i,s,a,o)}else return e}else{let l=new _t(null);return r.foreach((u,d)=>{let h=Ve(t,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),wI(n,e,t,l,i,s,a,o)}}function a4(n,e,t,r,i){let s=e.serverCache,o=XR(e,s.getNode(),s.isFullyInitialized()||J(t),s.isFiltered());return oM(n,o,t,r,sM,i)}function c4(n,e,t,r,i,s){let o;if(If(r,t)!=null)return e;{let a=new il(r,e,i),c=e.eventCache.getNode(),l;if(J(t)||Q(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=yf(r,ns(e));else{let d=e.serverCache.getNode();E(d instanceof V,"serverChildren would be complete if leaf node"),u=HI(r,d)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=Q(t),d=WI(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,Ee(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,V.EMPTY_NODE,Ee(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=yf(r,ns(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||If(r,ie())!=null,Zc(e,l,o,n.filter.filtersNodes())}}var CI=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new rl(r.getIndex()),s=O3(r);this.processor_=t4(s);let o=t.serverCache,a=t.eventCache,c=i.updateFullNode(V.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(V.EMPTY_NODE,a.getNode(),null),u=new jn(c,o.isFullyInitialized(),i.filtersNodes()),d=new jn(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Rf(d,u),this.eventGenerator_=new gI(this.query_)}get query(){return this.query_}};function l4(n){return n.viewCache_.serverCache.getNode()}function u4(n){return vf(n.viewCache_)}function d4(n,e){let t=ns(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!J(e)&&!t.getImmediateChild(Q(e)).isEmpty())?t.getChild(e):null}function mR(n){return n.eventRegistrations_.length===0}function h4(n,e){n.eventRegistrations_.push(e)}function gR(n,e,t){let r=[];if(t){E(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function _R(n,e,t,r){e.type===Un.MERGE&&e.source.queryId!==null&&(E(ns(n.viewCache_),"We should always have a full cache before handling merges"),E(vf(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=r4(n.processor_,i,e,t,r);return n4(n.processor_,s.viewCache),E(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,aM(n,s.changes,s.viewCache.eventCache.getNode(),null)}function f4(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Me,(s,o)=>{r.push(Ko(s,o))}),t.isFullyInitialized()&&r.push(QR(t.getNode())),aM(n,r,t.getNode(),e)}function aM(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return V3(n.eventGenerator_,e,t,i)}var wf,Cf=class{constructor(){this.views=new Map}};function p4(n){E(!wf,"__referenceConstructor has already been defined"),wf=n}function m4(){return E(wf,"Reference.ts has not been loaded"),wf}function g4(n){return n.views.size===0}function zI(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return E(s!=null,"SyncTree gave us an op for an invalid query."),_R(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(_R(o,e,t,r));return s}}function cM(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=yf(t,i?r:null),c=!1;a?c=!0:r instanceof V?(a=HI(t,r),c=!1):(a=V.EMPTY_NODE,c=!1);let l=Rf(new jn(a,c,!1),new jn(r,i,!1));return new CI(e,l)}return o}function _4(n,e,t,r,i,s){let o=cM(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),h4(o,t),f4(o,t)}function v4(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=ri(n);if(i==="default")for(let[c,l]of n.views.entries())o=o.concat(gR(l,t,r)),mR(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(i);c&&(o=o.concat(gR(c,t,r)),mR(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!ri(n)&&s.push(new(m4())(e._repo,e._path)),{removed:s,events:o}}function lM(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ti(n,e){let t=null;for(let r of n.views.values())t=t||d4(r,e);return t}function uM(n,e){if(e._queryParams.loadsAllData())return kf(n);{let r=e._queryIdentifier;return n.views.get(r)}}function dM(n,e){return uM(n,e)!=null}function ri(n){return kf(n)!=null}function kf(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var bf;function y4(n){E(!bf,"__referenceConstructor has already been defined"),bf=n}function I4(){return E(bf,"Reference.ts has not been loaded"),bf}var E4=1,Tf=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _t(null),this.pendingWriteTree_=X3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function w4(n,e,t,r,i){return $3(n.pendingWriteTree_,e,t,r,i),i?ml(n,new Yo(ZR(),e,t)):[]}function Bo(n,e,t=!1){let r=H3(n.pendingWriteTree_,e);if(W3(n.pendingWriteTree_,e)){let s=new _t(null);return r.snap!=null?s=s.set(ie(),!0):gt(r.children,o=>{s=s.set(new me(o),!0)}),ml(n,new mI(r.path,s,t))}else return[]}function pl(n,e,t){return ml(n,new Yo(BI(),e,t))}function C4(n,e,t){let r=_t.fromObject(t);return ml(n,new _f(BI(),e,r))}function b4(n,e){return ml(n,new gf(BI(),e))}function T4(n,e,t){let r=GI(n,t);if(r){let i=qI(r),s=i.path,o=i.queryId,a=lt(s,e),c=new gf($I(o),a);return KI(n,s,c)}else return[]}function Df(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||dM(o,e))){let c=v4(o,e,t,r);g4(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(h,f)=>ri(f));if(u&&!d){let h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=A4(h);for(let m=0;m<f.length;++m){let y=f[m],D=y.query,M=gM(n,y);n.listenProvider_.startListening(el(D),sl(n,D),M.hashFn,M.onComplete)}}}!d&&l.length>0&&!r&&(u?n.listenProvider_.stopListening(el(e),null):l.forEach(h=>{let f=n.queryToTagMap.get(Pf(h));n.listenProvider_.stopListening(el(h),f)}))}N4(n,l)}return a}function hM(n,e,t,r){let i=GI(n,r);if(i!=null){let s=qI(i),o=s.path,a=s.queryId,c=lt(o,e),l=new Yo($I(a),c,t);return KI(n,o,l)}else return[]}function D4(n,e,t,r){let i=GI(n,r);if(i){let s=qI(i),o=s.path,a=s.queryId,c=lt(o,e),l=_t.fromObject(t),u=new _f($I(a),c,l);return KI(n,o,u)}else return[]}function bI(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(h,f)=>{let m=lt(h,i);s=s||ti(f,m),o=o||ri(f)});let a=n.syncPointTree_.get(i);a?(o=o||ri(a),s=s||ti(a,ie())):(a=new Cf,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=V.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((f,m)=>{let y=ti(m,ie());y&&(s=s.updateImmediateChild(f,y))}));let l=dM(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=Pf(e);E(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=R4();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let u=Mf(n.pendingWriteTree_,i),d=_4(a,e,t,u,s,c);if(!l&&!o&&!r){let h=uM(a,e);d=d.concat(M4(n,e,h))}return d}function fM(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=lt(o,e),l=ti(a,c);if(l)return l});return nM(i,e,s,t,!0)}function S4(n,e){let t=e._path,r=null;n.syncPointTree_.foreachOnPath(t,(l,u)=>{let d=lt(l,t);r=r||ti(u,d)});let i=n.syncPointTree_.get(t);i?r=r||ti(i,ie()):(i=new Cf,n.syncPointTree_=n.syncPointTree_.set(t,i));let s=r!=null,o=s?new jn(r,!0,!1):null,a=Mf(n.pendingWriteTree_,e._path),c=cM(i,e,a,s?o.getNode():V.EMPTY_NODE,s);return u4(c)}function ml(n,e){return pM(e,n.syncPointTree_,null,Mf(n.pendingWriteTree_,ie()))}function pM(n,e,t,r){if(J(n.path))return mM(n,e,t,r);{let i=e.get(ie());t==null&&i!=null&&(t=ti(i,ie()));let s=[],o=Q(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=rM(r,o);s=s.concat(pM(a,c,l,u))}return i&&(s=s.concat(zI(i,n,r,t))),s}}function mM(n,e,t,r){let i=e.get(ie());t==null&&i!=null&&(t=ti(i,ie()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=rM(r,o),u=n.operationForChild(o);u&&(s=s.concat(mM(u,a,c,l)))}),i&&(s=s.concat(zI(i,n,r,t))),s}function gM(n,e){let t=e.query,r=sl(n,t);return{hashFn:()=>(l4(e)||V.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?T4(n,t._path,r):b4(n,t._path);{let s=zq(i,t);return Df(n,t,null,s)}}}}function sl(n,e){let t=Pf(e);return n.queryToTagMap.get(t)}function Pf(n){return n._path.toString()+"$"+n._queryIdentifier}function GI(n,e){return n.tagToQueryMap.get(e)}function qI(n){let e=n.indexOf("$");return E(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new me(n.substr(0,e))}}function KI(n,e,t){let r=n.syncPointTree_.get(e);E(r,"Missing sync point for query tag that we're tracking");let i=Mf(n.pendingWriteTree_,e);return zI(r,t,i,null)}function A4(n){return n.fold((e,t,r)=>{if(t&&ri(t))return[kf(t)];{let i=[];return t&&(i=lM(t)),gt(r,(s,o)=>{i=i.concat(o)}),i}})}function el(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(I4())(n._repo,n._path):n}function N4(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Pf(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function R4(){return E4++}function M4(n,e,t){let r=e._path,i=sl(n,e),s=gM(n,t),o=n.listenProvider_.startListening(el(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)E(!ri(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!J(l)&&u&&ri(u))return[kf(u).query];{let h=[];return u&&(h=h.concat(lM(u).map(f=>f.query))),gt(d,(f,m)=>{h=h.concat(m)}),h}});for(let l=0;l<c.length;++l){let u=c[l];n.listenProvider_.stopListening(el(u),sl(n,u))}}return o}var TI=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},DI=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Ve(this.path_,e);return new n(this.syncTree_,t)}node(){return fM(this.syncTree_,this.path_)}},k4=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},vR=function(n,e,t){if(!n||typeof n!="object")return n;if(E(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return P4(n[".sv"],e,t);if(typeof n[".sv"]=="object")return O4(n[".sv"],e);E(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},P4=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:E(!1,"Unexpected server value: "+n)}},O4=function(n,e,t){n.hasOwnProperty("increment")||E(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&E(!1,"Unexpected increment value: "+r);let i=e.node();if(E(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},x4=function(n,e,t,r){return YI(e,new DI(t,n),r)},L4=function(n,e,t){return YI(n,new TI(e),t)};function YI(n,e,t){let r=n.getPriority().val(),i=vR(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=vR(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Go(a,ze(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Go(i))),o.forEachChild(Me,(a,c)=>{let l=YI(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var ol=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function QI(n,e){let t=e instanceof me?e:new me(e),r=n,i=Q(t);for(;i!==null;){let s=Wi(r.node.children,i)||{children:{},childCount:0};r=new ol(i,r,s),t=Ee(t),i=Q(t)}return r}function Zo(n){return n.node.value}function _M(n,e){n.node.value=e,SI(n)}function vM(n){return n.node.childCount>0}function F4(n){return Zo(n)===void 0&&!vM(n)}function Of(n,e){gt(n.node.children,(t,r)=>{e(new ol(t,n,r))})}function yM(n,e,t,r){t&&!r&&e(n),Of(n,i=>{yM(i,e,!0,r)}),t&&r&&e(n)}function V4(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function gl(n){return new me(n.parent===null?n.name:gl(n.parent)+"/"+n.name)}function SI(n){n.parent!==null&&U4(n.parent,n.name,n)}function U4(n,e,t){let r=F4(t),i=Ln(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,SI(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,SI(n))}var j4=/[\[\].#$\/\u0000-\u001F\u007F]/,B4=/[\[\].#$\u0000-\u001F\u007F]/,Vy=10*1024*1024,IM=function(n){return typeof n=="string"&&n.length!==0&&!j4.test(n)},EM=function(n){return typeof n=="string"&&n.length!==0&&!B4.test(n)},$4=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),EM(n)};var wM=function(n,e,t){let r=t instanceof me?new Xy(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ji(r));if(typeof e=="function")throw new Error(n+"contains a function "+Ji(r)+" with contents = "+e.toString());if(bR(e))throw new Error(n+"contains "+e.toString()+" "+Ji(r));if(typeof e=="string"&&e.length>Vy/3&&Tc(e)>Vy)throw new Error(n+"contains a string greater than "+Vy+" utf8 bytes "+Ji(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(gt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!IM(o)))throw new Error(n+" contains an invalid key ("+o+") "+Ji(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);I3(r,o),wM(n,a,r),E3(r)}),i&&s)throw new Error(n+' contains ".value" child '+Ji(r)+" in addition to actual children.")}};var CM=function(n,e,t,r){if(!(r&&t===void 0)&&!EM(t))throw new Error(fv(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},H4=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),CM(n,e,t,r)};var W4=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!IM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!$4(t))throw new Error(fv(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var AI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function bM(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!VI(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function TM(n,e,t){bM(n,t),DM(n,r=>VI(r,e))}function ii(n,e,t){bM(n,t),DM(n,r=>mn(r,e)||mn(e,r))}function DM(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(z4(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function z4(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Xi&&Qe("event: "+t.toString()),hl(r)}}}var G4="repo_interrupt",q4=25,NI=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new AI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mf(),this.transactionQueueTree_=new ol,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function K4(n,e,t){if(n.stats_=FI(n.repoInfo_),n.forceRestClient_||Yq())n.server_=new uI(n.repoInfo_,(r,i,s,o)=>{yR(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>IR(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Le(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new UI(n.repoInfo_,e,(r,i,s,o)=>{yR(n,r,i,s,o)},r=>{IR(n,r)},r=>{Q4(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Jq(n.repoInfo_,()=>new pI(n.stats_,n.server_)),n.infoData_=new dI,n.infoSyncTree_=new Tf({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=pl(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),JI(n,"connected",!1),n.serverSyncTree_=new Tf({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);ii(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function Y4(n){let t=n.infoData_.getNode(new me(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function SM(n){return k4({timestamp:Y4(n)})}function yR(n,e,t,r,i){n.dataUpdateCount++;let s=new me(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=Cc(t,l=>ze(l));o=D4(n.serverSyncTree_,s,c,i)}else{let c=ze(t);o=hM(n.serverSyncTree_,s,c,i)}else if(r){let c=Cc(t,l=>ze(l));o=C4(n.serverSyncTree_,s,c)}else{let c=ze(t);o=pl(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=eE(n,s)),ii(n.eventQueue_,a,o)}function IR(n,e){JI(n,"connected",e),e===!1&&X4(n)}function Q4(n,e){gt(e,(t,r)=>{JI(n,t,r)})}function JI(n,e,t){let r=new me("/.info/"+e),i=ze(t);n.infoData_.updateSnapshot(r,i);let s=pl(n.infoSyncTree_,r,i);ii(n.eventQueue_,r,s)}function J4(n){return n.nextWriteId_++}function Z4(n,e,t){let r=S4(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{let s=ze(i).withIndex(e._queryParams.getIndex());bI(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=pl(n.serverSyncTree_,e._path,s);else{let a=sl(n.serverSyncTree_,e);o=hM(n.serverSyncTree_,e._path,s,a)}return ii(n.eventQueue_,e._path,o),Df(n.serverSyncTree_,e,t,null,!0),s},i=>(ZI(n,"get for query "+Le(e)+" failed: "+i),Promise.reject(new Error(i))))}function X4(n){ZI(n,"onDisconnectEvents");let e=SM(n),t=mf();hI(n.onDisconnect_,ie(),(i,s)=>{let o=x4(i,s,n.serverSyncTree_,e);JR(t,i,o)});let r=[];hI(t,ie(),(i,s)=>{r=r.concat(pl(n.serverSyncTree_,i,s));let o=i8(n,i);eE(n,o)}),n.onDisconnect_=mf(),ii(n.eventQueue_,ie(),r)}function e8(n,e,t){let r;Q(e._path)===".info"?r=bI(n.infoSyncTree_,e,t):r=bI(n.serverSyncTree_,e,t),TM(n.eventQueue_,e._path,r)}function RI(n,e,t){let r;Q(e._path)===".info"?r=Df(n.infoSyncTree_,e,t):r=Df(n.serverSyncTree_,e,t),TM(n.eventQueue_,e._path,r)}function t8(n){n.persistentConnection_&&n.persistentConnection_.interrupt(G4)}function ZI(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Qe(t,...e)}function AM(n,e,t){return fM(n.serverSyncTree_,e,t)||V.EMPTY_NODE}function XI(n,e=n.transactionQueueTree_){if(e||xf(n,e),Zo(e)){let t=RM(n,e);E(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&n8(n,gl(e),t)}else vM(e)&&Of(e,t=>{XI(n,t)})}function n8(n,e,t){let r=t.map(l=>l.currentWriteId),i=AM(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let u=t[l];E(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=lt(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{ZI(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(Bo(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();xf(n,QI(n.transactionQueueTree_,e)),XI(n,n.transactionQueueTree_),ii(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)hl(d[h])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Rt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}eE(n,e)}},o)}function eE(n,e){let t=NM(n,e),r=gl(t),i=RM(n,t);return r8(n,i,r),r}function r8(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=lt(t,c.path),u=!1,d;if(E(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Bo(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=q4)u=!0,d="maxretry",i=i.concat(Bo(n.serverSyncTree_,c.currentWriteId,!0));else{let h=AM(n,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){wM("transaction failed: Data returned ",f,c.path);let m=ze(f);typeof f=="object"&&f!=null&&Ln(f,".priority")||(m=m.updatePriority(h.getPriority()));let D=c.currentWriteId,M=SM(n),ne=L4(m,h,M);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=ne,c.currentWriteId=J4(n),o.splice(o.indexOf(D),1),i=i.concat(w4(n.serverSyncTree_,c.path,ne,c.currentWriteId,c.applyLocally)),i=i.concat(Bo(n.serverSyncTree_,D,!0))}else u=!0,d="nodata",i=i.concat(Bo(n.serverSyncTree_,c.currentWriteId,!0))}ii(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}xf(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)hl(r[a]);XI(n,n.transactionQueueTree_)}function NM(n,e){let t,r=n.transactionQueueTree_;for(t=Q(e);t!==null&&Zo(r)===void 0;)r=QI(r,t),e=Ee(e),t=Q(e);return r}function RM(n,e){let t=[];return MM(n,e,t),t.sort((r,i)=>r.order-i.order),t}function MM(n,e,t){let r=Zo(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Of(e,i=>{MM(n,i,t)})}function xf(n,e){let t=Zo(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,_M(e,t.length>0?t:void 0)}Of(e,r=>{xf(n,r)})}function i8(n,e){let t=gl(NM(n,e)),r=QI(n.transactionQueueTree_,e);return V4(r,i=>{Uy(n,i)}),Uy(n,r),yM(r,i=>{Uy(n,i)}),t}function Uy(n,e){let t=Zo(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(E(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(E(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Bo(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?_M(e,void 0):t.length=s+1,ii(n.eventQueue_,gl(e),i);for(let o=0;o<r.length;o++)hl(r[o])}}function s8(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function o8(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rt(`Invalid query segment '${t}' in query '${n}'`)}return e}var ER=function(n,e){let t=a8(n),r=t.namespace;t.domain==="firebase.com"&&es(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&es("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||jq();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new qy(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new me(t.pathString)}},a8=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=s8(n.substring(u,d)));let h=o8(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")t="localhost";else if(f.split(".").length<=2)t=f;else{let m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),t=e.substring(m+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Sf=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Le(this.snapshot.exportVal())}},Af=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var al=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return E(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var MI=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return J(this._path)?null:$R(this._path)}get ref(){return new Bn(this._repo,this._path)}get _queryIdentifier(){let e=aR(this._queryParams),t=LI(e);return t==="{}"?"default":t}get _queryObject(){return aR(this._queryParams)}isEqual(e){if(e=Fn(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=VI(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+y3(this._path)}};var Bn=class n extends MI{constructor(e,t){super(e,t,new lI,!1)}get parent(){let e=WR(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},cl=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new me(e),r=kI(this.ref,e);return new n(this._node.getChild(t),r,Me)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,kI(this.ref,r),Me)))}hasChild(e){let t=new me(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function kI(n,e){return n=Fn(n),Q(n._path)===null?H4("child","path",e,!1):CM("child","path",e,!1),new Bn(n._repo,Ve(n._path,e))}function kM(n){n=Fn(n);let e=new al(()=>{}),t=new ll(e);return Z4(n._repo,n,t).then(r=>new cl(r,new Bn(n._repo,n._path),n._queryParams.getIndex()))}var ll=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new Sf("value",this,new cl(e.snapshotNode,new Bn(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Af(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Nf=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Af(this,e,t):null}createEvent(e,t){E(e.childName!=null,"Child events should have a childName.");let r=kI(new Bn(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Sf(e.type,this,new cl(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function _l(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=t,l=(u,d)=>{RI(n._repo,n,a),c(u,d)};l.userCallback=t.userCallback,l.context=t.context,t=l}let o=new al(t,s||void 0),a=e==="value"?new ll(o):new Nf(e,o);return e8(n._repo,n,a),()=>RI(n._repo,n,a)}function PM(n,e,t,r){return _l(n,"value",e,t,r)}function OM(n,e,t,r){return _l(n,"child_added",e,t,r)}function xM(n,e,t,r){return _l(n,"child_changed",e,t,r)}function LM(n,e,t,r){return _l(n,"child_moved",e,t,r)}function FM(n,e,t,r){return _l(n,"child_removed",e,t,r)}function VM(n,e,t){let r=null,i=t?new al(t):null;e==="value"?r=new ll(i):e&&(r=new Nf(e,i)),RI(n._repo,n,r)}p4(Bn);y4(Bn);var c8="FIREBASE_DATABASE_EMULATOR_HOST",PI={},l8=!1;function u8(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||es("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qe("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=ER(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[c8]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=ER(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new qN(qN.OWNER):new zy(n.name,n.options,e);W4("Invalid Firebase Database URL",o),J(o.path)||es("Database URL must point to the root of a Firebase Database (not including a child path).");let d=h8(a,n,u,new Wy(n.name,t));return new OI(d,n)}function d8(n,e){let t=PI[e];(!t||t[n.key]!==n)&&es(`Database ${e}(${n.repoInfo_}) has already been deleted.`),t8(n),delete t[n.key]}function h8(n,e,t,r){let i=PI[e.name];i||(i={},PI[e.name]=i);let s=i[n.toURLString()];return s&&es("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new NI(n,l8,t,r),i[n.toURLString()]=s,s}var OI=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(K4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Bn(this._repo,ie())),this._rootInternal}_delete(){return this._rootInternal!==null&&(d8(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&es("Cannot call "+e+" on a deleted database.")}};function f8(n){Fq(bo),Wr(new hn("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return u8(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),or(HN,WN,n),or(HN,WN,"esm2017")}UI.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};UI.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};f8();var is,Ge=function(n){return n.added="child_added",n.removed="child_removed",n.changed="child_changed",n.moved="child_moved",n.value="value",n}(Ge||{}),p8=Object.freeze((is={},is[Ge.added]=OM,is[Ge.removed]=FM,is[Ge.changed]=xM,is[Ge.moved]=LM,is[Ge.value]=PM,is));function UM(n,e){return new U(function(t){var r=p8[e](n,function(i,s){t.next({snapshot:i,prevKey:s,event:e})},t.error.bind(t));return{unsubscribe:function(){VM(n,e,r)}}}).pipe(xp(0))}var Lf=function(){return Lf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Lf.apply(this,arguments)};function tE(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function m8(n){return(n==null||n.length===0)&&(n=[Ge.added,Ge.removed,Ge.changed,Ge.moved]),n}function jM(n,e){var t;e===void 0&&(e={});var r=n.snapshot.val();return!n.snapshot.exists()||typeof r!="object"?r:Lf(Lf({},r),e.keyField?(t={},t[e.keyField]=n.snapshot.key,t):null)}function g8(n){return ve(kM(n)).pipe(O(function(e){var t=Ge.value;return{snapshot:e,prevKey:null,event:t}}))}function BM(n,e){e===void 0&&(e={});var t=m8(e.events);return g8(n).pipe(nt(function(r){var i=[k(r)];return t.forEach(function(s){i.push(UM(n,s))}),Pp.apply(void 0,i).pipe(ya(v8,[]))}),Lp())}function $M(n,e){return e===void 0&&(e={}),BM(n).pipe(O(function(t){return t.map(function(r){return jM(r,e)})}))}function HM(n,e){for(var t=n.length,r=0;r<t;r++)if(n[r].snapshot.key===e)return r;return-1}function _8(n,e){if(e==null)return 0;var t=HM(n,e);return t===-1?n.length:t+1}function v8(n,e){var t=e.snapshot,r=e.prevKey,i=e.event,s=t.key,o=HM(n,s),a=_8(n,r||void 0);switch(i){case Ge.value:if(e.snapshot&&e.snapshot.exists()){var c=null;e.snapshot.forEach(function(d){var h={snapshot:d,event:Ge.value,prevKey:c};return c=d.key,n=tE(tE([],n,!0),[h],!1),!1})}return n;case Ge.added:if(o>-1){var l=n[o-1];(l&&l.snapshot.key||null)!==r&&(n=n.filter(function(d){return d.snapshot.key!==t.key}),n.splice(a,0,e))}else{if(r==null)return tE([e],n,!0);n=n.slice(),n.splice(a,0,e)}return n;case Ge.removed:return n.filter(function(d){return d.snapshot.key!==t.key});case Ge.changed:return n.map(function(d){return d.snapshot.key===s?e:d});case Ge.moved:if(o>-1){var u=n.splice(o,1)[0];return n=n.slice(),n.splice(a,0,u),n}return n;default:return n}}var WM="@firebase/database",zM="1.0.8";var XE="";function y8(n){XE=n}var lE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Be(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:fo(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var uE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return kn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Ck=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new lE(e)}}catch{}return new uE},os=Ck("localStorage"),dE=Ck("sessionStorage");var na=new Ur("@firebase/database"),I8=function(){let n=1;return function(){return n++}}(),bk=function(n){let e=n0(n),t=new Jd;t.update(e);let r=t.digest();return Zd.encodeByteArray(r)},Rl=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Rl.apply(null,r):typeof r=="object"?e+=Be(r):e+=r,e+=" "}return e},as=null,GM=!0,E8=function(n,e){T(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(na.logLevel=he.VERBOSE,as=na.log.bind(na),e&&dE.set("logging_enabled",!0)):typeof n=="function"?as=n:(as=null,dE.remove("logging_enabled"))},Je=function(...n){if(GM===!0&&(GM=!1,as===null&&dE.get("logging_enabled")===!0&&E8(!0)),as){let e=Rl.apply(null,n);as(e)}},Ml=function(n){return function(...e){Je(n,...e)}},hE=function(...n){let e="FIREBASE INTERNAL ERROR: "+Rl(...n);na.error(e)},pr=function(...n){let e=`FIREBASE FATAL ERROR: ${Rl(...n)}`;throw na.error(e),new Error(e)},Mt=function(...n){let e="FIREBASE WARNING: "+Rl(...n);na.warn(e)},w8=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Mt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Tk=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},C8=function(n){if(Mn()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ia="[MIN_NAME]",cs="[MAX_NAME]",ua=function(n,e){if(n===e)return 0;if(n===ia||e===cs)return-1;if(e===ia||n===cs)return 1;{let t=qM(n),r=qM(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},b8=function(n,e){return n===e?0:n<e?-1:1},vl=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Be(e))},ew=function(n){if(typeof n!="object"||n===null)return Be(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Be(e[r]),t+=":",t+=ew(n[e[r]]);return t+="}",t},Dk=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Yt(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var Sk=function(n){T(!Tk(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},T8=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},D8=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var S8=new RegExp("^-?(0*)\\d{1,10}$"),A8=-2147483648,N8=2147483647,qM=function(n){if(S8.test(n)){let e=Number(n);if(e>=A8&&e<=N8)return e}return null},kl=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Mt("Exception was thrown by user callback.",t),e},Math.floor(0))}},R8=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Cl=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var fE=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Mt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var pE=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Mt(e)}},bl=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Vf="5",Ak="v",Nk="s",Rk="r",Mk="f",kk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Pk="ls",Ok="p",mE="ac",xk="websocket",Lk="long_polling";var Uf=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=os.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&os.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function M8(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Fk(n,e,t){T(typeof e=="string","typeof type must == string"),T(typeof t=="object","typeof params must == object");let r;if(e===xk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Lk)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);M8(n)&&(t.ns=n.namespace);let i=[];return Yt(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var gE=class{constructor(){this.counters_={}}incrementCounter(e,t=1){kn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return HS(this.counters_)}};var nE={},rE={};function tw(n){let e=n.toString();return nE[e]||(nE[e]=new gE),nE[e]}function k8(n,e){let t=n.toString();return rE[t]||(rE[t]=e()),rE[t]}var _E=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&kl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var KM="start",P8="close",O8="pLPCommand",x8="pRTLPCB",Vk="id",Uk="pw",jk="ser",L8="cb",F8="seg",V8="ts",U8="d",j8="dframe",Bk=1870,$k=30,B8=Bk-$k,$8=25e3,H8=3e4,vE=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ml(e),this.stats_=tw(t),this.urlFn=c=>(this.appCheckToken&&(c[mE]=this.appCheckToken),Fk(t,Lk,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _E(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(H8)),C8(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yE((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===KM)this.id=a,this.password=c;else if(o===P8)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[KM]="t",r[jk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[L8]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Ak]=Vf,this.transportSessionId&&(r[Nk]=this.transportSessionId),this.lastSessionId&&(r[Pk]=this.lastSessionId),this.applicationId&&(r[Ok]=this.applicationId),this.appCheckToken&&(r[mE]=this.appCheckToken),typeof location<"u"&&location.hostname&&kk.test(location.hostname)&&(r[Rk]=Mk);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Mn()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!T8()&&!D8()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Be(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=U_(t),i=Dk(r,B8);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Mn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[j8]="t",r[Vk]=e,r[Uk]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Be(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},yE=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Mn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=I8(),window[O8+this.uniqueCallbackIdentifier]=e,window[x8+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Je("frame writing exception"),a.stack&&Je(a.stack),Je(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Je("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Vk]=this.myID,e[Uk]=this.myPW,e[jk]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$k+r.length<=Bk;){let o=this.pendingSegs.shift();r=r+"&"+F8+i+"="+o.seg+"&"+V8+i+"="+o.ts+"&"+U8+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor($8)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){Mn()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Je("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var W8=16384,z8=45e3,jf=null;typeof MozWebSocket<"u"?jf=MozWebSocket:typeof WebSocket<"u"&&(jf=WebSocket);var yl=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ml(this.connId),this.stats_=tw(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[Ak]=Vf,!Mn()&&typeof location<"u"&&location.hostname&&kk.test(location.hostname)&&(a[Rk]=Mk),r&&(a[Nk]=r),i&&(a[Pk]=i),s&&(a[mE]=s),o&&(a[Ok]=o),Fk(t,xk,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,os.set("previous_websocket_failure",!0);try{let i;if(Mn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Vf}/${XE}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new jf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&jf!==null&&!n.forceDisallow_}static previouslyFailed(){return os.isInMemoryStorage||os.get("previous_websocket_failure")===!0}markConnectionHealthy(){os.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=fo(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(T(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Be(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Dk(r,W8);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(z8))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),G8=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[vE,yl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=yl&&yl.isAvailable(),i=r&&!yl.previouslyFailed();if(t.webSocketOnly&&(r||Mt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[yl];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),q8=6e4,K8=5e3,Y8=10*1024,Q8=100*1024,iE="t",YM="d",J8="s",QM="r",Z8="e",JM="o",ZM="a",XM="n",ek="p",X8="h",IE=class{constructor(e,t,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ml("c:"+this.id+":"),this.transportManager_=new G8(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Cl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Q8?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Y8?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(iE in e){let t=e[iE];t===ZM?this.upgradeIfSecondaryHealthy_():t===QM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===JM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=vl("t",e),r=vl("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ek,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ZM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:XM,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=vl("t",e),r=vl("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=vl(iE,e);if(YM in e){let r=e[YM];if(t===X8){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===XM){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===J8?this.onConnectionShutdown_(r):t===QM?this.onReset_(r):t===Z8?hE("Server Error: "+r):t===JM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hE("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Vf!==r&&Mt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Cl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(q8))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(K8))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ek,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(os.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Bf=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var $f=class{constructor(e){this.allowedEvents_=e,this.listeners_={},T(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){T(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Hf=class n extends $f{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!hc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return T(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var tk=32,nk=768,Ie=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function _e(){return new Ie("")}function Z(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function oi(n){return n.pieces_.length-n.pieceNum_}function Ce(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ie(n.pieces_,e)}function Hk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function e6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Wk(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function zk(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ie(e,0)}function Ue(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ie)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ie(t,0)}function X(n){return n.pieceNum_>=n.pieces_.length}function qt(n,e){let t=Z(n),r=Z(e);if(t===null)return e;if(t===r)return qt(Ce(n),Ce(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Gk(n,e){if(oi(n)!==oi(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function vn(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(oi(n)>oi(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var EE=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Wk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=mc(this.parts_[r]);qk(this)}};function t6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=mc(e),qk(n)}function n6(n){let e=n.parts_.pop();n.byteLength_-=mc(e),n.parts_.length>0&&(n.byteLength_-=1)}function qk(n){if(n.byteLength_>nk)throw new Error(n.errorPrefix_+"has a key path longer than "+nk+" bytes ("+n.byteLength_+").");if(n.parts_.length>tk)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tk+") or object contains a cycle "+ss(n))}function ss(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var wE=class n extends $f{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return T(e==="visible","Unknown event type: "+e),[this.visible_]}};var Il=1e3,r6=60*5*1e3,rk=30*1e3,i6=1.3,s6=3e4,o6="server_kill",ik=3,nw=(()=>{class n extends Bf{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Ml("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Il,this.maxReconnectDelay_=r6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Mn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wE.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Hf.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Be(o)),T(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Li,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),T(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),T(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&kn(t,"w")){let i=Vi(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Mt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||e0(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=rk)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=XS(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),T(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Be(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):hE("Unrecognized action received from server: "+Be(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){T(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Il,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Il,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>s6&&(this.reconnectDelay_=Il),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*i6)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){T(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Je("getToken() completed but was canceled"):(Je("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new IE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,m=>{Mt(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(o6)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Mt(h),l())}}})}interrupt(t){Je("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Je("Resuming connection for reason: "+t),delete this.interruptReasons_[t],fc(this.interruptReasons_)&&(this.reconnectDelay_=Il,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>ew(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new Ie(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Je("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ik&&(this.reconnectDelay_=rk,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Je("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ik&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Mn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+XE.replace(/\./g,"-")]=1,hc()?t["framework.cordova"]=1:Xd()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Hf.getInstance().currentlyOnline();return fc(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),ee=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var sa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new ee(ia,e),i=new ee(ia,t);return this.compare(r,i)!==0}minPost(){return ee.MIN}};var Ff,Wf=class extends sa{static get __EMPTY_NODE(){return Ff}static set __EMPTY_NODE(e){Ff=e}compare(e,t){return ua(e.name,t.name)}isDefinedOn(e){throw Fi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ee.MIN}maxPost(){return new ee(cs,Ff)}makePost(e,t){return T(typeof e=="string","KeyIndex indexValue must always be a string."),new ee(e,Ff)}toString(){return".key"}},ra=new Wf;var ea=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},_n=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Kt.EMPTY_NODE,this.right=o??Kt.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Kt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Kt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),CE=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new _n(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Kt=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,_n.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_n.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ea(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ea(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ea(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ea(this.root_,null,this.comparator_,!0,e)}};Kt.EMPTY_NODE=new CE;function a6(n,e){return ua(n.name,e.name)}function rw(n,e){return ua(n,e)}var bE;function c6(n){bE=n}var Kk=function(n){return typeof n=="number"?"number:"+Sk(n):"string:"+n},Yk=function(n){if(n.isLeafNode()){let e=n.val();T(typeof e=="string"||typeof e=="number"||typeof e=="object"&&kn(e,".sv"),"Priority must be a string or number.")}else T(n===bE||n.isEmpty(),"priority of unexpected type.");T(n===bE||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var sk,oa=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,T(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Yk(this.priorityNode_)}static set __childrenNodeConstructor(t){sk=t}static get __childrenNodeConstructor(){return sk}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return X(t)?this:Z(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Z(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(T(i!==".priority"||oi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ce(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Kk(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=Sk(this.value_):t+=this.value_,this.lazyHash_=bk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(T(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return T(s>=0,"Unknown leaf type: "+r),T(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),Qk,Jk;function l6(n){Qk=n}function u6(n){Jk=n}var TE=class extends sa{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?ua(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ee.MIN}maxPost(){return new ee(cs,new oa("[PRIORITY-POST]",Jk))}makePost(e,t){let r=Qk(e);return new ee(t,new oa("[PRIORITY-POST]",r))}toString(){return".priority"}},Xe=new TE;var d6=Math.log(2),DE=class{constructor(e){let t=s=>parseInt(Math.log(s)/d6,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},zf=function(n,e,t,r){n.sort(e);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=n[c],h=t?t(d):d,new _n(h,d.node,_n.BLACK,null,null);{let f=parseInt(u/2,10)+c,m=i(c,f),y=i(f+1,l);return d=n[f],h=t?t(d):d,new _n(h,d.node,_n.BLACK,m,y)}},s=function(c){let l=null,u=null,d=n.length,h=function(m,y){let D=d-m,M=d;d-=m;let ne=i(D+1,M),re=n[D],we=t?t(re):re;f(new _n(we,re.node,y,null,ne))},f=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let y=c.nextBitIsOne(),D=Math.pow(2,c.count-(m+1));y?h(D,_n.BLACK):(h(D,_n.BLACK),h(D,_n.RED))}return u},o=new DE(n.length),a=s(o);return new Kt(r||e,a)};var sE,Xo={},aa=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return T(Xo&&Xe,"ChildrenNode.ts has not been loaded"),sE=sE||new n({".priority":Xo},{".priority":Xe}),sE}get(e){let t=Vi(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Kt?t:null}hasIndex(e){return kn(this.indexSet_,e.toString())}addIndex(e,t){T(e!==ra,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(ee.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=zf(r,e.getCompare()):a=Xo;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let r=pc(this.indexes_,(i,s)=>{let o=Vi(this.indexSet_,s);if(T(o,"Missing index implementation for "+s),i===Xo)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(ee.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),zf(a,o.getCompare())}else return Xo;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new ee(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=pc(this.indexes_,i=>{if(i===Xo)return i;{let s=t.get(e.name);return s?i.remove(new ee(e.name,s)):i}});return new n(r,this.indexSet_)}};var El,Te=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Yk(this.priorityNode_),this.children_.isEmpty()&&T(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return El||(El=new n(new Kt(rw),null,aa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||El}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?El:r}}getChild(t){let r=Z(t);return r===null?this:this.getImmediateChild(r).getChild(Ce(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(T(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new ee(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?El:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=Z(t);if(i===null)return r;{T(Z(t)!==".priority"||oi(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ce(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Xe,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Kk(this.getPriority().val())+":"),this.forEachChild(Xe,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":bk(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new ee(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new ee(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new ee(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,ee.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,ee.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Pl?-1:0}withIndex(t){if(t===ra||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ra||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Xe),s=r.getIterator(Xe),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===ra?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),SE=class extends Te{constructor(){super(new Kt(rw),Te.EMPTY_NODE,aa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Te.EMPTY_NODE}isEmpty(){return!1}},Pl=new SE;Object.defineProperties(ee,{MIN:{value:new ee(ia,Te.EMPTY_NODE)},MAX:{value:new ee(cs,Pl)}});Wf.__EMPTY_NODE=Te.EMPTY_NODE;oa.__childrenNodeConstructor=Te;c6(Pl);u6(Pl);var h6=!0;function Ze(n,e=null){if(n===null)return Te.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),T(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new oa(t,Ze(e))}if(!(n instanceof Array)&&h6){let t=[],r=!1;if(Yt(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=Ze(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new ee(o,c)))}}),t.length===0)return Te.EMPTY_NODE;let s=zf(t,a6,o=>o.name,rw);if(r){let o=zf(t,Xe.getCompare());return new Te(s,Ze(e),new aa({".priority":o},{".priority":Xe}))}else return new Te(s,Ze(e),aa.Default)}else{let t=Te.EMPTY_NODE;return Yt(n,(r,i)=>{if(kn(n,r)&&r.substring(0,1)!=="."){let s=Ze(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Ze(e))}}l6(Ze);var AE=class extends sa{constructor(e){super(),this.indexPath_=e,T(!X(e)&&Z(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?ua(e.name,t.name):s}makePost(e,t){let r=Ze(e),i=Te.EMPTY_NODE.updateChild(this.indexPath_,r);return new ee(t,i)}maxPost(){let e=Te.EMPTY_NODE.updateChild(this.indexPath_,Pl);return new ee(cs,e)}toString(){return Wk(this.indexPath_,0).join("/")}};var NE=class extends sa{compare(e,t){let r=e.node.compareTo(t.node);return r===0?ua(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ee.MIN}maxPost(){return ee.MAX}makePost(e,t){let r=Ze(e);return new ee(t,r)}toString(){return".value"}},f6=new NE;function p6(n){return{type:"value",snapshotNode:n}}function m6(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function g6(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ok(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function _6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var RE=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return T(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return T(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ia}hasEnd(){return this.endSet_}getIndexEndValue(){return T(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return T(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return T(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xe}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function ak(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Xe?t="$priority":n.index_===f6?t="$value":n.index_===ra?t="$key":(T(n.index_ instanceof AE,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Be(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Be(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Be(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Be(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Be(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ck(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Xe&&(e.i=n.index_.toString()),e}var ME=class n extends Bf{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ml("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(T(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=ak(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Vi(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=ak(e._queryParams),r=e._path.toString(),i=new Li;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Vr(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=fo(a.responseText)}catch{Mt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Mt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var kE=class{constructor(){this.rootNode_=Te.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Gf(){return{value:null,children:new Map}}function Zk(n,e,t){if(X(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Z(e);n.children.has(r)||n.children.set(r,Gf());let i=n.children.get(r);e=Ce(e),Zk(i,e,t)}}function PE(n,e,t){n.value!==null?t(e,n.value):v6(n,(r,i)=>{let s=new Ie(e.toString()+"/"+r);PE(i,s,t)})}function v6(n,e){n.children.forEach((t,r)=>{e(r,t)})}var OE=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Yt(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var lk=10*1e3,y6=30*1e3,I6=5*60*1e3,xE=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new OE(e);let r=lk+(y6-lk)*Math.random();Cl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Yt(e,(i,s)=>{s>0&&kn(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Cl(this.reportStats_.bind(this),Math.floor(Math.random()*2*I6))}};var fr=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(fr||{});function Xk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function eP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var LE=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=fr.ACK_USER_WRITE,this.source=Xk()}operationForChild(e){if(X(this.path)){if(this.affectedTree.value!=null)return T(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Ie(e));return new n(_e(),t,this.revert)}}else return T(Z(this.path)===e,"operationForChild called for unrelated child."),new n(Ce(this.path),this.affectedTree,this.revert)}};var ca=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=fr.OVERWRITE}operationForChild(e){return X(this.path)?new n(this.source,_e(),this.snap.getImmediateChild(e)):new n(this.source,Ce(this.path),this.snap)}};var qf=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=fr.MERGE}operationForChild(e){if(X(this.path)){let t=this.children.subtree(new Ie(e));return t.isEmpty()?null:t.value?new ca(this.source,_e(),t.value):new n(this.source,_e(),t)}else return T(Z(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Ce(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Sl=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(X(e))return this.isFullyInitialized()&&!this.filtered_;let t=Z(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function E6(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(_6(o.childName,o.snapshotNode))}),wl(n,i,"child_removed",e,r,t),wl(n,i,"child_added",e,r,t),wl(n,i,"child_moved",s,r,t),wl(n,i,"child_changed",e,r,t),wl(n,i,"value",e,r,t),i}function wl(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>C6(n,a,c)),o.forEach(a=>{let c=w6(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function w6(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function C6(n,e,t){if(e.childName==null||t.childName==null)throw Fi("Should only compare child_ events.");let r=new ee(e.childName,e.snapshotNode),i=new ee(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function nP(n,e){return{eventCache:n,serverCache:e}}function Tl(n,e,t,r){return nP(new Sl(e,t,r),n.serverCache)}function rP(n,e,t,r){return nP(n.eventCache,new Sl(e,t,r))}function FE(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ls(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var oE,b6=()=>(oE||(oE=new Kt(b8)),oE),vt=class n{constructor(e,t=b6()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return Yt(e,(r,i)=>{t=t.set(new Ie(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:_e(),value:this.value};if(X(e))return null;{let r=Z(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ce(e),t);return s!=null?{path:Ue(new Ie(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(X(e))return this;{let t=Z(e),r=this.children.get(t);return r!==null?r.subtree(Ce(e)):new n(null)}}set(e,t){if(X(e))return new n(t,this.children);{let r=Z(e),s=(this.children.get(r)||new n(null)).set(Ce(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(X(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Z(e),r=this.children.get(t);if(r){let i=r.remove(Ce(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(X(e))return this.value;{let t=Z(e),r=this.children.get(t);return r?r.get(Ce(e)):null}}setTree(e,t){if(X(e))return t;{let r=Z(e),s=(this.children.get(r)||new n(null)).setTree(Ce(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(_e(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ue(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,_e(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(X(e))return null;{let s=Z(e),o=this.children.get(s);return o?o.findOnPath_(Ce(e),Ue(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_e(),t)}foreachOnPath_(e,t,r){if(X(e))return this;{this.value&&r(t,this.value);let i=Z(e),s=this.children.get(i);return s?s.foreachOnPath_(Ce(e),Ue(t,i),r):new n(null)}}foreach(e){this.foreach_(_e(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ue(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var yn=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new vt(null))}};function Dl(n,e,t){if(X(e))return new yn(new vt(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=qt(i,e);return s=s.updateChild(o,t),new yn(n.writeTree_.set(i,s))}else{let i=new vt(t),s=n.writeTree_.setTree(e,i);return new yn(s)}}}function uk(n,e,t){let r=n;return Yt(t,(i,s)=>{r=Dl(r,Ue(e,i),s)}),r}function dk(n,e){if(X(e))return yn.empty();{let t=n.writeTree_.setTree(e,new vt(null));return new yn(t)}}function VE(n,e){return ds(n,e)!=null}function ds(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(qt(t.path,e)):null}function hk(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Xe,(r,i)=>{e.push(new ee(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ee(r,i.value))}),e}function si(n,e){if(X(e))return n;{let t=ds(n,e);return t!=null?new yn(new vt(t)):new yn(n.writeTree_.subtree(e))}}function UE(n){return n.writeTree_.isEmpty()}function la(n,e){return iP(_e(),n.writeTree_,e)}function iP(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(T(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=iP(Ue(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Ue(n,".priority"),r)),t}}function sP(n,e){return uP(e,n)}function T6(n,e,t,r,i){T(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Dl(n.visibleWrites,e,t)),n.lastWriteId=r}function D6(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function S6(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);T(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&A6(a,r.path)?i=!1:vn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return N6(n),!0;if(r.snap)n.visibleWrites=dk(n.visibleWrites,r.path);else{let a=r.children;Yt(a,c=>{n.visibleWrites=dk(n.visibleWrites,Ue(r.path,c))})}return!0}else return!1}function A6(n,e){if(n.snap)return vn(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&vn(Ue(n.path,t),e))return!0;return!1}function N6(n){n.visibleWrites=oP(n.allWrites,R6,_e()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function R6(n){return n.visible}function oP(n,e,t){let r=yn.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)vn(t,o)?(a=qt(t,o),r=Dl(r,a,s.snap)):vn(o,t)&&(a=qt(o,t),r=Dl(r,_e(),s.snap.getChild(a)));else if(s.children){if(vn(t,o))a=qt(t,o),r=uk(r,a,s.children);else if(vn(o,t))if(a=qt(o,t),X(a))r=uk(r,_e(),s.children);else{let c=Vi(s.children,Z(a));if(c){let l=c.getChild(Ce(a));r=Dl(r,_e(),l)}}}else throw Fi("WriteRecord should have .snap or .children")}}return r}function aP(n,e,t,r,i){if(!r&&!i){let s=ds(n.visibleWrites,e);if(s!=null)return s;{let o=si(n.visibleWrites,e);if(UE(o))return t;if(t==null&&!VE(o,_e()))return null;{let a=t||Te.EMPTY_NODE;return la(o,a)}}}else{let s=si(n.visibleWrites,e);if(!i&&UE(s))return t;if(!i&&t==null&&!VE(s,_e()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(vn(l.path,e)||vn(e,l.path))},a=oP(n.allWrites,o,e),c=t||Te.EMPTY_NODE;return la(a,c)}}}function M6(n,e,t){let r=Te.EMPTY_NODE,i=ds(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=si(n.visibleWrites,e);return t.forEachChild(Xe,(o,a)=>{let c=la(si(s,new Ie(o)),a);r=r.updateImmediateChild(o,c)}),hk(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=si(n.visibleWrites,e);return hk(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function k6(n,e,t,r,i){T(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Ue(e,t);if(VE(n.visibleWrites,s))return null;{let o=si(n.visibleWrites,s);return UE(o)?i.getChild(t):la(o,i.getChild(t))}}function P6(n,e,t,r){let i=Ue(e,t),s=ds(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=si(n.visibleWrites,i);return la(o,r.getNode().getImmediateChild(t))}else return null}function O6(n,e){return ds(n.visibleWrites,e)}function x6(n,e,t,r,i,s,o){let a,c=si(n.visibleWrites,e),l=ds(c,_e());if(l!=null)a=l;else if(t!=null)a=la(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function L6(){return{visibleWrites:yn.empty(),allWrites:[],lastWriteId:-1}}function jE(n,e,t,r){return aP(n.writeTree,n.treePath,e,t,r)}function cP(n,e){return M6(n.writeTree,n.treePath,e)}function fk(n,e,t,r){return k6(n.writeTree,n.treePath,e,t,r)}function Kf(n,e){return O6(n.writeTree,Ue(n.treePath,e))}function F6(n,e,t,r,i,s){return x6(n.writeTree,n.treePath,e,t,r,i,s)}function iw(n,e,t){return P6(n.writeTree,n.treePath,e,t)}function lP(n,e){return uP(Ue(n.treePath,e),n.writeTree)}function uP(n,e){return{treePath:n,writeTree:e}}var BE=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;T(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),T(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,ok(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,g6(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,m6(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,ok(r,e.snapshotNode,i.oldSnap));else throw Fi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var $E=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},dP=new $E,Al=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Sl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iw(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ls(this.viewCache_),s=F6(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function V6(n,e){T(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),T(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function U6(n,e,t,r,i){let s=new BE,o,a;if(t.type===fr.OVERWRITE){let l=t;l.source.fromUser?o=HE(n,e,l.path,l.snap,r,i,s):(T(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!X(l.path),o=Yf(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===fr.MERGE){let l=t;l.source.fromUser?o=B6(n,e,l.path,l.children,r,i,s):(T(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=WE(n,e,l.path,l.children,r,i,a,s))}else if(t.type===fr.ACK_USER_WRITE){let l=t;l.revert?o=W6(n,e,l.path,r,i,s):o=$6(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===fr.LISTEN_COMPLETE)o=H6(n,e,t.path,r,s);else throw Fi("Unknown operation type: "+t.type);let c=s.getChanges();return j6(e,o,c),{viewCache:o,changes:c}}function j6(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=FE(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(p6(FE(e)))}}function hP(n,e,t,r,i,s){let o=e.eventCache;if(Kf(r,t)!=null)return e;{let a,c;if(X(t))if(T(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=ls(e),u=l instanceof Te?l:Te.EMPTY_NODE,d=cP(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=jE(r,ls(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Z(t);if(l===".priority"){T(oi(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=fk(r,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=Ce(t),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=fk(r,t,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=iw(r,l,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Tl(e,a,o.isFullyInitialized()||X(t),n.filter.filtersNodes())}}function Yf(n,e,t,r,i,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(X(t))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(t,r);l=u.updateFullNode(c.getNode(),f,null)}else{let f=Z(t);if(!c.isCompleteForPath(t)&&oi(t)>1)return e;let m=Ce(t),D=c.getNode().getImmediateChild(f).updateChild(m,r);f===".priority"?l=u.updatePriority(c.getNode(),D):l=u.updateChild(c.getNode(),f,D,m,dP,null)}let d=rP(e,l,c.isFullyInitialized()||X(t),u.filtersNodes()),h=new Al(i,d,s);return hP(n,d,t,i,h,a)}function HE(n,e,t,r,i,s,o){let a=e.eventCache,c,l,u=new Al(i,e,s);if(X(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Tl(e,l,!0,n.filter.filtersNodes());else{let d=Z(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=Tl(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=Ce(t),f=a.getNode().getImmediateChild(d),m;if(X(h))m=r;else{let y=u.getCompleteChild(d);y!=null?Hk(h)===".priority"&&y.getChild(zk(h)).isEmpty()?m=y:m=y.updateChild(h,r):m=Te.EMPTY_NODE}if(f.equals(m))c=e;else{let y=n.filter.updateChild(a.getNode(),d,m,h,u,o);c=Tl(e,y,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function pk(n,e){return n.eventCache.isCompleteForChild(e)}function B6(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=Ue(t,c);pk(e,Z(u))&&(a=HE(n,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=Ue(t,c);pk(e,Z(u))||(a=HE(n,a,u,l,i,s,o))}),a}function mk(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function WE(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;X(t)?l=r:l=new vt(null).setTree(t,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),m=mk(n,f,h);c=Yf(n,c,new Ie(d),m,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let m=e.serverCache.getNode().getImmediateChild(d),y=mk(n,m,h);c=Yf(n,c,new Ie(d),y,i,s,o,a)}}),c}function $6(n,e,t,r,i,s,o){if(Kf(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(X(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Yf(n,e,t,c.getNode().getChild(t),i,s,a,o);if(X(t)){let l=new vt(null);return c.getNode().forEachChild(ra,(u,d)=>{l=l.set(new Ie(u),d)}),WE(n,e,t,l,i,s,a,o)}else return e}else{let l=new vt(null);return r.foreach((u,d)=>{let h=Ue(t,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),WE(n,e,t,l,i,s,a,o)}}function H6(n,e,t,r,i){let s=e.serverCache,o=rP(e,s.getNode(),s.isFullyInitialized()||X(t),s.isFiltered());return hP(n,o,t,r,dP,i)}function W6(n,e,t,r,i,s){let o;if(Kf(r,t)!=null)return e;{let a=new Al(r,e,i),c=e.eventCache.getNode(),l;if(X(t)||Z(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=jE(r,ls(e));else{let d=e.serverCache.getNode();T(d instanceof Te,"serverChildren would be complete if leaf node"),u=cP(r,d)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=Z(t),d=iw(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,Ce(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,Te.EMPTY_NODE,Ce(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=jE(r,ls(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Kf(r,_e())!=null,Tl(e,l,o,n.filter.filtersNodes())}}function z6(n,e){let t=ls(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!X(e)&&!t.getImmediateChild(Z(e)).isEmpty())?t.getChild(e):null}function gk(n,e,t,r){e.type===fr.MERGE&&e.source.queryId!==null&&(T(ls(n.viewCache_),"We should always have a full cache before handling merges"),T(FE(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=U6(n.processor_,i,e,t,r);return V6(n.processor_,s.viewCache),T(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,G6(n,s.changes,s.viewCache.eventCache.getNode(),null)}function G6(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return E6(n.eventGenerator_,e,t,i)}var _k;function q6(n){T(!_k,"__referenceConstructor has already been defined"),_k=n}function sw(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return T(s!=null,"SyncTree gave us an op for an invalid query."),gk(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(gk(o,e,t,r));return s}}function ow(n,e){let t=null;for(let r of n.views.values())t=t||z6(r,e);return t}var vk;function K6(n){T(!vk,"__referenceConstructor has already been defined"),vk=n}var Qf=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vt(null),this.pendingWriteTree_=L6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Y6(n,e,t,r,i){return T6(n.pendingWriteTree_,e,t,r,i),i?Zf(n,new ca(Xk(),e,t)):[]}function ta(n,e,t=!1){let r=D6(n.pendingWriteTree_,e);if(S6(n.pendingWriteTree_,e)){let s=new vt(null);return r.snap!=null?s=s.set(_e(),!0):Yt(r.children,o=>{s=s.set(new Ie(o),!0)}),Zf(n,new LE(r.path,s,t))}else return[]}function Jf(n,e,t){return Zf(n,new ca(eP(),e,t))}function Q6(n,e,t){let r=vt.fromObject(t);return Zf(n,new qf(eP(),e,r))}function J6(n,e,t,r){let i=gP(n,r);if(i!=null){let s=_P(i),o=s.path,a=s.queryId,c=qt(o,e),l=new ca(tP(a),c,t);return vP(n,o,l)}else return[]}function Z6(n,e,t,r){let i=gP(n,r);if(i){let s=_P(i),o=s.path,a=s.queryId,c=qt(o,e),l=vt.fromObject(t),u=new qf(tP(a),c,l);return vP(n,o,u)}else return[]}function fP(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=qt(o,e),l=ow(a,c);if(l)return l});return aP(i,e,s,t,!0)}function Zf(n,e){return pP(e,n.syncPointTree_,null,sP(n.pendingWriteTree_,_e()))}function pP(n,e,t,r){if(X(n.path))return mP(n,e,t,r);{let i=e.get(_e());t==null&&i!=null&&(t=ow(i,_e()));let s=[],o=Z(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=lP(r,o);s=s.concat(pP(a,c,l,u))}return i&&(s=s.concat(sw(i,n,r,t))),s}}function mP(n,e,t,r){let i=e.get(_e());t==null&&i!=null&&(t=ow(i,_e()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=lP(r,o),u=n.operationForChild(o);u&&(s=s.concat(mP(u,a,c,l)))}),i&&(s=s.concat(sw(i,n,r,t))),s}function gP(n,e){return n.tagToQueryMap.get(e)}function _P(n){let e=n.indexOf("$");return T(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ie(n.substr(0,e))}}function vP(n,e,t){let r=n.syncPointTree_.get(e);T(r,"Missing sync point for query tag that we're tracking");let i=sP(n.pendingWriteTree_,e);return sw(r,t,i,null)}var zE=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},GE=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Ue(this.path_,e);return new n(this.syncTree_,t)}node(){return fP(this.syncTree_,this.path_)}},X6=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},yk=function(n,e,t){if(!n||typeof n!="object")return n;if(T(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return e5(n[".sv"],e,t);if(typeof n[".sv"]=="object")return t5(n[".sv"],e);T(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},e5=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:T(!1,"Unexpected server value: "+n)}},t5=function(n,e,t){n.hasOwnProperty("increment")||T(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&T(!1,"Unexpected increment value: "+r);let i=e.node();if(T(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},n5=function(n,e,t,r){return aw(e,new GE(t,n),r)},r5=function(n,e,t){return aw(n,new zE(e),t)};function aw(n,e,t){let r=n.getPriority().val(),i=yk(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=yk(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new oa(a,Ze(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new oa(i))),o.forEachChild(Xe,(a,c)=>{let l=aw(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Nl=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function cw(n,e){let t=e instanceof Ie?e:new Ie(e),r=n,i=Z(t);for(;i!==null;){let s=Vi(r.node.children,i)||{children:{},childCount:0};r=new Nl(i,r,s),t=Ce(t),i=Z(t)}return r}function da(n){return n.node.value}function yP(n,e){n.node.value=e,qE(n)}function IP(n){return n.node.childCount>0}function i5(n){return da(n)===void 0&&!IP(n)}function Xf(n,e){Yt(n.node.children,(t,r)=>{e(new Nl(t,n,r))})}function EP(n,e,t,r){t&&!r&&e(n),Xf(n,i=>{EP(i,e,!0,r)}),t&&r&&e(n)}function s5(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ol(n){return new Ie(n.parent===null?n.name:Ol(n.parent)+"/"+n.name)}function qE(n){n.parent!==null&&o5(n.parent,n.name,n)}function o5(n,e,t){let r=i5(t),i=kn(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,qE(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,qE(n))}var a5=/[\[\].#$\/\u0000-\u001F\u007F]/,c5=/[\[\].#$\u0000-\u001F\u007F]/,aE=10*1024*1024,wP=function(n){return typeof n=="string"&&n.length!==0&&!a5.test(n)},CP=function(n){return typeof n=="string"&&n.length!==0&&!c5.test(n)},l5=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),CP(n)};var bP=function(n,e,t){let r=t instanceof Ie?new EE(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ss(r));if(typeof e=="function")throw new Error(n+"contains a function "+ss(r)+" with contents = "+e.toString());if(Tk(e))throw new Error(n+"contains "+e.toString()+" "+ss(r));if(typeof e=="string"&&e.length>aE/3&&mc(e)>aE)throw new Error(n+"contains a string greater than "+aE+" utf8 bytes "+ss(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Yt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!wP(o)))throw new Error(n+" contains an invalid key ("+o+") "+ss(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);t6(r,o),bP(n,a,r),n6(r)}),i&&s)throw new Error(n+' contains ".value" child '+ss(r)+" in addition to actual children.")}};var TP=function(n,e,t,r){if(!(r&&t===void 0)&&!CP(t))throw new Error(W_(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},u5=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),TP(n,e,t,r)};var d5=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!wP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!l5(t))throw new Error(W_(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var KE=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function h5(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!Gk(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function hs(n,e,t){h5(n,t),f5(n,r=>vn(r,e)||vn(e,r))}function f5(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(p5(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function p5(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();as&&Je("event: "+t.toString()),kl(r)}}}var m5="repo_interrupt",g5=25,YE=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gf(),this.transactionQueueTree_=new Nl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function _5(n,e,t){if(n.stats_=tw(n.repoInfo_),n.forceRestClient_||R8())n.server_=new ME(n.repoInfo_,(r,i,s,o)=>{Ik(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ek(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Be(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new nw(n.repoInfo_,e,(r,i,s,o)=>{Ik(n,r,i,s,o)},r=>{Ek(n,r)},r=>{y5(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=k8(n.repoInfo_,()=>new xE(n.stats_,n.server_)),n.infoData_=new kE,n.infoSyncTree_=new Qf({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Jf(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),lw(n,"connected",!1),n.serverSyncTree_=new Qf({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);hs(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function v5(n){let t=n.infoData_.getNode(new Ie(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function DP(n){return X6({timestamp:v5(n)})}function Ik(n,e,t,r,i){n.dataUpdateCount++;let s=new Ie(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=pc(t,l=>Ze(l));o=Z6(n.serverSyncTree_,s,c,i)}else{let c=Ze(t);o=J6(n.serverSyncTree_,s,c,i)}else if(r){let c=pc(t,l=>Ze(l));o=Q6(n.serverSyncTree_,s,c)}else{let c=Ze(t);o=Jf(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=dw(n,s)),hs(n.eventQueue_,a,o)}function Ek(n,e){lw(n,"connected",e),e===!1&&E5(n)}function y5(n,e){Yt(e,(t,r)=>{lw(n,t,r)})}function lw(n,e,t){let r=new Ie("/.info/"+e),i=Ze(t);n.infoData_.updateSnapshot(r,i);let s=Jf(n.infoSyncTree_,r,i);hs(n.eventQueue_,r,s)}function I5(n){return n.nextWriteId_++}function E5(n){SP(n,"onDisconnectEvents");let e=DP(n),t=Gf();PE(n.onDisconnect_,_e(),(i,s)=>{let o=n5(i,s,n.serverSyncTree_,e);Zk(t,i,o)});let r=[];PE(t,_e(),(i,s)=>{r=r.concat(Jf(n.serverSyncTree_,i,s));let o=T5(n,i);dw(n,o)}),n.onDisconnect_=Gf(),hs(n.eventQueue_,_e(),r)}function w5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(m5)}function SP(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Je(t,...e)}function AP(n,e,t){return fP(n.serverSyncTree_,e,t)||Te.EMPTY_NODE}function uw(n,e=n.transactionQueueTree_){if(e||ep(n,e),da(e)){let t=RP(n,e);T(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&C5(n,Ol(e),t)}else IP(e)&&Xf(e,t=>{uw(n,t)})}function C5(n,e,t){let r=t.map(l=>l.currentWriteId),i=AP(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let u=t[l];T(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=qt(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{SP(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(ta(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();ep(n,cw(n.transactionQueueTree_,e)),uw(n,n.transactionQueueTree_),hs(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)kl(d[h])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Mt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}dw(n,e)}},o)}function dw(n,e){let t=NP(n,e),r=Ol(t),i=RP(n,t);return b5(n,i,r),r}function b5(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=qt(t,c.path),u=!1,d;if(T(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(ta(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=g5)u=!0,d="maxretry",i=i.concat(ta(n.serverSyncTree_,c.currentWriteId,!0));else{let h=AP(n,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){bP("transaction failed: Data returned ",f,c.path);let m=Ze(f);typeof f=="object"&&f!=null&&kn(f,".priority")||(m=m.updatePriority(h.getPriority()));let D=c.currentWriteId,M=DP(n),ne=r5(m,h,M);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=ne,c.currentWriteId=I5(n),o.splice(o.indexOf(D),1),i=i.concat(Y6(n.serverSyncTree_,c.path,ne,c.currentWriteId,c.applyLocally)),i=i.concat(ta(n.serverSyncTree_,D,!0))}else u=!0,d="nodata",i=i.concat(ta(n.serverSyncTree_,c.currentWriteId,!0))}hs(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}ep(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)kl(r[a]);uw(n,n.transactionQueueTree_)}function NP(n,e){let t,r=n.transactionQueueTree_;for(t=Z(e);t!==null&&da(r)===void 0;)r=cw(r,t),e=Ce(e),t=Z(e);return r}function RP(n,e){let t=[];return MP(n,e,t),t.sort((r,i)=>r.order-i.order),t}function MP(n,e,t){let r=da(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Xf(e,i=>{MP(n,i,t)})}function ep(n,e){let t=da(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,yP(e,t.length>0?t:void 0)}Xf(e,r=>{ep(n,r)})}function T5(n,e){let t=Ol(NP(n,e)),r=cw(n.transactionQueueTree_,e);return s5(r,i=>{cE(n,i)}),cE(n,r),EP(r,i=>{cE(n,i)}),t}function cE(n,e){let t=da(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(T(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(T(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(ta(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?yP(e,void 0):t.length=s+1,hs(n.eventQueue_,Ol(e),i);for(let o=0;o<r.length;o++)kl(r[o])}}function D5(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function S5(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Mt(`Invalid query segment '${t}' in query '${n}'`)}return e}var wk=function(n,e){let t=A5(n),r=t.namespace;t.domain==="firebase.com"&&pr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&pr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||w8();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Uf(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Ie(t.pathString)}},A5=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=D5(n.substring(u,d)));let h=S5(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")t="localhost";else if(f.split(".").length<=2)t=f;else{let m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),t=e.substring(m+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var QE=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return X(this._path)?null:Hk(this._path)}get ref(){return new us(this._repo,this._path)}get _queryIdentifier(){let e=ck(this._queryParams),t=ew(e);return t==="{}"?"default":t}get _queryObject(){return ck(this._queryParams)}isEqual(e){if(e=ft(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=Gk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+e6(this._path)}};var us=class n extends QE{constructor(e,t){super(e,t,new RE,!1)}get parent(){let e=zk(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};function kP(n,e){return n=ft(n),n._checkNotDeleted("ref"),e!==void 0?PP(n._root,e):n._root}function PP(n,e){return n=ft(n),Z(n._path)===null?u5("child","path",e,!1):TP("child","path",e,!1),new us(n._repo,Ue(n._path,e))}q6(us);K6(us);var N5="FIREBASE_DATABASE_EMULATOR_HOST",JE={},R5=!1;function M5(n,e,t,r){n.repoInfo_=new Uf(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function k5(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||pr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Je("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=wk(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[N5]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=wk(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new bl(bl.OWNER):new pE(n.name,n.options,e);d5("Invalid Firebase Database URL",o),X(o.path)||pr("Database URL must point to the root of a Firebase Database (not including a child path).");let d=O5(a,n,u,new fE(n.name,t));return new ZE(d,n)}function P5(n,e){let t=JE[e];(!t||t[n.key]!==n)&&pr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),w5(n),delete t[n.key]}function O5(n,e,t,r){let i=JE[e.name];i||(i={},JE[e.name]=i);let s=i[n.toURLString()];return s&&pr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new YE(n,R5,t,r),i[n.toURLString()]=s,s}var ZE=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(_5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new us(this._repo,_e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(P5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&pr("Cannot call "+e+" on a deleted database.")}};function OP(n=_o(),e){let t=yc(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=zS("database");r&&xP(t,...r)}return t}function xP(n,e,t,r={}){n=ft(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&pr("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new bl(bl.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:GS(r.mockUserToken,n.app.options.projectId);s=new bl(o)}M5(i,e,t,s)}function x5(n){y8($r),Br(new Ht("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return k5(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),xe(WM,zM,n),xe(WM,zM,"esm2017")}nw.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};nw.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};x5();var fs=class{constructor(e){return e}},LP="database",hw=class{constructor(){return Ic(LP)}};var fw=new S("angularfire2.database-instances");function L5(n,e){let t=sh(LP,n,e);return t&&new fs(t)}function F5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new fs(r)}}var V5={provide:hw,deps:[[new ot,fw]]},U5={provide:fs,useFactory:L5,deps:[[new ot,fw],ir]};function FP(n,...e){return xe("angularfire",Bi.full,"rtdb"),wt([U5,V5,{provide:fw,useFactory:F5(n),multi:!0,deps:[le,Ke,Io,$i,[new ot,jc],[new ot,yo],...e]}])}var VP=At($M,!0);var UP=At(OP,!0);var jP=At(kP,!0);var ai=class n{constructor(e){this.database=e}taskList=[];getTasks(){return this.taskList}modifyTask(e){switch(e.action){case"changePriorityUp":this.changePriorityUp(e.taskId);break;case"changeStatus":this.changeStatus(e.taskId);break;case"changePriorityDown":this.changePriorityDown(e.taskId);break;case"deleteTask":this.deleteTask(e.taskId);break}}changeStatus(e){let t=this.taskList.find(r=>r.id===e);if(t)switch(t.status){case"P":t.status="IP";break;case"IP":t.status="C";break;case"C":t.status="P";break}}changePriorityDown(e){let t=this.taskList.find(r=>r.id===e);if(t)switch(t.priority){case"H":t.priority="M";break;case"M":t.priority="L";break;case"L":t.priority="H";break}}changePriorityUp(e){let t=this.taskList.find(r=>r.id===e);if(t)switch(t.priority){case"H":t.priority="L";break;case"M":t.priority="H";break;case"L":t.priority="M";break}}deleteTask(e){let t=this.taskList.find(r=>r.id===e);t&&(t.isDelete=!0)}addTask(e){this.taskList.push(e),console.log("Nueva tarea a\xF1adida:",e)}getTask(e){return this.taskList.filter(t=>e==t.id)}getTasksAll(){let e=jP(this.database,"taskList");return VP(e)}remove(e){}static \u0275fac=function(t){return new(t||n)(L(fs))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var $5=(n,e,t)=>({" text-bg-danger":n,"text-bg-success":e,"text-bg-warning":t}),H5=n=>({"bi bi-play-fill":n}),W5=n=>({"bi bi-check-lg":n}),z5=n=>({"bi bi-arrow-return-right":n});function G5(n,e){n&1&&(_(0,"span"),v(1,"\xA0"),g())}function q5(n,e){if(n&1){let t=Or();_(0,"i",18),ue("click",function(){Vt(t);let i=de(2);return Ut(i.changePriorityUp(i.taskInput.id))}),g()}}function K5(n,e){n&1&&(_(0,"span"),v(1,"\xA0"),g())}function Y5(n,e){if(n&1){let t=Or();_(0,"i",19),ue("click",function(){Vt(t);let i=de(2);return Ut(i.changePriorityDown(i.taskInput.id))}),g()}}function Q5(n,e){if(n&1){let t=Or();_(0,"div",1)(1,"div",2)(2,"h5",3),v(3),g()(),_(4,"div",4)(5,"div",5)(6,"h2",6)(7,"button",7),v(8),g()(),_(9,"div",8)(10,"ul",9)(11,"li",10),v(12),$(13,G5,2,0,"span",11)(14,q5,1,0,"i",12)(15,K5,2,0,"span",11)(16,Y5,1,0,"i",13),g(),_(17,"li",10),v(18),_(19,"i",14),ue("click",function(){Vt(t);let i=de();return Ut(i.changeStatus(i.taskInput.id))}),g(),_(20,"i",14),ue("click",function(){Vt(t);let i=de();return Ut(i.changeStatus(i.taskInput.id))}),g(),_(21,"i",14),ue("click",function(){Vt(t);let i=de();return Ut(i.changeStatus(i.taskInput.id))}),g()(),_(22,"li",10),v(23),g(),_(24,"li",10)(25,"button",15),ue("click",function(){Vt(t);let i=de();return Ut(i.editTask(i.taskInput.id))}),H(26,"i",16),v(27," Editar "),g(),_(28,"button",15),ue("click",function(){Vt(t);let i=de();return Ut(i.deleteTask(i.taskInput.id))}),H(29,"i",17),v(30," Borrar "),g()()()()()()()}if(n&2){let t=de();b("ngClass",_D(21,$5,t.taskInput.priority=="H",t.taskInput.priority=="L",t.taskInput.priority=="M")),C(3),kg("",t.taskInput.name," (",t.taskInput.status,")"),C(),b("id","accordionFlushExample"+t.taskInput.id),C(2),b("id","flush-headingOne"+t.taskInput.id),C(),Pr("data-bs-target","#flush-collapseOne"+t.taskInput.id)("aria-controls","flush-collapseOne"+t.taskInput.id),C(),Js(" ",t.taskInput.description,""),C(),b("id","flush-collapseOne"+t.taskInput.id),Pr("aria-labelledby","flush-headingOne"+t.taskInput.id)("data-bs-parent","#accordionFlushExample"+t.taskInput.id),C(3),Js(" Prioridad: ",t.taskInput.priority," "),C(),b("ngIf",(t.taskInput.priority=="L"||t.taskInput.priority=="M")&&t.taskInput.status!="C"),C(),b("ngIf",(t.taskInput.priority=="L"||t.taskInput.priority=="M")&&t.taskInput.status!="C"),C(),b("ngIf",(t.taskInput.priority=="H"||t.taskInput.priority=="M")&&t.taskInput.status!="C"),C(),b("ngIf",(t.taskInput.priority=="H"||t.taskInput.priority=="M")&&t.taskInput.status!="C"),C(2),Js(" Estado: ",t.taskInput.status," "),C(),b("ngClass",bd(25,H5,t.taskInput.status=="P")),C(),b("ngClass",bd(27,W5,t.taskInput.status=="IP")),C(),b("ngClass",bd(29,z5,t.taskInput.status=="C")),C(2),Js("Expira: ",t.taskInput.expirationDate,"")}}var tp=class n{constructor(e){this.taskService=e}taskInput;eventEditTask=new Se;changeStatus(e){this.taskService.changeStatus(e)}changePriorityDown(e){this.taskService.changePriorityDown(e)}changePriorityUp(e){this.taskService.changePriorityUp(e)}deleteTask(e){this.taskService.deleteTask(e)}editTask(e){let t=this.taskService.getTask(e)[0];this.eventEditTask.emit(t)}static \u0275fac=function(t){return new(t||n)(N(ai))};static \u0275cmp=oe({type:n,selectors:[["app-resume"]],inputs:{taskInput:"taskInput"},outputs:{eventEditTask:"eventEditTask"},standalone:!0,features:[ae],decls:1,vars:1,consts:[["class","card",3,"ngClass",4,"ngIf"],[1,"card",3,"ngClass"],[1,"card-body"],[1,"card-title"],[1,"accordion","accordion-flush",3,"id"],[1,"accordion-item"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed"],[1,"accordion-collapse","collapse",3,"id"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[4,"ngIf"],["class","bi bi-arrow-up-circle-fill",3,"click",4,"ngIf"],["class","bi bi-arrow-down-circle-fill",3,"click",4,"ngIf"],[3,"click","ngClass"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-pencil-square"],[1,"bi","bi-trash"],[1,"bi","bi-arrow-up-circle-fill",3,"click"],[1,"bi","bi-arrow-down-circle-fill",3,"click"]],template:function(t,r){t&1&&$(0,Q5,31,31,"div",0),t&2&&b("ngIf",r.taskInput.isDelete==!1)},dependencies:[He,xr,Bt],styles:[".card[_ngcontent-%COMP%]{margin-top:2%;margin-bottom:2%}"]})};function J5(n,e){if(n&1){let t=Or();_(0,"app-resume",5),ue("eventEditTask",function(i){Vt(t);let s=de(2);return Ut(s.editTask(i))}),g()}if(n&2){let t=de().$implicit;b("taskInput",t)}}function Z5(n,e){if(n&1&&(Rg(0),$(1,J5,1,1,"app-resume",4),Mg()),n&2){let t=e.$implicit;C(),b("ngIf",!t.isDelete)}}var ha=class n{constructor(e){this.taskService=e}tasks=[];taskOutput=null;ngOnInit(){this.taskService.getTasksAll().subscribe(e=>{console.log("Tareas recibidas:",e),this.tasks=e})}loadTasks(){this.tasks=this.taskService.getTasks()}editTask(e){let t=e;this.taskOutput=t}static \u0275fac=function(t){return new(t||n)(N(ai))};static \u0275cmp=oe({type:n,selectors:[["app-tasklist"]],standalone:!0,features:[ae],decls:7,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],[4,"ngFor","ngForOf"],[3,"taskInput","eventEditTask",4,"ngIf"],[3,"eventEditTask","taskInput"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),v(4,"Listado de Tareas"),g()(),_(5,"div",2),$(6,Z5,2,1,"ng-container",3),g()()()),t&2&&(C(6),b("ngForOf",r.tasks))},dependencies:[He,VD,Bt,tp,tf]})};var np=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=oe({type:n,selectors:[["app-home"]],standalone:!0,features:[ae],decls:3,vars:0,template:function(t,r){t&1&&H(0,"app-navbar")(1,"app-tasklist")(2,"app-footer")},dependencies:[ha,He,pt,mt]})};var rp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=oe({type:n,selectors:[["app-tasks"]],standalone:!0,features:[ae],decls:3,vars:0,template:function(t,r){t&1&&H(0,"app-navbar")(1,"app-tasklist")(2,"app-footer")},dependencies:[pt,ha,He,mt]})};var ip=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=oe({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[ae],decls:8,vars:0,consts:[["routerLink","stats"],["routerLink","profile"]],template:function(t,r){t&1&&(H(0,"app-navbar"),_(1,"nav")(2,"a",0),v(3,"Estadisticas"),g(),v(4," | "),_(5,"a",1),v(6,"Profile"),g()(),H(7,"app-footer"))},dependencies:[pt,He,ho,mt]})};var sp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=oe({type:n,selectors:[["app-notfound"]],standalone:!0,features:[ae],decls:9,vars:0,consts:[[1,"d-flex","flex-column","align-items-center","justify-content-center",2,"height","100vh","text-align","center"],[1,"display-1","text-danger"],[1,"text-dark"],[1,"text-muted"],["routerLink","/home",1,"btn","btn-primary","mt-3"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"h1",1),v(2,"404"),g(),_(3,"h2",2),v(4,"P\xE1gina No Encontrada"),g(),_(5,"p",3),v(6,"Lo sentimos, no hemos podido encontrar la p\xE1gina que buscas."),g(),_(7,"a",4),v(8,"Volver al Inicio"),g()())},dependencies:[ho]})};var op=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=oe({type:n,selectors:[["app-stats"]],standalone:!0,features:[ae],decls:2,vars:0,template:function(t,r){t&1&&(_(0,"p"),v(1,"stats works!"),g())}})};var ap=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=oe({type:n,selectors:[["app-profile"]],standalone:!0,features:[ae],decls:2,vars:0,template:function(t,r){t&1&&(_(0,"p"),v(1,"profile works!"),g())}})};var BP=O(n=>!!n),X5=(()=>{class n{router;auth;constructor(t,r){this.router=t,this.auth=r}canActivate=(t,r)=>{let i=t.data.authGuardPipe||(()=>BP);return tN(this.auth).pipe(ht(1),i(t,r),O(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(r){return new(r||n)(L(ln),L(hr))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),ps=n=>({canActivate:[X5],data:{authGuardPipe:n}});var ms=n=>ma(BP,O(e=>e||n));function $P(){return n=>{let e=n.value;return new Date(e)>=new Date?null:{invalidDate:!0}}}function HP(){return n=>{let e=n.value;return e=="H"||e=="M"||e=="L"?null:{invalidPriority:!0}}}var cp=(n,e)=>({"is-valid":n,"is-invalid":e});function eK(n,e){n&1&&(_(0,"small"),v(1,"El nombre es obligatorio."),g())}function tK(n,e){n&1&&(_(0,"small"),v(1,"No puede tener m\xE1s de 50 caracteres."),g())}function nK(n,e){n&1&&(_(0,"small"),v(1,"No puede tener menos de 5 caracteres."),g())}function rK(n,e){if(n&1&&(_(0,"div",19),$(1,eK,2,0,"small",20)(2,tK,2,0,"small",20)(3,nK,2,0,"small",20),g()),n&2){let t,r,i,s=de();C(),b("ngIf",(t=s.formTaskEdit.get("name"))==null?null:t.hasError("required")),C(),b("ngIf",(r=s.formTaskEdit.get("name"))==null?null:r.hasError("maxlength")),C(),b("ngIf",(i=s.formTaskEdit.get("name"))==null?null:i.hasError("minlength"))}}function iK(n,e){n&1&&(_(0,"small"),v(1,"La descripci\xF3n es obligatoria."),g())}function sK(n,e){if(n&1&&(_(0,"div",19),$(1,iK,2,0,"small",20),g()),n&2){let t,r=de();C(),b("ngIf",(t=r.formTaskEdit.get("description"))==null?null:t.hasError("required"))}}function oK(n,e){n&1&&(_(0,"small"),v(1,"La prioridad es obligatoria."),g())}function aK(n,e){n&1&&(_(0,"small"),v(1,"La prioridad debe ser indicada con L, M o H."),g())}function cK(n,e){if(n&1&&(_(0,"div",19),$(1,oK,2,0,"small",20)(2,aK,2,0,"small",20),g()),n&2){let t,r,i=de();C(),b("ngIf",(t=i.formTaskEdit.get("priority"))==null?null:t.hasError("required")),C(),b("ngIf",(r=i.formTaskEdit.get("priority"))==null?null:r.hasError("invalidPriority"))}}function lK(n,e){n&1&&(_(0,"small"),v(1,"La fecha de expiraci\xF3n es obligatoria."),g())}function uK(n,e){n&1&&(_(0,"small"),v(1,"La fecha de expiraci\xF3n no puede ser menor a la fecha actual."),g())}function dK(n,e){if(n&1&&(_(0,"div",19),$(1,lK,2,0,"small",20)(2,uK,2,0,"small",20),g()),n&2){let t,r,i=de();C(),b("ngIf",(t=i.formTaskEdit.get("expireDate"))==null?null:t.hasError("required")),C(),b("ngIf",(r=i.formTaskEdit.get("expireDate"))==null?null:r.hasError("invalidDate"))}}var lp=class n{constructor(e,t){this.taskService=t;this.formTaskEdit=e.group({name:["",[pe.required,pe.maxLength(50),pe.minLength(5)]],description:["",[pe.required,pe.maxLength(250)]],priority:["",[pe.required,HP()]],expireDate:["",[pe.required,$P()]]})}formTaskEdit;taskInput=null;onsubmit(){if(this.formTaskEdit.valid)if(console.log("Formulario correcto y creamos nueva tarea"),this.formTaskEdit.valid){console.log("Formulario correcto y creamos nueva tarea");let e=Math.floor(Math.random()*100),t=this.formTaskEdit.get("name")?.value,r=this.formTaskEdit.get("description")?.value,i=this.formTaskEdit.get("priority")?.value,s="P",o=new Date().toDateString(),a=this.formTaskEdit.get("expireDate")?.value,c=!1,l=new sf(e,t,r,i,s,o,a,c);this.taskService.addTask(l),console.log(l),this.formTaskEdit.reset()}else console.log(`Formulario con errores y voy a mostrar los errores ${this.formTaskEdit.get("name")?.errors}`)}ngOnChanges(e){e.taskInput&&(console.log(this.taskInput),this.taskInput!=null&&this.formTaskEdit.setValue({name:this.taskInput.name,description:this.taskInput.description,priority:this.taskInput.priority,expireDate:this.taskInput.expirationDate.toString().slice(0,16)}))}static \u0275fac=function(t){return new(t||n)(N(Lo),N(ai))};static \u0275cmp=oe({type:n,selectors:[["app-taskform"]],inputs:{taskInput:"taskInput"},standalone:!0,features:[sn,ae],decls:37,vars:21,consts:[[1,"container","mt-5","d-flex","justify-content-center"],[1,"card","shadow-lg","p-4",2,"width","40rem"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","exampleFormControlInput1"],["type","text","id","exampleFormControlInput1","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","description"],["id","description","rows","2","formControlName","description",1,"form-control",3,"ngClass"],["for","exampleFormControlSelect1"],["id","exampleFormControlSelect1","formControlName","priority",1,"form-control",3,"ngClass"],["value","H"],["value","M"],["value","L"],[1,"form-group","mb-4"],["type","datetime-local","formControlName","expireDate",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","w-50",3,"click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,r){if(t&1&&(H(0,"app-navbar"),_(1,"div",0)(2,"div",1)(3,"h1",2),v(4,"Nueva Tarea"),g(),_(5,"form",3),ue("ngSubmit",function(){return r.onsubmit()}),_(6,"div",4)(7,"label",5),v(8,"Nombre de la tarea"),g(),H(9,"input",6),$(10,rK,4,3,"div",7),g(),_(11,"div",4)(12,"label",8),v(13,"Descripci\xF3n"),g(),_(14,"textarea",9),v(15,"        "),g(),$(16,sK,2,1,"div",7),g(),_(17,"div",4)(18,"label",10),v(19,"Prioridad"),g(),_(20,"select",11)(21,"option",12),v(22,"Alta"),g(),_(23,"option",13),v(24,"Media"),g(),_(25,"option",14),v(26,"Baja"),g()(),$(27,cK,3,2,"div",7),g(),_(28,"div",15)(29,"label",5),v(30,"Fecha de Expiraci\xF3n"),g(),H(31,"input",16),$(32,dK,3,2,"div",7),g(),_(33,"div",17)(34,"button",18),ue("click",function(){return r.onsubmit()}),v(35,"Guardar"),g()()()()(),H(36,"app-footer")),t&2){let i,s,o,a,c,l,u,d;C(5),b("formGroup",r.formTaskEdit),C(4),b("ngClass",ct(9,cp,((i=r.formTaskEdit.get("name"))==null?null:i.valid)&&((i=r.formTaskEdit.get("name"))==null?null:i.touched),((i=r.formTaskEdit.get("name"))==null?null:i.invalid)&&((i=r.formTaskEdit.get("name"))==null?null:i.touched))),C(),b("ngIf",((s=r.formTaskEdit.get("name"))==null?null:s.invalid)&&((s=r.formTaskEdit.get("name"))==null?null:s.touched)),C(4),b("ngClass",ct(12,cp,((o=r.formTaskEdit.get("description"))==null?null:o.valid)&&((o=r.formTaskEdit.get("description"))==null?null:o.touched),((o=r.formTaskEdit.get("description"))==null?null:o.invalid)&&((o=r.formTaskEdit.get("description"))==null?null:o.touched))),C(2),b("ngIf",((a=r.formTaskEdit.get("description"))==null?null:a.invalid)&&((a=r.formTaskEdit.get("description"))==null?null:a.touched)),C(4),b("ngClass",ct(15,cp,((c=r.formTaskEdit.get("priority"))==null?null:c.valid)&&((c=r.formTaskEdit.get("priority"))==null?null:c.touched),((c=r.formTaskEdit.get("priority"))==null?null:c.invalid)&&((c=r.formTaskEdit.get("priority"))==null?null:c.touched))),C(7),b("ngIf",((l=r.formTaskEdit.get("priority"))==null?null:l.invalid)&&((l=r.formTaskEdit.get("priority"))==null?null:l.touched)),C(4),b("ngClass",ct(18,cp,((u=r.formTaskEdit.get("expireDate"))==null?null:u.valid)&&((u=r.formTaskEdit.get("expireDate"))==null?null:u.touched),((u=r.formTaskEdit.get("expireDate"))==null?null:u.invalid)&&((u=r.formTaskEdit.get("expireDate"))==null?null:u.touched))),C(),b("ngIf",((d=r.formTaskEdit.get("expireDate"))==null?null:d.invalid)&&((d=r.formTaskEdit.get("expireDate"))==null?null:d.touched))}},dependencies:[Fo,xo,FN,UN,Xr,ef,Po,Oo,Yi,Qi,He,xr,Bt,pt,mt]})};var WP=[w({path:"home",component:np},ps(()=>ms(["/login"]))),w({path:"tasks",component:rp},ps(()=>ms(["/login"]))),{path:"login",component:nf},w({path:"taskform",component:lp},ps(()=>ms(["/login"]))),{path:"signin",component:rf},W(w({path:"dashboard",component:ip},ps(()=>ms(["/login"]))),{children:[w({path:"stats",component:op},ps(()=>ms(["/login"]))),w({path:"profile",component:ap},ps(()=>ms(["/login"])))]}),{path:"notfound",component:sp},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/notfound",pathMatch:"full"}];var zP={providers:[bD({eventCoalescing:!0}),jS(WP),iS(),g0(()=>_0({apiKey:"AIzaSyDcAflq3xPL45chkWr4t4m9_SRF-to_LnE",authDomain:"task-firebase-ea361.firebaseapp.com",databaseURL:"https://task-firebase-ea361-default-rtdb.europe-west1.firebasedatabase.app",projectId:"task-firebase-ea361",storageBucket:"task-firebase-ea361.firebasestorage.app",messagingSenderId:"142953094248",appId:"1:142953094248:web:7236b7dce8c0fd95172fdd"})),eN(()=>rN()),FP(()=>UP())]};var up=class n{title="David Castro";imagenaleatoria="";nombre="";numero=0;muestraimagenaleatoria(){let e=Math.trunc(Math.random()*1e3+100);this.imagenaleatoria="https://picsum.photos/200/300?random="+e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=oe({type:n,selectors:[["app-root"]],standalone:!0,features:[ae],decls:1,vars:0,template:function(t,r){t&1&&H(0,"router-outlet")},dependencies:[N_,tf]})};nS(up,zP).catch(n=>console.error(n));
